!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CombKline=e():(t.omui=t.omui||{},t.omui.CombKline=e())}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e){t.exports='<div class=kline-core> <div class=ctool-panel></div> <div class=canvas-indic> <div class=canvas-group> <canvas class="k-canvas main-canvas" style=cursor:default></canvas> <canvas class="k-canvas overlay-canvas" style=cursor:default></canvas> </div> <div class=indic-tabbar></div> </div> <div class=settings-panel></div> <div class="screenshot-panel hide"></div> </div>'},function(t,e){t.exports='<div class=settings-title></div> <div class=settings-table> <table> </table> </div> <div class=close-btn> <i class="iconfont icon-cancel"></i> </div> '},function(t,e,n){var o,r,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n,c){"object"==a(e)&&void 0!==t?c(e):(r=[e],void 0===(i="function"==typeof(o=c)?o.apply(e,r):o)||(t.exports=i))}(0,function(t){"use strict";var e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function n(t,o){var r=e({},t);for(var i in o)"object"!=a(t[i])||null===t[i]||Array.isArray(t[i])?void 0!==o[i]&&(r[i]=o[i]):r[i]=n(t[i],o[i]);return r}var o={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},r={width:800,height:500,interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function i(){return"1.15 (internal id 37fbf462 @ 2020-04-24 15:44:13.516973)"}var c=function(){function t(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=n(r,t),t.preset){var e=o[t.preset];e?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(e.disabled_features):this._options.disabled_features=e.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(e.enabled_features):this._options.enabled_features=e.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return t.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},t.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then(function(){return t._innerWindow().headerReady()})},t.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},t.prototype.onShortcut=function(t,e){this._innerWindow().createShortcutAction(t,e)},t.prototype.subscribe=function(t,e){this._innerAPI().subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._innerAPI().unsubscribe(t,e)},t.prototype.chart=function(t){return this._innerAPI().chart(t)},t.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},t.prototype.setSymbol=function(t,e,n){this._innerAPI().changeSymbol(t,e+"",n)},t.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},t.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},t.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},t.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},t.prototype.save=function(t){this._innerAPI().saveChart(t)},t.prototype.load=function(t,e){this._innerAPI().loadChart({json:t,extendedData:e})},t.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},t.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},t.prototype.saveChartToServer=function(t,e,n){this._innerAPI().saveChartToServer(t,e,n)},t.prototype.removeChartFromServer=function(t,e){this._innerAPI().removeChartFromServer(t,e)},t.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},t.prototype.createButton=function(t){return this._innerWindow().createButton(t)},t.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},t.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},t.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},t.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},t.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},t.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},t.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},t.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},t.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},t.prototype.applyOverrides=function(t){this._options=n(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},t.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},t.prototype.watchList=function(){return this._innerAPI().watchlist()},t.prototype.activeChart=function(){return this._innerAPI().activeChart()},t.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},t.prototype.layout=function(){return this._innerAPI().layout()},t.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},t.prototype.layoutName=function(){return this._innerAPI().layoutName()},t.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},t.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},t.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},t.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},t.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},t.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},t.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},t.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},t.prototype._innerWindow=function(){return this._iFrame.contentWindow},t.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},t.prototype._create=function(){var t=this,e=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=e,this._iFrame=n.querySelector("#"+this._id);var o=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(o.style.width="100%",this._options.fullscreen||(o.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(t){o.addEventListener("load",function e(){o.removeEventListener("load",e,!1),t()},!1)}),this._innerWindowLoaded.then(function(){t._innerWindow().widgetReady(function(){t._ready=!0;for(var e=0,n=t._readyHandlers;e<n.length;e++){var o=n[e];try{o.call(t)}catch(t){console.error(t)}}t._innerWindow().initializationFinished()})})},t.prototype._render=function(){var t=window;if(t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data)t[this._id].chartContent={json:this._options.saved_data};else if(!Boolean(this._options.symbol))throw new Error("Symbol is not defined");var e=(this._options.library_path||"")+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.1c7535a2aac5ec511ed5.html#symbol="+encodeURIComponent(this._options.symbol||"")+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+e+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},t}();window.TradingView=window.TradingView||{},window.TradingView.version=i,t.version=i,t.widget=c,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){t.exports='<div class=k-toolbar> <div class="hide icon"></div> <div class=periods></div> <div class=main-indicators></div> <div class=main-style></div> <div class="technical-indicator icon-button"></div> <div class="line-tool icon-button"></div> <div class="screenshot icon-button"></div> <div class="compare icon-button"></div> <div class="setting icon-button"></div> <div class="fullscreen icon-button"></div> <div class=toggle></div> <div class="popover hide"></div> </div> '},function(t,e){t.exports="<div class=kline-wrap> <div class=k-toolbar-wrap></div> <div class=kline-body-wrap id=omline-wrap></div> <div class=kline-body-wrap id=tv-kline-wrap></div> <div class=kline-loadding></div> </div> "},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=Object.prototype.hasOwnProperty,r="~";function i(){}function a(t,e,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,o||t,i),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function c(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=n.length,i=new Array(o),a=0;a<o;a++)i[a]=n[a].fn;return i},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var c=r?r+t:t;if(!this._events[c])return!1;var u,s,l=this._events[c],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,o),!0;case 5:return l.fn.call(l.context,e,n,o,i),!0;case 6:return l.fn.call(l.context,e,n,o,i,a),!0}for(s=1,u=new Array(f-1);s<f;s++)u[s-1]=arguments[s];l.fn.apply(l.context,u)}else{var h,p=l.length;for(s=0;s<p;s++)switch(l[s].once&&this.removeListener(t,l[s].fn,void 0,!0),f){case 1:l[s].fn.call(l[s].context);break;case 2:l[s].fn.call(l[s].context,e);break;case 3:l[s].fn.call(l[s].context,e,n);break;case 4:l[s].fn.call(l[s].context,e,n,o);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[s].fn.apply(l[s].context,u)}}return!0},u.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return c(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||n&&a.context!==n||c(this,i);else{for(var u=[],s=0,l=a.length;s<l;s++)(a[s].fn!==e||o&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&c(this,e)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u;var s=u;function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var h=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.length=0,this.context=n,null!==e[0]){for(var o=0;o<e.length;o++)this[o]=e[o];this.length=e.length}}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"addClass",value:function(t){for(var e=0;e<this.length;e++)this[e].classList.add(t);return this}},{key:"removeClass",value:function(t){for(var e=0;e<this.length;e++)this[e].classList.remove(t);return this}},{key:"hasClass",value:function(t){return this[0]&&this[0].classList.contains(t)}},{key:"before",value:function(t){return this[0]&&this[0].insertAdjacentHTML("beforebegin",t),this}},{key:"after",value:function(t){return this[0]&&this[0].insertAdjacentHTML("afterend",t),this}},{key:"append",value:function(e){return this[0]&&(e=e instanceof t?e[0]:e).appendChild(this[0]),this}},{key:"replaceWith",value:function(e){var n=this[0];return n&&(e=e instanceof t?e[0]:e,n.parentNode.replaceChild(e,n),this[0]=e),this}},{key:"clone",value:function(){return this[0]&&this[0].cloneNode(!0)}},{key:"each",value:function(t){[].forEach.call(this,t)}},{key:"empty",value:function(){return this[0]&&(this[0].innerHTML=""),this}},{key:"find",value:function(t){return this[0]&&this[0].querySelectorAll(t)||[]}},{key:"attr",value:function(t,e){return void 0!==e?(this[0]&&this[0].setAttribute(t,e),this):this[0]&&this[0].getAttribute(t)}},{key:"css",value:function(t,e){var n=this;if(!this[0])return this;if("object"===l(t))Object.keys(t).forEach(function(e){n.css(e,t[e])});else{if(void 0===e)return getComputedStyle(this[0])[t];t=t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()}),this[0].style[t]=e}}},{key:"on",value:function(t,e){if(!this[0])return this;this[0].handler=this[0].handler||{};var n=this[0].handler;return n[t]=n[t]||[],n[t].push(e),this[0].addEventListener(t,e,!1),this}},{key:"off",value:function(t,e){var n=this[0];if(!n)return this;var o=n.handler;if(!o)return this;var r=Object.keys(o);if(!t)return r.forEach(function(t){o[t].forEach(function(e){n.removeEventListener(t,e)})}),n.handler={},this;if(!o[t])return this;if(!e)return o[t].forEach(function(e){n.removeEventListener(t,e)}),n.handler[t]=[],this;n.removeEventListener(t,e);var i=o[t].indexOf(e);return i>=0&&n.handler[t].splice(i,1),this}},{key:"html",value:function(t){for(var e=0;e<this.length;e++)this[e]&&(this[e].innerHTML=t);return this}},{key:"closest",value:function(e){var n=this[0];if(n)for(var o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;n;){if(o.call(n,e))return new t([n]);n=n.parentElement}return null}},{key:"parent",value:function(){return this[0]?new t([this[0].parentNode]):new t([])}}]),t}();function p(t,e){if(t instanceof h)return t;var n;if("string"==typeof t&&(t=t.trim()),e=e instanceof h?e[0]:e||document,t.nodeType)n=t;else if(/</.test(t)){var o=document.createElement("div");o.innerHTML=t,n=o.firstChild}else n=e.querySelector(t);return new h([n],e)}function y(t,e){if(t instanceof h)return t;var n=(e=e instanceof h?e[0]:e||document).querySelectorAll(t);return new h(n,e)}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}p.ajax=function(t){var e=t.type,n=void 0===e?"get":e,o=t.url,r=void 0===o?"":o,i=window.utils;return i&&i.ont?i.ont({url:r,method:n}).then(function(t){return t.data}):new Promise(function(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&t(JSON.parse(o.responseText))},o.onerror=function(t){e(t)},o.open(n,r,!0),o.setRequestHeader("Content-type","application/json"),o.send()})};var _=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=g(this,m(e).call(this))).el=p(t.el),n.kConfig=t.kConfig,n.kSettings=t.kSettings,n.kState=t.kState,n.render(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,s),function(t,e,n){e&&d(t.prototype,e),n&&d(t,n)}(e,[{key:"render",value:function(){}}]),e}(),w=function(t){return localStorage.getItem(t)},O=function(t,e){return localStorage.setItem(t,e)},S={calcDecimalDigits:function(t){var e="".concat(t),n=e.indexOf("."),o=e.indexOf("e-");if(o>-1){var r=+e.slice(o+2);return n>=0?o-(n+1)+r:r}return n<0?0:e.length-1-n},safeDigits:function(t){var e=this.calcDecimalDigits(t);return Number(t)>1&&e>4?4:e<10?e:10},indexSymbol:function(t){return t.replace(/^(\w+-\w+).*/,"$1")},replaceCurrency:function(t,e){return e?t.replace(/^(\w+)-USD(-\w+)?$/,"$1-".concat(e,"$2")):t}},P=navigator.userAgent,k={isMobile:/iphone|ipad|ipod|ios|android/i.test(P),isUC:/ucbrowser/i.test(P)};function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,"subs",[]),this.id=t.uid++}return function(t,e,n){e&&j(t.prototype,e),n&&j(t,n)}(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"depend",value:function(){t.target.addDep(this)}},{key:"removeSub",value:function(t){var e=this.subs.indexOf(t);-1!=e&&this.subs.splice(e,1)}},{key:"notify",value:function(){this.subs.forEach(function(t){t.update()})}}]),t}();function T(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}x(C,"target",null),x(C,"uid",0);var I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"deps",{}),this.update=e}return function(t,e,n){e&&T(t.prototype,e),n&&T(t,n)}(t,[{key:"addDep",value:function(t){this.deps[t.id]||(t.addSub(this),this.deps[t.id]=t)}},{key:"removeDeps",value:function(){var t=this;Object.keys(this.deps).forEach(function(e){t.deps[e].removeSub(t)})}}]),t}();function E(t){var e=new I(t);return C.target=e,t(),C.target=null,function(){e.removeDeps()}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t){this.data=t,this.walk(t)}function D(t){if(t&&"object"===A(t))return new M(t),t}M.prototype={walk:function(t){var e=this;Object.keys(t).forEach(function(n){e.convert(n,t[n])})},convert:function(t,e){this.defineReactive(this.data,t,e)},defineReactive:function(t,e,n){var o=new C;D(n),Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get:function(){return C.target&&o.depend(),n},set:function(t){t!==n&&(n=t,D(t),o.notify())}})}};var R={period:"15m",language:"en_us",width:void 0,height:void 0,theme:"dark",customTheme:{},reverseColor:!1,showVolume:!0,showLanguage:!1,candleScale:20,showThemeSelect:!1,enableWheelScale:!0,mainStyle:"CandleStick",mainIndic:["MA"],showIndics:!0,showLineTool:!1,mainInfoStyle:"vertical",maxToolCount:20,logo:{position:{location:"center-center",x:0,y:0},size:{width:242,height:96},img:{dark:"https://static.bafang.com/cdn/assets/imgs/MjAxODEw/601731BAC719FC891D7BF9A67B6626B2.png",light:"https://static.bafang.com/cdn/assets/imgs/MjAxOTE/6B7F53DDFE7F61257C978168A8B42BBB.png",default:""}},screenshotIcon:"",currency:"",indicParam:{MA:[7,30,0,0,0,0],EMA:[7,30,0,0,0,0],VOLUME:[5,10],MACD:[12,26,9],KDJ:[9,3,3],StochRSI:[14,14,3,3],RSI:[6,12,24],DMI:[14,6],OBV:[30],BOLL:[20],DMA:[10,50,10],TRIX:[12,9],BRAR:[26],VR:[26,6],EMV:[14,9],WR:[10,6],ROC:[12,6],MTM:[12,6],PSY:[12,6]},indicPrecision:{MACD:5,OBV:5,TRIX:5,VR:5,EMV:5,default:2}};n(5),n(6);function N(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._reverseColor=e.reverseColor,this._name=""}return function(t,e,n){e&&N(t.prototype,e),n&&N(t,n)}(t,[{key:"getName",value:function(){return this._name}},{key:"setCustomTheme",value:function(t){var e=this;Object.keys(t).forEach(function(n){e[n]=t[n]})}}]),t}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=V(this,B(e).call(this,t)))._name="dark",n._reverseColor?(n.Positive="#D75558",n.Negative="#41A064",n.PositiveDark="#204342",n.NegativeDark="#482E3D",n.TextPositive="#D75558",n.TextNegative="#41A064"):(n.Positive="#41A064",n.Negative="#D75558",n.PositiveDark="#482E3D",n.NegativeDark="#204342",n.TextPositive="#41A064",n.TextNegative="#D75558"),n.Unchanged="#FFFFFF",n.Background="#121D32",n.MainInfoBg="#25334B",n.MainInfoAlpha=.65,n.CursorColor="#606775",n.Indicator0="#FFFFFF",n.Indicator1="#F7B715",n.Indicator2="#D051DA",n.Indicator3="#38BCAF",n.Indicator4="#CB7554",n.Indicator5="#9BD75A",n.Grid0="#3F4859",n.Grid1="#4D5565",n.Grid2="#FFFFFF",n.Grid3="#25334B",n.Grid4="#3F4859",n.Text0="#BEC1C7",n.Text1="#FFFFFF",n.Text2="#4D5565",n.Text3="#FFFFFF",n.Text4="#FFFFFF",n.LineColorNormal="#3075EE",n.LineColorSelected="#005DFF",n.CircleColorFill="#121D32",n.CircleColorStroke="#005DFF",n.DefaultFont=k.isMobile?"10px Arial":"12px Arial",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,L),e}();function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G={light:function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=U(this,W(e).call(this,t)))._name="light",n._reverseColor?(n.Positive="#EE6560",n.Negative="#4DB872",n.PositiveDark="#D2EDDC",n.NegativeDark="#FBD8D7",n.TextPositive="#EE6560",n.TextNegative="#4DB872"):(n.Positive="#4DB872",n.Negative="#EE6560",n.PositiveDark="#FBD8D7",n.NegativeDark="#D2EDDC",n.TextPositive="#4DB872",n.TextNegative="#EE6560"),n.Unchanged="#FFFFFF",n.Background="#FFFFFF",n.MainInfoBg="#25334B",n.MainInfoAlpha=.85,n.CursorColor="#898989",n.Indicator0="#E64C7D",n.Indicator1="#F7B715",n.Indicator2="#D051DA",n.Indicator3="#38BCAF",n.Indicator4="#CB7554",n.Indicator5="#9BD75A",n.Grid0="#000000",n.Grid1="#C6C6C6",n.Grid2="#25334B",n.Grid3="#25334B",n.Grid4="#C6C6C6",n.Text0="#FFFFFF",n.Text1="#FFFFFF",n.Text2="#888888",n.Text3="#FFFFFF",n.Text4="#656565",n.LineColorNormal="#3075EE",n.LineColorSelected="#005DFF",n.CircleColorFill="#FFFFFF",n.CircleColorStroke="#005DFF",n.DefaultFont=k.isMobile?"10px Arial":"12px Arial",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,L),e}(),dark:Y};function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new G[t](e),o=(e.customTheme||{})[t]||{};return n.setCustomTheme(o),n}function J(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var K=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.kId=e.kId,this.kConfig=e.kConfig;var n=this.load()||this.getDefault();return n.charts.areaHeight=[],D(n),this.data=n,n.save=this.save.bind(this),t.instanceMap[e.kId]=n,n}return function(t,e,n){e&&J(t.prototype,e),n&&J(t,n)}(t,[{key:"getDefault",value:function(){var t=this.kConfig;return{charts:{mainStyle:t.mainStyle,mainIndic:t.mainIndic,indics:["VOLUME","MACD"],showIndics:t.showIndics,showLineTool:t.showLineTool,period:t.period},indics:t.indicParam}}},{key:"load",value:function(){try{var t=w("chart-settings-".concat(this.kId));if(!t)return;var e=JSON.parse(t),n=e.charts.mainIndic;if(!n)return e.charts.mainIndic=[],e;var o=this.kConfig.compare,r=void 0===o?{}:o,i=n.indexOf("Index");return r.index&&r.index.indicator||!(i>-1)||n.splice(i,1),e}catch(t){}}},{key:"save",value:function(){try{O("chart-settings-".concat(this.kId),JSON.stringify(this.data))}catch(t){}}}],[{key:"getInstance",value:function(e){return t.instanceMap[e]}}]),t}();function $(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(K,"instanceMap",{});var Q=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._names=[],this._comps=[],e instanceof t)this._names=e._names,this._comps=e._comps;else{var n=e.split("."),o=n.length-1;if(o>0){this._comps=n,this._names.push(n[0]);for(var r=1;r<=o;r++)this._names.push("".concat(this._names[r-1],".").concat(n[r]))}else this._comps.push(e),this._names.push(e)}}return function(t,e,n){e&&$(t.prototype,e),n&&$(t,n)}(t,[{key:"getCompAt",value:function(t){return t>=0&&t<this._comps.length?this._comps[t]:""}},{key:"getName",value:function(t){if(t<0){if(this._names.length>0)return this._names[this._names.length+t]}else if(t<this._names.length)return this._names[t];return""}}]),t}();function Z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._nameObj=new Q(e)}return function(t,e,n){e&&Z(t.prototype,e),n&&Z(t,n)}(t,[{key:"getFrameName",value:function(){return this._nameObj.getName(0)}},{key:"getDataSourceName",value:function(){return this._nameObj.getName(1)}},{key:"getAreaName",value:function(){return this._nameObj.getName(2)}},{key:"getName",value:function(){return this._nameObj.getName(-1)}},{key:"getNameObject",value:function(){return this._nameObj}},{key:"getRectCrossPt",value:function(t,e,n){var o={x:-1,y:-1},r={x:-1,y:-1},i=n.x-e.x,a=n.y-e.y;if(Math.abs(i)<2)return[o={x:e.x,y:t.top},r={x:n.x,y:t.bottom}];var c=a/i;return r.x=t.right,r.y=e.y+(t.right-e.x)*c,o.x=t.left,o.y=e.y+(t.left-e.x)*c,[o,r]}}]),t}();function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ot(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var at=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ot(this,rt(e).call(this,t))).kId=o.kId,n.kSettings=o.kSettings,n.kConfig=o.kConfig,n.kState=o.kState,n._dockStyle=o.dockStyle,n._left=0,n._top=0,n._right=0,n._bottom=0,n._changed=!1,n._highlighted=!1,n._pressed=!1,n._selected=!1,n.Measuring=new s,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(e,tt),function(t,e,n){e&&nt(t.prototype,e),n&&nt(t,n)}(e,[{key:"getDockStyle",value:function(){return this._dockStyle}},{key:"getLeft",value:function(){return this._left}},{key:"getTop",value:function(){return this._top}},{key:"setTop",value:function(t){this._top!==t&&(this._top=t,this._changed=!0)}},{key:"getRight",value:function(){return this._right}},{key:"getBottom",value:function(){return this._bottom}},{key:"setBottom",value:function(t){this._bottom!==t&&(this._bottom=t,this._changed=!0)}},{key:"getCenter",value:function(){return this._left+this._right>>1}},{key:"getMiddle",value:function(){return this._top+this._bottom>>1}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"getRect",value:function(){return{X:this._left,Y:this._top,Width:this._right-this._left,Height:this._bottom-this._top}}},{key:"contains",value:function(t,e){return t>=this._left&&t<this._right&&e>=this._top&&e<this._bottom?[this]:null}},{key:"getMeasuredWidth",value:function(){return this._measuredWidth}},{key:"getMeasuredHeight",value:function(){return this._measuredHeight}},{key:"setMeasuredDimension",value:function(t,e){this._measuredWidth=t,this._measuredHeight=e}},{key:"measure",value:function(t,e,n){this._measuredWidth=0,this._measuredHeight=0,this.Measuring.emit("measure",this,{Width:e,Height:n}),0===this._measuredWidth&&0===this._measuredHeight&&this.setMeasuredDimension(e,n)}},{key:"doLayout",value:function(t,e,n,o,r){t<<=0,this._left!==t&&(this._left=t,this._changed=!0),e<<=0,this._top!==e&&(this._top=e,this._changed=!0),n<<=0,this._right!==n&&(this._right=n,this._changed=!0),o<<=0,this._bottom!==o&&(this._bottom=o,this._changed=!0),r&&(this._changed=!0)}},{key:"isChanged",value:function(){return this._changed}},{key:"setChanged",value:function(t){this._changed=t}},{key:"isHighlighted",value:function(){return this._highlighted}},{key:"getHighlightedArea",value:function(){return this._highlighted?this:null}},{key:"highlight",value:function(t){return this._highlighted=this===t,this._highlighted?this:null}},{key:"isPressed",value:function(){return this._pressed}},{key:"setPressed",value:function(t){this._pressed=t}},{key:"isSelected",value:function(){return this._selected}},{key:"getSelectedArea",value:function(){return this._selected?this:null}},{key:"select",value:function(t){return this._selected=this===t,this._selected?this:null}},{key:"onMouseMove",value:function(t,e){return null}},{key:"onMouseLeave",value:function(t,e){}},{key:"onMouseDown",value:function(t,e){return null}},{key:"onMouseUp",value:function(t,e){return null}}]),e}();function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function st(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lt(t,e,n){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ft(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pt=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=st(this,ft(e).call(this,t,n)))._areas=[],o._highlightedArea=null,o._selectedArea=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(e,at),function(t,e,n){e&&ut(t.prototype,e),n&&ut(t,n)}(e,[{key:"contains",value:function(t,n){var o,r,i=this._areas.length;for(r=0;r<i;r++)if(null!==(o=this._areas[r].contains(t,n)))return o.push(this),o;return lt(ft(e.prototype),"contains",this).call(this,t,n)}},{key:"getAreaCount",value:function(){return this._areas.length}},{key:"getAreaAt",value:function(t){return t<0||t>=this._areas.length?null:this._areas[t]}},{key:"addArea",value:function(t){this._areas.push(t)}},{key:"removeArea",value:function(t){var e,n=this._areas.length;for(e=0;e<n;e++)if(t===this._areas[e]){this._areas.splice(e),this.setChanged(!0);break}}},{key:"getGridColor",value:function(){return this._gridColor}},{key:"setGridColor",value:function(t){this._gridColor=t}},{key:"getHighlightedArea",value:function(){return this._highlightedArea?this._highlightedArea.getHighlightedArea():null}},{key:"highlight",value:function(t){var e,n;this._highlightedArea=null;var o=this._areas.length;for(n=0;n<o;n++)if(null!==(e=this._areas[n].highlight(t)))return this._highlightedArea=e,this;return null}},{key:"getSelectedArea",value:function(){return null!==this._selectedArea?this._selectedArea.getSelectedArea():null}},{key:"select",value:function(t){var e,n;this._selectedArea=null;var o=this._areas.length;for(n=0;n<o;n++)if(null!==(e=this._areas[n].select(t)))return this._selectedArea=e,this;return null}},{key:"onMouseLeave",value:function(t,e){var n,o=this._areas.length;for(n=0;n<o;n++)this._areas[n].onMouseLeave(t,e)}},{key:"onMouseUp",value:function(t,e){var n,o,r=this._areas.length;for(o=0;o<r;o++)if(null!==(n=this._areas[o].onMouseUp(t,e)))return n;return null}}]),e}(),yt={Cursor:0,CrossCursor:1,DrawLines:2,DrawFibRetrace:3,DrawFibFans:4,SegLine:5,StraightLine:6,ArrowLine:7,RayLine:8,HoriStraightLine:9,HoriRayLine:10,HoriSegLine:11,VertiStraightLine:12,PriceLine:13,BiParallelLine:14,BiParallelRayLine:15,TriParallelLine:16,BandLine:17},bt=[423.6,261.8,250,161.8,150,100,78.6,61.8,50,38.2,23.6,0],dt={Hide:0,Show:1,Highlight:2},gt={BeforeDraw:0,Draw:1,AfterDraw:2},mt={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."},vt=0,_t=1,wt=2,Ot=3,St={Left:0,Top:1,Right:2,Bottom:3,Fill:4};function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jt(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tt=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=jt(this,xt(e).call(this,t,n)))._dragStarted=!1,o._oldX=0,o._oldY=0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,at),function(t,e,n){e&&kt(t.prototype,e),n&&kt(t,n)}(e,[{key:"onMouseMove",value:function(t,e){var n=ag.getInstance(this.kId);if(n._capturingMouseArea===this&&!1===this._dragStarted&&(this._oldX===t&&this._oldY===e||(this._dragStarted=!0)),this._dragStarted)return n.hideCursor(),n.getTimeline(this.getDataSourceName()).move(t-this._oldX),this;switch(n._drawingTool){case yt.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.showCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1}},{key:"onMouseDown",value:function(t,e){return ag.getInstance(this.kId).getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!0,this}},{key:"onMouseUp",value:function(t,e){return this._dragStarted?(this._dragStarted=!1,this):null}}]),e}();function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function At(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mt(t){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),At(this,Mt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(e,at),function(t,e,n){e&&Et(t.prototype,e),n&&Et(t,n)}(e,[{key:"onMouseMove",value:function(){return ag.getInstance(this.kId).showCursor(),this}}]),e}();function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ft(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ht=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Ft(this,Vt(e).call(this,t,n)))._dragStarted=!1,o._oldX=0,o._oldY=0,o._passMoveEventToToolManager=!0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(e,at),function(t,e,n){e&&Lt(t.prototype,e),n&&Lt(t,n)}(e,[{key:"onMouseMove",value:function(t,e){var n=ag.getInstance(this.kId);if(n._capturingMouseArea===this&&!1===this._dragStarted&&(Math.abs(this._oldX-t)>1||Math.abs(this._oldY-e)>1)&&(this._dragStarted=!0),this._dragStarted)return n.hideCursor(),n.onToolMouseDrag(this.getFrameName(),t,e)?this:(n.getTimeline(this.getDataSourceName()).move(t-this._oldX),this);if(this._passMoveEventToToolManager&&n.onToolMouseMove(this.getFrameName(),t,e))return n.getSelectToolObjcet()?n.showCursor():n.hideCursor(),this;switch(n._drawingTool){case yt.Cursor:n.showCursor();break;case yt.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.hideCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1,this._passMoveEventToToolManager=!0}},{key:"onMouseDown",value:function(t,e){var n=ag.getInstance(this.kId);return n.getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!0,n.onToolMouseDown(this.getFrameName(),t,e)&&(this._passMoveEventToToolManager=!1),this}},{key:"onMouseUp",value:function(t,e){var n=ag.getInstance(this.kId),o=null;return this._dragStarted&&(this._dragStarted=!1,o=this),this._passMoveEventToToolManager=!0,n.getSelectToolObjcet()&&(o=this),n.onToolMouseUp(this.getFrameName(),t,e)?this:(n.updateToolObject(),o)}}]),e}();function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ut(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ut(this,Wt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(e,at),function(t,e,n){e&&Xt(t.prototype,e),n&&Xt(t,n)}(e,[{key:"onMouseMove",value:function(t,e){return ag.getInstance(this.kId).showCursor(),this}}]),e}();function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Kt(this,$t(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(e,at),function(t,e,n){e&&Jt(t.prototype,e),n&&Jt(t,n)}(e,[{key:"onMouseMove",value:function(t,e){return ag.getInstance(this.kId).showCursor(),this}}]),e}();function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ne(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oe(t,e,n){return(oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=re(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ae=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ne(this,re(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(e,pt),function(t,e,n){e&&ee(t.prototype,e),n&&ee(t,n)}(e,[{key:"measure",value:function(t,n,o){for(var r in oe(re(e.prototype),"measure",this).call(this,t,n,o),n=this.getMeasuredWidth(),o=this.getMeasuredHeight(),this._areas){var i=this._areas[r];switch(i.measure(t,n,o),i.getDockStyle()){case St.left:case St.Right:n-=i.getMeasuredWidth();break;case St.Top:case St.Bottom:o-=i.getMeasuredHeight();break;case St.Fill:n=0,o=0}}}},{key:"doLayout",value:function(t,n,o,r,i){var a,c;for(var u in oe(re(e.prototype),"doLayout",this).call(this,t,n,o,r,i),t=this.getLeft(),n=this.getTop(),o=this.getRight(),r=this.getBottom(),i=i||this.isChanged(),this._areas){var s=this._areas[u];switch(s.getDockStyle()){case St.left:a=s.getMeasuredWidth(),s.doLayout(t,n,t+a,r,i),t+=a;break;case St.Top:c=s.getMeasuredHeight(),s.doLayout(t,n,o,n+c,i),n+=c;break;case St.Right:a=s.getMeasuredWidth(),s.doLayout(o-a,n,o,r,i),o-=a;break;case St.Bottom:c=s.getMeasuredHeight(),s.doLayout(t,r-c,o,r,i),r-=c;break;case St.Fill:s.doLayout(t,n,o,r,i),t=o,n=r}}this.setChanged(!1)}},{key:"drawGrid",value:function(t){var e=ag.getInstance(this.kId).getTheme(this.getFrameName()),n=this.getLeft(),o=this.getTop(),r=this.getRight(),i=this.getBottom();for(var a in t.fillStyle=e[this.getGridColor()],this._areas){var c=this._areas[a];switch(c.getDockStyle()){case St.Left:t.fillRect(c.getRight(),o,1,i-o),n+=c.getWidth();break;case St.Top:t.fillRect(n,c.getBottom(),r-n,1),o+=c.getHeight();break;case St.Right:t.fillRect(c.getLeft(),o,1,i-o),r-=c.getWidth();break;case St.Bottom:t.fillRect(n,c.getTop(),r-n,1),i-=c.getHeight()}}}}]),e}();function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function se(t,e){return!e||"object"!==ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t,e,n){return(le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fe(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=se(this,fe(e).call(this,t,n)))._nextRowId=0,o._focusedRowIndex=-1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(e,pt),function(t,e,n){e&&ue(t.prototype,e),n&&ue(t,n)}(e,[{key:"getNextRowId",value:function(){return this._nextRowId++}},{key:"measure",value:function(t,e,n){var o;this.setMeasuredDimension(e,n);var r,i,a,c=0,u=0,s=[],l=this._areas.length;for(a=0;a<l;a+=2){if(0===(o=this._areas[a].getHeight())){if(0===a){var f=n/(2*(i=l+1>>1)+5)*2<<0;for(r=n,a=i-1;a>0;a--)s.unshift(f),r-=f;s.unshift(r);break}o=2===a?c/3:c}u+=o,c=o,s.push(o)}if(u>0){var h=n/u;for(r=n,a=(i=l+1>>1)-1;a>0;a--)s[a]*=h,r-=s[a];s[0]=r}var p=Math.min(240,e>>1),y=76,b=ag.getInstance(this.kId),d=b.getTimeline(this.getDataSourceName());if(d.getFirstIndex()>=0){var g=[];for(y=76;y<p;y+=8)g.push(d.calcFirstIndex(d.calcColumnCount(e-y)));var m,v,_=d.getLastIndex(),w=[".main",".secondary"],O=new Array(g.length);for(m=0,v=0,y=76;m<this._areas.length&&v<g.length;m+=2){var S=this._areas[m],P=b.getPlotter("".concat(S.getName(),"Range.main"));for(var k in w){var j=b.getDataProvider(S.getName()+w[k]);if(void 0!==j)for(j.calcRange(g,_,O,null);v<g.length;){var x=P.getRequiredWidth(t,O[v].min),C=P.getRequiredWidth(t,O[v].max);if(Math.max(x,C)<y)break;v++,y+=8}}}}for(a=1;a<this._areas.length;a+=2)this._areas[a].measure(t,y,s[a>>1]);var T=e-y;for(a=0;a<this._areas.length;a+=2)this._areas[a].measure(t,T,s[a>>1])}},{key:"doLayout",value:function(t,n,o,r,i){if(le(fe(e.prototype),"doLayout",this).call(this,t,n,o,r,i),!(this._areas.length<1)){var a,c,u,s=t+this._areas[0].getMeasuredWidth(),l=n;i||(i=this.isChanged());var f=this._areas.length;for(u=0;u<f;u++)c=l+(a=this._areas[u]).getMeasuredHeight(),a.doLayout(t,l,s,c,i),u++,(a=this._areas[u]).doLayout(s,l,this.getRight(),c,i),l=c;this.setChanged(!1)}}},{key:"drawGrid",value:function(t){if(!(this._areas.length<1)){var e,n=ag.getInstance(this.kId),o=n.getTheme(this.getFrameName());t.fillStyle=o.Grid1,t.fillRect(this._areas[0].getRight(),this.getTop(),1,this.getHeight());var r=this._areas.length-2;for(e=0;e<r;e+=2)t.fillRect(this.getLeft(),this._areas[e].getBottom(),this.getWidth(),1);if(!n.getCaptureMouseWheelDirectly())for(e=0,r+=2;e<r;e+=2)if(this._areas[e].isSelected()){t.strokeStyle=o.Indicator1,t.strokeRect(this.getLeft()+.5,this.getTop()+.5,this.getWidth()-1,this.getHeight()-1);break}}}},{key:"highlight",value:function(t){var e,n;this._highlightedArea=null;var o=this._areas.length;for(n=0;n<o;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).highlight(e),this._highlightedArea=e,n++,(e=this._areas[n]).highlight(null),e.highlight(e)):e.highlight(null);return null!==this._highlightedArea?this:null}},{key:"select",value:function(t){var e,n;this._selectedArea=null;var o=this._areas.length;for(n=0;n<o;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).select(e),this._selectedArea=e,n++,(e=this._areas[n]).select(e)):e.select(null);return null!==this._selectedArea?this:null}},{key:"onMouseMove",value:function(t,e){if(this._focusedRowIndex>=0){var n=this._areas[this._focusedRowIndex],o=this._areas[this._focusedRowIndex+2],r=e-this._oldY;if(0===r)return this;var i=this._oldUpperBottom+r,a=this._oldLowerTop+r;return i-n.getTop()>=60&&o.getBottom()-a>=60&&(n.setBottom(i),o.setTop(a)),this}var c,u=this._areas.length-2;for(c=0;c<u;c+=2){var s=this._areas[c].getBottom();if(e>=s-4&&e<s+4)return ag.getInstance(this.kId).showCursor("n-resize"),this}return null}},{key:"onMouseLeave",value:function(t,e){this._focusedRowIndex=-1}},{key:"onMouseDown",value:function(t,e){var n,o=this._areas.length-2;for(n=0;n<o;n+=2){var r=this._areas[n].getBottom();if(e>=r-4&&e<r+4)return this._focusedRowIndex=n,this._oldY=e,this._oldUpperBottom=r,this._oldLowerTop=this._areas[n+2].getTop(),this}return null}},{key:"onMouseUp",value:function(t,e){if(this._focusedRowIndex>=0){var n;this._focusedRowIndex=-1;var o=this._areas.length,r=[];for(n=0;n<o;n+=2)r.push(this._areas[n].getHeight());this.kSettings.charts.areaHeight=r,this.kSettings.save()}return this}}]),e}();function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function de(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ge(t,e){return!e||"object"!==ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _e=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ge(this,me(e).call(this,t))).selectedObject=-1,n.toolObjects=[],n.hideToolObjects=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(e,tt),function(t,e,n){e&&de(t.prototype,e),n&&de(t,n)}(e,[{key:"getToolObjectCount",value:function(){return this.toolObjects.length}},{key:"addToolObject",value:function(t){this.toolObjects.push(t)}},{key:"getToolObject",value:function(t){return t<this.toolObjects.length&&t>=0?this.toolObjects[t]:null}},{key:"getCurrentObject",value:function(){return this.getToolObject(this.getToolObjectCount()-1)}},{key:"getSelectedObject",value:function(){return this.getToolObject(this.selectedObject)}},{key:"trySelectObject",value:function(t,e,n){if(n=n||this.getSelectedObject())return n.trySelect(t,e)?n:(n.unselect(),this.selectedObject=-1,null);for(var o in this.toolObjects){var r=this.toolObjects[o];if(r.trySelect(t,e))return this.selectedObject=o,r}return null}},{key:"unselectObject",value:function(){var t=this.getSelectedObject();return t?(t.unselect(),this.selectedObject=-1,t):null}},{key:"delSelectedObject",value:function(){-1!=this.selectedObject&&(this.toolObjects.splice(this.selectedObject,1),this.selectedObject=-1)}},{key:"delCurrentObject",value:function(){this.toolObjects.splice(this.getToolObjectCount()-1,1)}},{key:"delAllObject",value:function(){this.toolObjects=[],this.hideToolObjects=[],this.selectedObject=-1}},{key:"hideSelectObject",value:function(){var t=this.getSelectedObject();t.unselect(),this.hideToolObjects.push(t),this.delSelectedObject()}},{key:"hideAllObject",value:function(){this.hideToolObjects=be(this.toolObjects).concat(be(this.hideToolObjects)),this.toolObjects=[],this.selectedObject=-1,this.hideToolObjects.forEach(function(t){t.unselect()})}},{key:"showAllObject",value:function(){this.toolObjects=be(this.toolObjects).concat(be(this.hideToolObjects)),this.hideToolObjects=[],this.selectedObject=-1,this.toolObjects.forEach(function(t){t.unselect()})}},{key:"getHideObjectCount",value:function(){return this.hideToolObjects.length}},{key:"acceptMouseMoveEvent",value:function(t,e){if(-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(n&&n.getState()!==gt.AfterDraw)return n.acceptMouseMoveEvent(t,e)}else{var o=this.toolObjects[this.selectedObject];if(o.getState()===gt.Draw)return o.acceptMouseMoveEvent(t,e)}return this.trySelectObject(t,e),!1}},{key:"acceptMouseDownEvent",value:function(t,e){if(this.mouseDownMove=!1,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(n&&n.getState()!==gt.AfterDraw)return n.acceptMouseDownEvent(t,e)}else{var o=this.toolObjects[this.selectedObject];if(o.getState()!==gt.BeforeDraw)return o.acceptMouseDownEvent(t,e)}return!1}},{key:"acceptMouseDownMoveEvent",value:function(t,e){if(this.mouseDownMove=!0,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];return!(!n||n.getState()!==gt.Draw)&&n.acceptMouseDownMoveEvent(t,e)}var o=this.toolObjects[this.selectedObject];if(o.getState()!==gt.BeforeDraw){if(!0===o.acceptMouseDownMoveEvent(t,e))for(var r=this.toolObjects[this.selectedObject].points,i=0;i<r.length;i++)if(r[i].state===dt.Highlight||r[i].state===dt.Show)return!0;return!0}}},{key:"acceptMouseUpEvent",value:function(t,e){if(!0===this.mouseDownMove){var n=this.getSelectedObject();if(n&&n.getState()!==gt.BeforeDraw)return this.unselectObject(),n.acceptMouseUpEvent(t,e)}if(-1!==this.selectedObject){var o=this.trySelectObject(t,e);return!!o&&(o.acceptMouseUpEvent(t,e),!0)}var r=this.toolObjects[this.getToolObjectCount()-1];if(null!==r&&void 0!==r){if(r.getState()===gt.Draw)return!0;if(!r.isValidMouseXY(t,e))return!1;if(r.trySelect(t,e))return!0}return!1}}]),e}();function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Se(t,e){return!e||"object"!==we(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var je=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Se(this,Pe(e).call(this,t)))._dataItems=[],n._indexPriceItems=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(e,tt),function(t,e,n){e&&Oe(t.prototype,e),n&&Oe(t,n)}(e,[{key:"getUpdateMode",value:function(){return this._updateMode}},{key:"setUpdateMode",value:function(t){this._updateMode=t}},{key:"getCacheSize",value:function(){return 0}},{key:"getDataCount",value:function(){return 0}},{key:"getDataAt",value:function(t){return this._dataItems[t]}},{key:"getLastItem",value:function(){return this._dataItems[this._dataItems.length-1]}}]),e}();function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Te(t,e){return!e||"object"!==xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ie(t){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e){return(Ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ae=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Te(this,Ie(e).call(this,t)))._erasedCount=0,n._decimalDigits=0,n._updatedCount=0,n._appendedCount=0,n.toolManager=new _e(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ee(t,e)}(e,je),function(t,e,n){e&&Ce(t.prototype,e),n&&Ce(t,n)}(e,[{key:"getData",value:function(){return this._dataItems}},{key:"setData",value:function(t){this._dataItems=t||[],this.setUpdateMode(wt)}},{key:"getCacheSize",value:function(){return this._dataItems.length}},{key:"getDataCount",value:function(){return this._dataItems.length}},{key:"getUpdatedCount",value:function(){return this._updatedCount}},{key:"getAppendedCount",value:function(){return this._appendedCount}},{key:"getErasedCount",value:function(){return this._erasedCount}},{key:"getDecimalDigits",value:function(){return this._decimalDigits}},{key:"getLastDate",value:function(){var t=this.getDataCount();return t<1?-1:this.getDataAt(t-1).date}},{key:"getDataAt",value:function(t){return this._dataItems[t]}},{key:"updateData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._updatedCount=0,this._appendedCount=0,this._erasedCount=0;var n=this._dataItems.length;if(e){this._decimalDigits=0,this.setUpdateMode(_t),this._dataItems.length=0;for(var o,r=0;r<t.length;r++){o=t[r];for(var i=1;i<=4;i++){var a=S.safeDigits(o[i]);this._decimalDigits<a&&(this._decimalDigits=a)}this._dataItems.push({date:o[0],open:o[1],high:o[2],low:o[3],close:o[4],volume:o[5]})}return!0}if(n>0){for(var c,u=n-1,s=this._dataItems[u],l=t.length,f=!1,h=0;h<l;h++)(c=t[h])[0]===s.date?(f=!0,this.setUpdateMode(wt),this._dataItems[u]={date:c[0],open:c[1],high:c[2],low:c[3],close:c[4],volume:c[5]},this._updatedCount++):c[0]>s.date&&(f=!0,this.setUpdateMode(Ot),this._appendedCount++,this._dataItems.push({date:c[0],open:c[1],high:c[2],low:c[3],close:c[4],volume:c[5]}));return f}return!1}},{key:"getIndexPriceAt",value:function(t){for(var e=this.getDataAt(t),n=0,o=this._indexPriceItems.length;n<o;n++){var r=this._indexPriceItems[n];if(e.date===r.date)return r}return{close:NaN}}},{key:"updateIndexPrice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._indexPriceItems.length;if(e||0===n)this._indexPriceItems=t.map(function(t){return{date:t[0],close:t[4]}});else for(var o=n-1,r=this._indexPriceItems[o],i=0;i<t.length;i++){var a={date:t[i][0],close:t[i][4]};a.date===r.date&&(this._indexPriceItems[o]=a),a.date>r.date&&this._indexPriceItems.push(a)}}},{key:"unselect",value:function(){this.toolManager.unselectObject()}},{key:"addToolObject",value:function(t){this.toolManager.addToolObject(t)}},{key:"delToolObject",value:function(){this.toolManager.delCurrentObject()}},{key:"getToolObject",value:function(t){return this.toolManager.getToolObject(t)}},{key:"getToolObjectCount",value:function(){return this.toolManager.toolObjects.length}},{key:"getCurrentToolObject",value:function(){return this.toolManager.getCurrentObject()}},{key:"getSelectToolObjcet",value:function(){return this.toolManager.getSelectedObject()}},{key:"delSelectToolObject",value:function(){this.toolManager.delSelectedObject()}},{key:"delAllToolObject",value:function(){this.toolManager.delAllObject()}},{key:"hideSelectToolObject",value:function(){this.toolManager.hideSelectObject()}},{key:"hideAllToolObject",value:function(){this.toolManager.hideAllObject()}},{key:"showAllToolObject",value:function(){this.toolManager.showAllObject()}},{key:"getHideToolObjectCount",value:function(){return this.toolManager.getHideObjectCount()}}]),e}();function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Re(t,e){return!e||"object"!==Me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,e){return(Le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fe=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Re(this,Ne(e).call(this,t))).kId=n.kId,o._minValue=0,o._maxValue=0,o._minValueIndex=-1,o._maxValueIndex=-1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Le(t,e)}(e,tt),function(t,e,n){e&&De(t.prototype,e),n&&De(t,n)}(e,[{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getMinValueIndex",value:function(){return this._minValueIndex}},{key:"getMaxValueIndex",value:function(){return this._maxValueIndex}},{key:"getMinMaxAt",value:function(t,e){return!0}},{key:"calcRange",value:function(t,e,n,o){for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=-1,c=-1,u={},s=e-1,l=t.length-1;l>=0;l--){var f=t[l];if(s<f)n[l]={min:r,max:i};else{for(;s>=f;s--)!1!==this.getMinMaxAt(s,u)&&(r>u.min&&(r=u.min,a=s),i<u.max&&(i=u.max,c=s));n[l]={min:r,max:i}}null!==o&&void 0!==o&&(o[l]={minIndex:a,maxIndex:c})}}},{key:"updateRange",value:function(){var t=ag.getInstance(this.kId).getTimeline(this.getDataSourceName()),e=[t.getFirstIndex()],n=[{}],o=[{}];this.calcRange(e,t.getLastIndex(),n,o),this._minValue=n[0].min,this._maxValue=n[0].max,this._minValueIndex=o[0].minIndex,this._maxValueIndex=o[0].maxIndex}}]),e}();function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function He(t,e){return!e||"object"!==Ve(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ue=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),He(this,Ye(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xe(t,e)}(e,Fe),function(t,e,n){e&&Be(t.prototype,e),n&&Be(t,n)}(e,[{key:"getIndicators",value:function(){return this._indicators}},{key:"setIndicator",value:function(t){Array.isArray(t)||(t=[t]),this._indicators=t,this.refresh()}},{key:"refresh",value:function(){var t=ag.getInstance(this.kId).getDataSource(this.getDataSourceName());t.getDataCount()<1||this._indicators.forEach(function(e){var n,o=t.getDataCount();for(e.clear(),e.reserve(o),n=0;n<o;n++)e.execute(t,n)})}},{key:"updateData",value:function(){var t=this,e=ag.getInstance(this.kId).getDataSource(this.getDataSourceName());e.getDataCount()<1||this._indicators.forEach(function(n){switch(e.getUpdateMode()){case _t:t.refresh();break;case Ot:var o;n.reserve(e.getAppendedCount());var r=e.getDataCount();for(o=r-e.getAppendedCount();o<r;o++)n.execute(e,o);break;case wt:var i,a=e.getDataCount();for(i=a-(e.getUpdatedCount()+e.getAppendedCount());i<a;i++)n.execute(e,i)}})}},{key:"getMinMaxAt",value:function(t,e){e.min=Number.MAX_VALUE,e.max=-Number.MAX_VALUE,this._indicators.forEach(function(n){var o,r,i=!1,a=n.getOutputCount();for(r=0;r<a;r++)o=n.getOutputAt(r).execute(t),!1===Number.isNaN(o)&&(i=!0,e.min>o&&(e.min=o),e.max<o&&(e.max=o));return i})}}]),e}();function We(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ze(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ge={line:6e4,m:6e4,h:36e5,d:864e5,w:6048e5,M:26784e5,y:31536e6},qe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&ze(t.prototype,e),n&&ze(t,n)}(t,null,[{key:"fromFloat",value:function(t,e){return t.toFixed(e)}},{key:"formatTime",value:function(t){return t<10?"0".concat(t.toString()):t.toString()}},{key:"isInstance",value:function(t,e){return null!==t&&void 0!==t&&t instanceof e}},{key:"getPeriodMillisecond",value:function(t){return Ge[t]?Ge[t]:parseInt(t.replace(/\D/g,""),10)*Ge[t.replace(/\d/g,"")]}},{key:"getMousePosition",value:function(t){var e=t.target.getBoundingClientRect();if(k.isMobile){var n=t.touches,o=void 0===n?[]:n;if(0===o.length)return;var r=We(o,2),i=r[0],a=r[1];return 2===o.length?{x:(i.pageX+a.pageX)/2-e.left,y:(i.pageY+a.pageY)/2-e.top}:{x:i.pageX-e.left,y:i.pageY-e.top}}return{x:t.clientX-e.left,y:t.clientY-e.top}}},{key:"getPositionDistance",value:function(t,e,n,o){var r=Math.pow(Math.abs(t-n),2),i=Math.pow(Math.abs(e-o),2);return Math.sqrt(r+i)}}]),t}();function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $e(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tn=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=$e(this,Qe(e).call(this,t,n)))._candlestickDS=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(e,Fe),function(t,e,n){e&&Ke(t.prototype,e),n&&Ke(t,n)}(e,[{key:"updateData",value:function(){var t=ag.getInstance(this.kId).getDataSource(this.getDataSourceName());qe.isInstance(t,Ae)&&(this._candlestickDS=t)}},{key:"getMinMaxAt",value:function(t,e){var n=this._candlestickDS.getDataAt(t);return n&&(e.min=n.low,e.max=n.high),!0}}]),e}();function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function on(t,e){return!e||"object"!==en(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cn=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=on(this,rn(e).call(this,t))).kId=o.kId,n.kConfig=o.kConfig,n.kState=o.kState,n.kSettings=o.kSettings,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(e,tt),function(t,e,n){e&&nn(t.prototype,e),n&&nn(t,n)}(e,null,[{key:"drawLine",value:function(t,e,n,o,r){t.beginPath(),t.moveTo(.5+(e<<0),.5+(n<<0)),t.lineTo(.5+(o<<0),.5+(r<<0)),t.stroke()}},{key:"drawLines",value:function(t,n){var o,r=n.length;for(t.beginPath(),t.moveTo(n[0].x,n[0].y),o=1;o<r;o++)t.lineTo(n[o].x,n[o].y);if(e.isChrome)for(t.moveTo(n[0].x,n[0].y),o=1;o<r;o++)t.lineTo(n[o].x,n[o].y);t.stroke()}},{key:"drawDashedLine",value:function(t,e,n,o,r,i,a){i<2&&(i=2);var c=o-e,u=r-n;t.beginPath();for(var s=Math.sqrt(c*c+u*u)/i+.5<<0,l=(c/=s)*a/i,f=(u/=s)*a/i,h=0;h<s;h++)t.moveTo(e+.5,n+.5),t.lineTo(e+.5+l,n+.5+f),e+=c,n+=u;t.stroke()}},{key:"createHorzDashedLine",value:function(t,e,n,o,r,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;r<2&&(r=2);for(var c=(n-e)/r+.5<<0,u=0;u<c;u++)t.rect(e,o,i,a),e+=r}},{key:"createRectangles",value:function(t,e){var n,o;t.beginPath();var r=e.length;for(o=0;o<r;o++)n=e[o],t.rect(n.x,n.y,n.w,n.h)}},{key:"createPolygon",value:function(t,e){var n;t.beginPath(),t.moveTo(e[0].x+.5,e[0].y+.5);var o=e.length;for(n=1;n<o;n++)t.lineTo(e[n].x+.5,e[n].y+.5);t.closePath()}},{key:"drawString",value:function(t,e,n){var o=t.measureText(e).width;return!(n.w<o)&&(t.fillText(e,n.x,n.y),n.x+=o,n.w-=o,!0)}}]),e}();function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ln(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(cn,"isChrome",null!==navigator.userAgent.toLowerCase().match(/chrome/));var pn=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ln(this,fn(e).call(this,t,n)))._color="Background",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(e,cn),function(t,e,n){e&&sn(t.prototype,e),n&&sn(t,n)}(e,[{key:"getColor",value:function(){return this._color}},{key:"setColor",value:function(t){this._color=t}},{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getArea(this.getAreaName()),o=e.getTheme(this.getFrameName());t.fillStyle=o[this._color],t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}]),e}();function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function dn(t,e){return!e||"object"!==yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gn(t){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mn(t,e){return(mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vn=function(t){function e(t,n){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=dn(this,gn(e).call(this,t))).kId=r.kId,o.toolObject=n;var i=ag.getInstance(o.kId).getArea("f0.k0.main");return null===i?(o.areaPos={left:0,top:0,right:0,bottom:0},dn(o)):(o.areaPos={left:i.getLeft(),top:i.getTop(),right:i.getRight(),bottom:i.getBottom()},o.crossPt={},o.normalSize=4,o.selectedSize=6,o.cursorLen=4,o.cursorGapLen=3,o.theme=ag.getInstance(o.kId).getTheme(o.getFrameName()),o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mn(t,e)}(e,tt),function(t,e,n){e&&bn(t.prototype,e),n&&bn(t,n)}(e,[{key:"drawCursor",value:function(t){this.drawCrossCursor(t)}},{key:"drawCrossCursor",value:function(t){t.strokeStyle=this.theme.LineColorNormal,t.fillStyle=this.theme.LineColorNormal;var e=this.toolObject.getPoint(0).getPosXY();if(null!==e){var n=e.x,o=e.y,r=this.cursorLen,i=this.cursorGapLen;t.fillRect(n,o,1,1),cn.drawLine(t,n-r-i,o,n-i,o),cn.drawLine(t,n+r+i,o,n+i,o),cn.drawLine(t,n,o-r-i,n,o-i),cn.drawLine(t,n,o+r+i,n,o+i)}}},{key:"drawCircle",value:function(t,e,n){var o=e.x,r=e.y;t.beginPath(),t.arc(o,r,n,0,2*Math.PI,!1),t.fillStyle=this.theme.CircleColorFill,t.fill(),t.stroke()}},{key:"drawCtrlPt",value:function(t){t.strokeStyle=this.theme.CircleColorStroke;for(var e=0;e<this.ctrlPtsNum;e++)this.drawCircle(t,this.ctrlPts[1][e],this.normalSize)}},{key:"highlightCtrlPt",value:function(t){t.strokeStyle=this.theme.CircleColorStroke;for(var e=0;e<this.ctrlPtsNum;e++)this.toolObject.getPoint(e).getState()===dt.Highlight&&this.drawCircle(t,this.ctrlPts[1][e],this.selectedSize)}},{key:"drawFibRayLines",value:function(t,e,n){for(var o=0;o<this.fiboFansSequence.length;o++){var r=e.y+(100-this.fiboFansSequence[o])/100*(n.y-e.y),i={x:e.x,y:e.y},a={x:n.x,y:r};this.drawRayLines(t,i,a)}}},{key:"drawRayLines",value:function(t,e,n){this.getAreaPos();var o,r={x:e.x,y:e.y},i={x:n.x,y:n.y},a=this.getRectCrossPt(this.areaPos,r,i);o=n.x===e.x?n.y===e.y?n:n.y>e.y?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y}:n.x>e.x?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y},cn.drawLine(t,e.x,e.y,o.x,o.y)}},{key:"lenBetweenPts",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"getCtrlPts",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[0][t]=this.toolObject.getPoint(t)}},{key:"updateCtrlPtPos",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[1][t]=this.ctrlPts[0][t].getPosXY()}},{key:"getAreaPos",value:function(){var t=ag.getInstance(this.kId).getArea("f0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"updateDraw",value:function(t){t.strokeStyle=this.theme.LineColorNormal,this.draw(t),this.drawCtrlPt(t)}},{key:"finishDraw",value:function(t){t.strokeStyle=this.theme.LineColorNormal,this.draw(t)}},{key:"highlight",value:function(t){t.strokeStyle=this.theme.LineColorSelected,this.draw(t),this.drawCtrlPt(t),this.highlightCtrlPt(t)}}]),e}();function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function On(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pn(t,e){return(Pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kn=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=On(this,Sn(e).call(this,t,n,o))).ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pn(t,e)}(e,vn),function(t,e,n){e&&wn(t.prototype,e),n&&wn(t,n)}(e,[{key:"drawLinesAndInfo",value:function(t,e,n){var o,r=ag.getInstance(this.kId),i=r.getDataSource(this.getDataSourceName()).getDecimalDigits(),a=r.getTheme(this.getFrameName());t.font=a.DefaultFont,t.textAlign="left",t.fillStyle=this.theme.LineColorNormal,this.toolObject.state===gt.Draw&&(this.startPtValue=this.toolObject.getPoint(0).getPosIV().v,this.endPtValue=this.toolObject.getPoint(1).getPosIV().v),this.getAreaPos();for(var c=0;c<this.fiboSequence.length;c++){var u=e.y+(100-this.fiboSequence[c])/100*(n.y-e.y);if(!(u>this.areaPos.bottom)){var s=this.startPtValue+(100-this.fiboSequence[c])/100*(this.endPtValue-this.startPtValue);o="".concat(this.fiboSequence[c].toFixed(1),"% ").concat(s.toFixed(i));var l=t.measureText(o).width;t.textBaseline="middle",t.fillText(o,this.areaPos.left,u),cn.drawLine(t,this.areaPos.left+l+2,u,this.areaPos.right,u)}}}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cn(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tn(t){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cn(this,Tn(e).call(this,t))).kId=o.kId,n.flag=!0,n.context=ag.getInstance(n.kId)._overlayContext,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(e,tt),function(t,e,n){e&&xn(t.prototype,e),n&&xn(t,n)}(e,[{key:"getAreaPos",value:function(){var t=ag.getInstance(this.kId).getArea("f0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"Draw",value:function(){this.getAreaPos();var t=ag.getInstance(this.kId).getDataSource(this.getDataSourceName());if(null!==t&&qe.isInstance(t,Ae)){this.context.save(),this.context.rect(this.areaPos.left,this.areaPos.top,this.areaPos.right-this.areaPos.left,this.areaPos.bottom-this.areaPos.top),this.context.clip();for(var e=t.getToolObjectCount(),n=0;n<e;n++){var o=t.getToolObject(n);switch(o.getState()){case gt.BeforeDraw:o.getPlotter().theme=ag.getInstance(this.kId).getTheme(this.getFrameName()),o.getPlotter().drawCursor(this.context);break;case gt.Draw:o.getPlotter().theme=ag.getInstance(this.kId).getTheme(this.getFrameName()),o.getPlotter().updateDraw(this.context);break;case gt.AfterDraw:o.getPlotter().theme=ag.getInstance(this.kId).getTheme(this.getFrameName()),o.getPlotter().finishDraw(this.context)}}var r=t.getSelectToolObjcet();null!==r&&r!==gt.Draw&&r.getPlotter().highlight(this.context),this.context.restore()}}}]),e}();function An(t){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Dn(t,e){return!e||"object"!==An(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ln=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dn(this,Rn(e).call(this,t))).kId=o.kId,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,tt),function(t,e,n){e&&Mn(t.prototype,e),n&&Mn(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getArea(this.getAreaName()),o=e.getTimeline(this.getDataSourceName()),r=e.getRange(this.getAreaName()),i=!1;if(!n.isChanged()&&!o.isUpdated()&&!r.isUpdated()){var a=o.getFirstIndex(),c=o.getLastIndex(),u=Math.max(a,c-2),s=o.toColumnLeft(u);t.save(),t.rect(s,n.getTop(),n.getRight()-s,n.getHeight()),t.clip(),i=!0}var l=e.getTheme(this.getFrameName());t.fillStyle=l.Grid4,t.beginPath();var f=4,h=1;cn.isChrome&&(f=4,h=1);var p=r.getGradations();for(var y in p)cn.createHorzDashedLine(t,n.getLeft(),n.getRight(),r.toY(p[y]),f,h);t.fill(),i&&t.restore()}}]),e}();function Fn(t){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bn(t,e){return!e||"object"!==Fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yn(t,e){return(Yn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xn=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bn(this,Hn(e).call(this,t))).kId=o.kId,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yn(t,e)}(e,tt),function(t,e,n){e&&Vn(t.prototype,e),n&&Vn(t,n)}(e,[{key:"Draw",value:function(t){return this._Draw_(t)}},{key:"_Draw_",value:function(t){if(!1!==this.Update()&&!1!==this.updateData()){this.m_top=this.m_pArea.getTop(),this.m_bottom=this.m_pArea.getBottom(),this.m_left=this.m_pArea.getLeft(),this.m_right=this.m_pArea.getRight(),t.save(),t.rect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top),t.clip();var e=ag.getInstance(this.kId).getChart()._depthData;this.x_offset=0,this.y_offset=0;var n={},o={};n.x=this.m_left+e.array[this.m_ask_si].amounts*this.m_Step,n.y=this.m_pRange.toY(e.array[this.m_ask_si].rate),o.x=this.m_left+e.array[this.m_bid_si].amounts*this.m_Step,o.y=this.m_pRange.toY(e.array[this.m_bid_si].rate),Math.abs(n.y-o.y)<1&&(this.y_offset=1),this.x_offset=1,this.DrawBackground(t),this.UpdatePoints(),this.FillBlack(t),this.DrawGradations(t),this.DrawLine(t),t.restore()}}},{key:"DrawBackground",value:function(t){t.fillStyle=this.m_pTheme.Background,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top);var e=ag.getInstance(this.kId).getChart()._depthData;if(0===this.m_mode){var n=this.m_pRange.toY(e.array[this.m_ask_si].rate)-this.y_offset,o=this.m_pRange.toY(e.array[this.m_bid_si].rate)+this.y_offset,r=t.createLinearGradient(this.m_left,0,this.m_right,0);r.addColorStop(0,this.m_pTheme.Background),r.addColorStop(1,this.m_pTheme.PositiveDark),t.fillStyle=r,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,n-this.m_top);var i=t.createLinearGradient(this.m_left,0,this.m_right,0);i.addColorStop(0,this.m_pTheme.Background),i.addColorStop(1,this.m_pTheme.NegativeDark),t.fillStyle=i,t.fillRect(this.m_left,o,this.m_right-this.m_left,this.m_bottom-o)}else if(1===this.m_mode){var a=t.createLinearGradient(this.m_left,0,this.m_right,0);a.addColorStop(0,this.m_pTheme.Background),a.addColorStop(1,this.m_pTheme.PositiveDark),t.fillStyle=a,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}else if(2===this.m_mode){var c=t.createLinearGradient(this.m_left,0,this.m_right,0);c.addColorStop(0,this.m_pTheme.Background),c.addColorStop(1,this.m_pTheme.NegativeDark),t.fillStyle=c,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}}},{key:"DrawLine",value:function(t){if(0===this.m_mode||1===this.m_mode){t.strokeStyle=this.m_pTheme.Negative,t.beginPath(),t.moveTo(Math.floor(this.m_ask_points[0].x)+.5,Math.floor(this.m_ask_points[0].y)+.5);for(var e=1;e<this.m_ask_points.length;e++)t.lineTo(Math.floor(this.m_ask_points[e].x)+.5,Math.floor(this.m_ask_points[e].y)+.5);t.stroke()}if(0===this.m_mode||2===this.m_mode){t.strokeStyle=this.m_pTheme.Positive,t.beginPath(),t.moveTo(this.m_bid_points[0].x+.5,this.m_bid_points[0].y+.5);for(var n=1;n<this.m_bid_points.length;n++)t.lineTo(this.m_bid_points[n].x+.5,this.m_bid_points[n].y+.5);t.stroke()}}},{key:"UpdatePoints",value:function(){var t=ag.getInstance(this.kId).getChart()._depthData;this.m_ask_points=[];for(var e=this.m_ask_si;e>=this.m_ask_ei;e--){var n={},o={},r=this.m_ask_points.length;n.x=e==this.m_ask_si?this.m_left:this.m_ask_points[r-1].x,n.y=Math.floor(this.m_pRange.toY(t.array[e].rate)-this.y_offset),o.x=Math.floor(this.m_left+t.array[e].amounts*this.m_Step+this.x_offset),o.y=n.y,this.m_ask_points.push(n),this.m_ask_points.push(o)}var i={},a=this.m_ask_points.length;i.x=this.m_ask_points[a-1].x,i.y=this.m_top,this.m_ask_points.push(i),this.m_bid_points=[];for(var c=this.m_bid_si;c<=this.m_bid_ei;c++){var u={},s={},l=this.m_bid_points.length;u.x=c==this.m_bid_si?this.m_left:this.m_bid_points[l-1].x,u.y=Math.ceil(this.m_pRange.toY(t.array[c].rate)+this.y_offset),s.x=Math.floor(this.m_left+t.array[c].amounts*this.m_Step+this.x_offset),s.y=u.y,this.m_bid_points.push(u),this.m_bid_points.push(s)}var f={},h=this.m_bid_points.length;f.x=this.m_bid_points[h-1].x,f.y=this.m_bottom,this.m_bid_points.push(f)}},{key:"updateData",value:function(){var t=ag.getInstance(this.kId).getChart()._depthData;if(null===t.array)return!1;if(t.array.length<=50)return!1;var e=this.m_pRange.getOuterMinValue(),n=this.m_pRange.getOuterMaxValue();this.m_ask_si=t.asks_si,this.m_ask_ei=t.asks_si;for(var o=t.asks_si;o>=t.asks_ei&&t.array[o].rate<n;o--)this.m_ask_ei=o;this.m_bid_si=t.bids_si,this.m_bid_ei=t.bids_si;for(var r=t.bids_si;r<=t.bids_ei&&t.array[r].rate>e;r++)this.m_bid_ei=r;return this.m_ask_ei===this.m_ask_si?this.m_mode=2:this.m_bid_ei===this.m_bid_si?this.m_mode=1:this.m_mode=0,this.m_Step=this.m_pArea.getWidth(),0===this.m_mode?this.m_ask_ei===t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=Math.min(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts):this.m_ask_ei!==t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=t.array[this.m_bid_ei].amounts:this.m_ask_ei===t.asks_ei&&this.m_bid_ei!==t.bids_ei?this.m_Step/=t.array[this.m_ask_ei].amounts:this.m_ask_ei!==t.asks_ei&&this.m_bid_ei!==t.bids_ei&&(this.m_Step/=Math.max(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts)):1===this.m_mode?this.m_Step/=t.array[this.m_ask_ei].amounts:2===this.m_mode&&(this.m_Step/=t.array[this.m_bid_ei].amounts),!0}},{key:"Update",value:function(){var t=ag.getInstance(this.kId),e=this.getAreaName();if(this.m_pArea=t.getArea(e),null===this.m_pArea)return!1;var n=e.substring(0,e.lastIndexOf("Range"));return this.m_pRange=t.getRange(n),null!==this.m_pRange&&0!==this.m_pRange.getRange()&&(this.m_pTheme=t.getTheme(this.getFrameName()),null!==this.m_pTheme)}},{key:"DrawGradations",value:function(t){var e=ag.getInstance(this.kId),n=this.getAreaName(),o=e.getArea(n),r=n.substring(0,n.lastIndexOf("Range")),i=e.getRange(r);if(0!==i.getRange()){var a=i.getGradations();if(0!==a.length){var c=o.getLeft(),u=o.getRight(),s=[];for(var l in a){var f=i.toY(a[l]);s.push({x:c,y:f,w:6,h:1}),s.push({x:u-6,y:f,w:6,h:1})}if(s.length>0){var h=e.getTheme(this.getFrameName());t.fillStyle=h.Grid1,cn.createRectangles(t,s),t.fill()}}}}},{key:"FillBlack",value:function(t){var e=this.m_ask_points,n=this.m_bid_points,o={},r={};o.x=this.m_right,o.y=e[0].y,r.x=this.m_right,r.y=e[e.length-1].y;var i={},a={};i.x=this.m_right,i.y=n[0].y-1,a.x=this.m_right,a.y=n[n.length-1].y,e.unshift(o),e.push(r),n.unshift(i),n.push(a),t.fillStyle=this.m_pTheme.Background,t.beginPath(),t.moveTo(Math.floor(e[0].x)+.5,Math.floor(e[0].y)+.5);for(var c=1;c<e.length;c++)t.lineTo(Math.floor(e[c].x)+.5,Math.floor(e[c].y)+.5);t.fill(),t.beginPath(),t.moveTo(Math.floor(n[0].x)+.5,Math.floor(n[0].y)+.5);for(var u=1;u<n.length;u++)t.lineTo(Math.floor(n[u].x)+.5,Math.floor(n[u].y)+.5);t.fill(),e.shift(),e.pop(),n.shift(),n.pop()}}]),e}();function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zn(t,e){return!e||"object"!==Un(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qn(t,e){return(qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zn(this,Gn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qn(t,e)}(e,cn),function(t,e,n){e&&Wn(t.prototype,e),n&&Wn(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getDataSource(this.getDataSourceName());if(qe.isInstance(n,Ae)&&!(n.getDataCount()<1)){var o,r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),a=e.getRange(this.getAreaName()),c=e.getTheme(this.getFrameName()),u="dark"===c.getName(),s=i.getFirstIndex(),l=i.getLastIndex();o=r.isChanged()||i.isUpdated()||a.isUpdated()?s:Math.max(s,l-2);for(var f=i.getColumnWidth(),h=i.getItemWidth(),p=i.toItemLeft(o),y=i.toItemCenter(o),b=[],d=[],g=[],m=[],v=o;v<l;v++){var _=n.getDataAt(v),w=a.toY(_.high),O=a.toY(_.low),S=_.open;v>0&&(S=n.getDataAt(v-1).close);var P=_.close;if(P>S){var k=a.toY(P),j=a.toY(S),x=Math.max(j-k,1);x>1&&h>1&&u?b.push({x:p+.5,y:k+.5,w:h-1,h:x-1}):d.push({x:p,y:k,w:Math.max(h,1),h:Math.max(x,1)}),_.high>P&&(w=Math.min(w,k-1),d.push({x:y,y:w,w:1,h:k-w})),S>_.low&&(O=Math.max(O,j+1),d.push({x:y,y:j,w:1,h:O-j}))}else if(P===S){var C=a.toY(P);g.push({x:p,y:C,w:Math.max(h,1),h:1}),_.high>P&&(w=Math.min(w,C-1)),S>_.low&&(O=Math.max(O,C+1)),w<O&&g.push({x:y,y:w,w:1,h:O-w})}else{var T=a.toY(S),I=a.toY(P),E=Math.max(I-T,1);m.push({x:p,y:T,w:Math.max(h,1),h:Math.max(E,1)}),_.high>S&&(w=Math.min(w,T-1)),P>_.low&&(O=Math.max(O,I+1)),w<O&&m.push({x:y,y:w,w:1,h:O-w})}p+=f,y+=f}b.length>0&&(t.strokeStyle=c.Positive,cn.createRectangles(t,b),t.stroke()),d.length>0&&(t.fillStyle=c.Positive,cn.createRectangles(t,d),t.fill()),g.length>0&&(t.fillStyle=c.Negative,cn.createRectangles(t,g),t.fill()),m.length>0&&(t.fillStyle=c.Negative,cn.createRectangles(t,m),t.fill())}}}]),e}();function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qn(t,e){return!e||"object"!==Kn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zn(t){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function to(t,e){return(to=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var eo=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qn(this,Zn(e).call(this,t))).kId=o.kId,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&to(t,e)}(e,tt),function(t,e,n){e&&$n(t.prototype,e),n&&$n(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var o,r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),a=e.getRange(this.getAreaName()),c=e.getTheme(this.getFrameName()),u="dark"===c.getName(),s=i.getFirstIndex(),l=i.getLastIndex();o=r.isChanged()||i.isUpdated()||a.isUpdated()?s:Math.max(s,l-2);for(var f=i.getColumnWidth(),h=i.getItemWidth(),p=i.toItemLeft(o),y=i.toItemCenter(o),b=[],d=[],g=[],m=[],v=[],_=o;_<l;_++){var w=n.getDataAt(_),O=a.toY(w.high),S=a.toY(w.low),P=w.open,k=w.close;if(k>P){var j=a.toY(k),x=a.toY(P),C=Math.max(x-j,1);C>1&&h>1&&u?b.push({x:p+.5,y:j+.5,w:h-1,h:C-1}):d.push({x:p,y:j,w:Math.max(h,1),h:Math.max(C,1)}),w.high>k&&(O=Math.min(O,j-1),g.push({x:y,y:O,w:1,h:j-O})),P>w.low&&(S=Math.max(S,x+1),g.push({x:y,y:x,w:1,h:S-x}))}else if(k===P){var T=a.toY(k);m.push({x:p,y:T,w:Math.max(h,1),h:1}),w.high>k&&(O=Math.min(O,T-1)),P>w.low&&(S=Math.max(S,T+1)),O<S&&m.push({x:y,y:O,w:1,h:S-O})}else{var I=a.toY(P),E=a.toY(k),A=Math.max(E-I,1);v.push({x:p,y:I,w:Math.max(h,1),h:Math.max(A,1)}),w.high>P&&(O=Math.min(O,I-1)),k>w.low&&(S=Math.max(S,E+1)),O<S&&v.push({x:y,y:O,w:1,h:S-O})}p+=f,y+=f}b.length>0&&(t.strokeStyle=c.Positive,cn.createRectangles(t,b),t.stroke()),d.length>0&&(t.fillStyle=c.Positive,cn.createRectangles(t,d),t.fill()),g.length>0&&(t.strokeStyle=c.Positive,t.beginPath(),g.forEach(function(e){var n=e.x,o=e.y,r=e.h;t.moveTo(n+.5,o),t.lineTo(n+.5,o+r)}),t.stroke(),t.closePath()),m.length>0&&(t.fillStyle=c.Negative,cn.createRectangles(t,m),t.fill()),v.length>0&&(t.fillStyle=c.Negative,cn.createRectangles(t,v),t.fill())}}}]),e}();function no(t){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ro(t,e){return!e||"object"!==no(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ao(t,e){return(ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var co=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ro(this,io(e).call(this,t,n,o))).arrowSizeRatio=.03,r.arrowSize=4,r.crossPt={x:-1,y:-1},r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ao(t,e)}(e,vn),function(t,e,n){e&&oo(t.prototype,e),n&&oo(t,n)}(e,[{key:"drawArrow",value:function(t,e,n){var o=this.lenBetweenPts(e,n),r=[n.x-e.x,n.y-e.y];this.crossPt.x=e.x+(1-this.arrowSize/o)*r[0],this.crossPt.y=e.y+(1-this.arrowSize/o)*r[1];var i=[-r[1],r[0]],a={x:i[0],y:i[1]},c={x:0,y:0};i[0]=this.arrowSize*a.x/this.lenBetweenPts(a,c),i[1]=this.arrowSize*a.y/this.lenBetweenPts(a,c);var u=[this.crossPt.x+i[0],this.crossPt.y+i[1]];cn.drawLine(t,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-i[0],this.crossPt.y-i[1]],cn.drawLine(t,n.x,n.y,u[0],u[1])}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),cn.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.drawArrow(t,this.startPoint,this.endPoint)}}]),e}();function uo(t){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function so(t,e){return!e||"object"!==uo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lo(t){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ho=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=so(this,lo(e).call(this,t,n,o))).toolObject=n,r.fiboSequence=[0,12.5,25,37.5,50,62.5,75,87.5,100],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(e,kn),e}();function po(t){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bo(t,e){return!e||"object"!==po(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mo(t,e){return(mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bo(this,go(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mo(t,e)}(e,vn),function(t,e,n){e&&yo(t.prototype,e),n&&yo(t,n)}(e,[{key:"getParaPt",value:function(){var t=[];t[0]=this.endPoint.x-this.startPoint.x,t[1]=this.endPoint.y-this.startPoint.y;var e=[];e[0]=this.paraStartPoint.x-this.startPoint.x,e[1]=this.paraStartPoint.y-this.startPoint.y,this.paraEndPoint={x:-1,y:-1},this.paraEndPoint.x=t[0]+e[0]+this.startPoint.x,this.paraEndPoint.y=t[1]+e[1]+this.startPoint.y}}]),e}();function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Oo(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function So(t){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Po(t,e){return(Po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ko=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Oo(this,So(e).call(this,t,n,o))).ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Po(t,e)}(e,vo),function(t,e,n){e&&wo(t.prototype,e),n&&wo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.getParaPt(),this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),cn.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.paraEndPoint),cn.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y)}}]),e}();function jo(t){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Co(t,e){return!e||"object"!==jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function To(t){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Io(t,e){return(Io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Eo=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Co(this,To(e).call(this,t,n,o))).ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Io(t,e)}(e,vo),function(t,e,n){e&&xo(t.prototype,e),n&&xo(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.getParaPt(),this.drawRayLines(t,this.startPoint,this.endPoint),this.drawRayLines(t,this.paraStartPoint,this.paraEndPoint)}}]),e}();function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Do(t,e){return!e||"object"!==Ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ro(t){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function No(t,e){return(No=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lo=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Do(this,Ro(e).call(this,t,n,o))).fiboFansSequence=[0,38.2,50,61.8],r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&No(t,e)}(e,vn),function(t,e,n){e&&Mo(t.prototype,e),n&&Mo(t,n)}(e,[{key:"drawLinesAndInfo",value:function(t,e,n){this.drawFibRayLines(t,e,n)}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}();function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vo(t,e){return!e||"object"!==Fo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bo(t){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ho(t,e){return(Ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yo=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Vo(this,Bo(e).call(this,t,n,o))).fiboSequence=bt,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ho(t,e)}(e,kn),e}();function Xo(t){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uo(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wo(t,e){return!e||"object"!==Xo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zo(t){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Go(t,e){return(Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qo=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Wo(this,zo(e).call(this,t,n,o))).ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Go(t,e)}(e,vn),function(t,e,n){e&&Uo(t.prototype,e),n&&Uo(t,n)}(e,[{key:"draw",value:function(t){if(this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x)cn.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y);else{var e={x:this.endPoint.x,y:this.startPoint.y};this.drawRayLines(t,this.startPoint,e)}}}]),e}();function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ko(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $o(t,e){return!e||"object"!==Jo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qo(t){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zo(t,e){return(Zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tr=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$o(this,Qo(e).call(this,t,n,o))).ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zo(t,e)}(e,vn),function(t,e,n){e&&Ko(t.prototype,e),n&&Ko(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.endPoint.y=this.startPoint.y,this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?cn.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x+1,this.startPoint.y):cn.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.startPoint.y)}}]),e}();function er(t){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function or(t,e){return!e||"object"!==er(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ir(t,e){return(ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ar=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=or(this,rr(e).call(this,t,n,o))).ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ir(t,e)}(e,vn),function(t,e,n){e&&nr(t.prototype,e),n&&nr(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],cn.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y)}}]),e}();function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sr(t,e){return!e||"object"!==cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fr(t,e){return(fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hr=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=sr(this,lr(e).call(this,t,n,o))).ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fr(t,e)}(e,vn),function(t,e,n){e&&ur(t.prototype,e),n&&ur(t,n)}(e,[{key:"draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getDataSource(this.getDataSourceName()).getDecimalDigits(),o=e.getTheme(this.getFrameName());t.font=o.DefaultFont,t.textAlign="left",t.fillStyle=this.theme.LineColorNormal,this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0];var r=this.ctrlPts[0][0].getPosIV().v;cn.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y),t.fillText(r.toFixed(n),this.startPoint.x+2,this.startPoint.y-15)}}]),e}();function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function br(t,e){return!e||"object"!==pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gr(t,e){return(gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mr=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=br(this,dr(e).call(this,t,n,o))).ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gr(t,e)}(e,vn),function(t,e,n){e&&yr(t.prototype,e),n&&yr(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawRayLines(t,this.startPoint,this.endPoint)}}]),e}();function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wr(t,e){return!e||"object"!==vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Or(t){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sr(t,e){return(Sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pr=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wr(this,Or(e).call(this,t,n,o))).ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sr(t,e)}(e,vn),function(t,e,n){e&&_r(t.prototype,e),n&&_r(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),cn.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}}]),e}();function kr(t){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xr(t,e){return!e||"object"!==kr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tr(t,e){return(Tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ir=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=xr(this,Cr(e).call(this,t,n,o))).ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tr(t,e)}(e,vn),function(t,e,n){e&&jr(t.prototype,e),n&&jr(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?cn.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y):(this.crossPt=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),cn.drawLine(t,this.crossPt[0].x,this.crossPt[0].y,this.crossPt[1].x,this.crossPt[1].y))}}]),e}();function Er(t){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ar(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mr(t,e){return!e||"object"!==Er(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rr(t,e){return(Rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nr=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Mr(this,Dr(e).call(this,t,n,o))).ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rr(t,e)}(e,vo),function(t,e,n){e&&Ar(t.prototype,e),n&&Ar(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2];var e=[];e[0]=this.endPoint.x-this.startPoint.x,e[1]=this.endPoint.y-this.startPoint.y;var n=[];n[0]=this.paraStartPoint.x-this.startPoint.x,n[1]=this.paraStartPoint.y-this.startPoint.y,this.para1EndPoint={x:-1,y:-1},this.para2EndPoint={x:-1,y:-1},this.para2StartPoint={x:-1,y:-1},this.para1EndPoint.x=e[0]+n[0]+this.startPoint.x,this.para1EndPoint.y=e[1]+n[1]+this.startPoint.y,this.para2StartPoint.x=this.startPoint.x-n[0],this.para2StartPoint.y=this.startPoint.y-n[1],this.para2EndPoint.x=this.endPoint.x-n[0],this.para2EndPoint.y=this.endPoint.y-n[1],this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),cn.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.para1EndPoint),cn.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y),this.crossPt2=this.getRectCrossPt(this.areaPos,this.para2StartPoint,this.para2EndPoint),cn.drawLine(t,this.crossPt2[0].x,this.crossPt2[0].y,this.crossPt2[1].x,this.crossPt2[1].y)}}]),e}();function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vr(t,e){return!e||"object"!==Lr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return(Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yr=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Vr(this,Br(e).call(this,t,n,o))).ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hr(t,e)}(e,vn),function(t,e,n){e&&Fr(t.prototype,e),n&&Fr(t,n)}(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],cn.drawLine(t,this.startPoint.x,this.areaPos.top,this.startPoint.x,this.areaPos.bottom)}}]),e}();function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wr(t,e){return!e||"object"!==Xr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zr(t){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(t,e){return(Gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wr(this,zr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gr(t,e)}(e,cn),function(t,e,n){e&&Ur(t.prototype,e),n&&Ur(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=this.kConfig,o=e.getArea(this.getAreaName()),r=e.getArea(this.getFrameName()),i=e.getTimeline(this.getDataSourceName()),a=e.getDataProvider("".concat(this.getAreaName(),".secondary")),c=e.getTheme(this.getFrameName());t.font=c.DefaultFont,t.textAlign="left",t.textBaseline="top",t.fillStyle=c.Text4;var u={x:o.getLeft()+4,y:o.getTop()+2,w:r.getWidth()-8,h:20};a.getIndicators().forEach(function(e){var o;switch(e.getParameterCount()){case 0:o=e.getName();break;case 1:o="".concat(e.getName(),"(").concat(e.getParameterAt(0).getValue(),")");break;case 2:o="".concat(e.getName(),"(").concat(e.getParameterAt(0).getValue(),",").concat(e.getParameterAt(1).getValue(),")");break;case 3:o="".concat(e.getName(),"(").concat(e.getParameterAt(0).getValue(),",").concat(e.getParameterAt(1).getValue(),",").concat(e.getParameterAt(2).getValue(),")");break;case 4:o="".concat(e.getName(),"(").concat(e.getParameterAt(0).getValue(),",").concat(e.getParameterAt(1).getValue(),",").concat(e.getParameterAt(2).getValue(),",").concat(e.getParameterAt(3).getValue(),")");break;default:return}if(cn.drawString(t,o,u)){var r=i.getSelectedIndex();if(!(r<0)){var a,s,l,f,h,p=e.getOutputCount(),y=n.indicPrecision[e.getName()]||n.indicPrecision.default;for(h=0;h<p;h++)if(s=(a=e.getOutputAt(h)).execute(r),!isNaN(s)&&(l="  ".concat(a.getName(),": ").concat(s.toFixed(y)),void 0===(f=a.getColor())&&(f="Indicator".concat(h)),t.fillStyle=c[f],!cn.drawString(t,l,u)))return}}})}}]),e}();function Jr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Kr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._rid=0}return function(t,e,n){e&&Jr(t.prototype,e),n&&Jr(t,n)}(t,[{key:"execute",value:function(t){}},{key:"reserve",value:function(t,e){}},{key:"clear",value:function(){}}]),t}();function $r(t){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zr(t,e){return!e||"object"!==$r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e){return(ei=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ni=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zr(this,ti(e).call(this)))._exprA=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ei(t,e)}(e,Kr),function(t,e,n){e&&Qr(t.prototype,e),n&&Qr(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear()}}]),e}();function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ii(t,e){return!e||"object"!==oi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ci(t,e){return(ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ui=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ii(this,ai(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(e,ni),function(t,e,n){e&&ri(t.prototype,e),n&&ri(t,n)}(e,[{key:"execute",value:function(t){return Math.abs(this._exprA.execute(t))}}]),e}();function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fi(t,e){return!e||"object"!==si(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yi=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=fi(this,hi(e).call(this)))._exprA=t,o._exprB=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,Kr),function(t,e,n){e&&li(t.prototype,e),n&&li(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear()}}]),e}();function bi(t){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gi(t,e){return!e||"object"!==bi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vi(t,e){return(vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _i=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gi(this,mi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vi(t,e)}(e,yi),function(t,e,n){e&&di(t.prototype,e),n&&di(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)+this._exprB.execute(t)}}]),e}();function wi(t){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Si(t,e){return!e||"object"!==wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pi(t){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t,e){return(ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ji=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Si(this,Pi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ki(t,e)}(e,yi),function(t,e,n){e&&Oi(t.prototype,e),n&&Oi(t,n)}(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)&&0!==this._exprB.execute(t)?1:0}}]),e}();function xi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ci(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ti=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ci(this,"_ds",null),Ci(this,"_firstIndex",null)}return function(t,e,n){e&&xi(t.prototype,e),n&&xi(t,n)}(t,[{key:"getDataSource",value:function(){return this._ds}},{key:"setDataSource",value:function(t){return this._ds=t}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"setFirstIndex",value:function(t){return this._firstIndex=t}}],[{key:"get",value:function(){return this.inst}},{key:"set",value:function(t){this.inst=t}}]),t}();function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ai(t,e){return!e||"object"!==Ii(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mi(t,e,n){return(Mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Di(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Di(t){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ri(t,e){return(Ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ci(Ti,"inst",null);var Ni=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Ai(this,Di(e).call(this,n)))._name=t,o._buf=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ri(t,e)}(e,ni),function(t,e,n){e&&Ei(t.prototype,e),n&&Ei(t,n)}(e,[{key:"getName",value:function(){return this._name}},{key:"execute",value:function(t){return this._buf[t]}},{key:"assign",value:function(t){this._buf[t]=this._exprA.execute(t)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push(NaN);Mi(Di(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){Mi(Di(e.prototype),"clear",this).call(this),this._buf=[]}}]),e}();function Li(t){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fi(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vi(t,e){return!e||"object"!==Li(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bi(t){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hi(t,e){return(Hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Vi(this,Bi(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hi(t,e)}(e,Kr),function(t,e,n){e&&Fi(t.prototype,e),n&&Fi(t,n)}(e,[{key:"execute",value:function(t){return Ti.get()._ds.getDataAt(t).close}}]),e}();function Xi(t){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ui(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wi(t,e){return!e||"object"!==Xi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zi(t){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gi(t,e){return(Gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qi=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wi(this,zi(e).call(this)))._value=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gi(t,e)}(e,Kr),function(t,e,n){e&&Ui(t.prototype,e),n&&Ui(t,n)}(e,[{key:"execute",value:function(){return this._value}}]),e}();function Ji(t){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $i(t,e){return!e||"object"!==Ji(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qi(t,e,n){return(Qi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zi(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t,e){return(ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ea=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=$i(this,Zi(e).call(this,t,n)))._range=-1,o._buf=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ta(t,e)}(e,yi),function(t,e,n){e&&Ki(t.prototype,e),n&&Ki(t,n)}(e,[{key:"getRange",value:function(){return this._range}},{key:"initRange",value:function(){this._range=this._exprB.execute(0)}},{key:"execute",value:function(t){this._range<0&&this.initRange();var e=this._buf[t].resultA=this._exprA.execute(t);return this._buf[t].result=this.calcResult(t,e)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push({resultA:NaN,result:NaN});Qi(Zi(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){Qi(Zi(e.prototype),"clear",this).call(this),this._range=-1,this._buf=[]}}]),e}();function na(t){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ra(t,e){return!e||"object"!==na(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ia(t){return(ia=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aa(t,e){return(aa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ca=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ra(this,ia(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aa(t,e)}(e,ea),function(t,e,n){e&&oa(t.prototype,e),n&&oa(t,n)}(e,[{key:"calcResult",value:function(t){if(0===this._range)return NaN;var e=Ti.get()._firstIndex;if(e<0)return 0;if(t>=e){var n=this._range-1;n>t-e&&(n=t-e);for(var o=0;n>=0;n--)0!==this._buf[t-n].resultA&&o++;return o}return 0}}]),e}();function ua(t){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function la(t,e){return!e||"object"!==ua(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fa(t){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ha(t,e){return(ha=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),la(this,fa(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ha(t,e)}(e,yi),function(t,e,n){e&&sa(t.prototype,e),n&&sa(t,n)}(e,[{key:"execute",value:function(t){var e=this._exprA.execute(t),n=this._exprB.execute(t);return 0===e?e:0===n?e>0?1e6:-1e6:e/n}}]),e}();function ya(t){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ba(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function da(t,e){return!e||"object"!==ya(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ga(t,e,n){return(ga="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ma(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ma(t){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function va(t,e){return(va=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),da(this,ma(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&va(t,e)}(e,ea),function(t,e,n){e&&ba(t.prototype,e),n&&ba(t,n)}(e,[{key:"initRange",value:function(){ga(ma(e.prototype),"initRange",this).call(this),this._alpha=2/(this._range+1)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=Ti.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._buf[t-1];return this._alpha*(e-o.result)+o.result}return e}}]),e}();function wa(t){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sa(t,e){return!e||"object"!==wa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pa(t){return(Pa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ka(t,e){return(ka=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ja=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Sa(this,Pa(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ka(t,e)}(e,yi),function(t,e,n){e&&Oa(t.prototype,e),n&&Oa(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)===this._exprB.execute(t)?1:0}}]),e}();function xa(t){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ca(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ta(t,e){return!e||"object"!==xa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ia(t){return(Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ea(t,e){return(Ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Aa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ta(this,Ia(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ea(t,e)}(e,_a),function(t,e,n){e&&Ca(t.prototype,e),n&&Ca(t,n)}(e,[{key:"calcResult",value:function(t,e){var n=Ti.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range,r=this._buf[t-1];return o>=t+1-n?(o=t+1-n,r.result*(1-1/o)+e/o):this._alpha*(e-r.result)+r.result}return e}}]),e}();function Ma(t){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Da(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ra(t,e){return!e||"object"!==Ma(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Na(t){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function La(t,e){return(La=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fa=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ra(this,Na(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&La(t,e)}(e,yi),function(t,e,n){e&&Da(t.prototype,e),n&&Da(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)>this._exprB.execute(t)?1:0}}]),e}();function Va(t){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ba(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ha(t,e){return!e||"object"!==Va(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xa(t,e){return(Xa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ua=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ha(this,Ya(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xa(t,e)}(e,ea),function(t,e,n){e&&Ba(t.prototype,e),n&&Ba(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=Ti.get()._firstIndex;if(n<0)return e;if(t>n){for(var o=e,r=t-this._range+1,i=Math.max(n,r);i<t;i++){var a=this._buf[i];o<a.resultA&&(o=a.resultA)}return o}return e}}]),e}();function Wa(t){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ga(t,e){return!e||"object"!==Wa(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qa(t){return(qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ja(t,e){return(Ja=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ka=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ga(this,qa(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ja(t,e)}(e,Kr),function(t,e,n){e&&za(t.prototype,e),n&&za(t,n)}(e,[{key:"execute",value:function(t){return Ti.get()._ds.getDataAt(t).high}}]),e}();function $a(t){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Za(t,e){return!e||"object"!==$a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tc(t){return(tc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ec(t,e){return(ec=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nc=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Za(this,tc(e).call(this)))._exprA=t,r._exprB=n,r._exprC=o,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ec(t,e)}(e,Kr),function(t,e,n){e&&Qa(t.prototype,e),n&&Qa(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}]),e}();function oc(t){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ic(t,e){return!e||"object"!==oc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ac(t){return(ac=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cc(t,e){return(cc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ic(this,ac(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cc(t,e)}(e,nc),function(t,e,n){e&&rc(t.prototype,e),n&&rc(t,n)}(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)?this._exprB.execute(t):this._exprC.execute(t)}}]),e}();function sc(t){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fc(t,e){return!e||"object"!==sc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hc(t){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pc(t,e){return(pc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fc(this,hc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pc(t,e)}(e,ea),function(t,e,n){e&&lc(t.prototype,e),n&&lc(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=Ti.get()._firstIndex;if(n<0)return e;if(t>n){for(var o=e,r=t-this._range+1,i=Math.max(n,r);i<t;i++){var a=this._buf[i];o>a.resultA&&(o=a.resultA)}return o}return e}}]),e}();function bc(t){return(bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gc(t,e){return!e||"object"!==bc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mc(t){return(mc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vc(t,e){return(vc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gc(this,mc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vc(t,e)}(e,Kr),function(t,e,n){e&&dc(t.prototype,e),n&&dc(t,n)}(e,[{key:"execute",value:function(t){return Ti.get()._ds.getDataAt(t).low}}]),e}();function wc(t){return(wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sc(t,e){return!e||"object"!==wc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pc(t){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kc(t,e){return(kc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Sc(this,Pc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kc(t,e)}(e,yi),function(t,e,n){e&&Oc(t.prototype,e),n&&Oc(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)<this._exprB.execute(t)?1:0}}]),e}();function xc(t){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tc(t,e){return!e||"object"!==xc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ic(t){return(Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ec(t,e){return(Ec=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ac=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tc(this,Ic(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ec(t,e)}(e,ea),function(t,e,n){e&&Cc(t.prototype,e),n&&Cc(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=Ti.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return o>=t+1-n?(o=t+1-n,this._buf[t-1].result*(1-1/o)+e/o):this._buf[t-1].result+(e-this._buf[t-o].resultA)/o}return e}}]),e}();function Mc(t){return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Rc(t,e){return!e||"object"!==Mc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nc(t){return(Nc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lc(t,e){return(Lc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rc(this,Nc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lc(t,e)}(e,yi),function(t,e,n){e&&Dc(t.prototype,e),n&&Dc(t,n)}(e,[{key:"execute",value:function(t){return Math.max(this._exprA.execute(t),this._exprB.execute(t))}}]),e}();function Vc(t){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Hc(t,e){return!e||"object"!==Vc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yc(t){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xc(t,e){return(Xc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hc(this,Yc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xc(t,e)}(e,yi),function(t,e,n){e&&Bc(t.prototype,e),n&&Bc(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)*this._exprB.execute(t)}}]),e}();function Wc(t){return(Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Gc(t,e){return!e||"object"!==Wc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qc(t){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jc(t,e){return(Jc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gc(this,qc(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jc(t,e)}(e,ni),function(t,e,n){e&&zc(t.prototype,e),n&&zc(t,n)}(e,[{key:"execute",value:function(t){return-this._exprA.execute(t)}}]),e}();function $c(t){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zc(t,e){return!e||"object"!==$c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eu(t,e){return(eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nu=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Zc(this,tu(e).call(this)))._exprA=t,i._exprB=n,i._exprC=o,i._exprD=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eu(t,e)}(e,Kr),function(t,e,n){e&&Qc(t.prototype,e),n&&Qc(t,n)}(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e),this._exprD.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}]),e}();function ou(t){return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ru(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function iu(t,e){return!e||"object"!==ou(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function au(t){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cu(t,e){return(cu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),iu(this,au(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cu(t,e)}(e,Kr),function(t,e,n){e&&ru(t.prototype,e),n&&ru(t,n)}(e,[{key:"execute",value:function(t){return Ti.get()._ds.getDataAt(t).open}}]),e}();function su(t){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fu(t,e){return!e||"object"!==su(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hu(t){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pu(t,e){return(pu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yu=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=fu(this,hu(e).call(this,t,n)))._style=void 0===o?e.outputStyle.Line:o,i._color=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pu(t,e)}(e,Ni),function(t,e,n){e&&lu(t.prototype,e),n&&lu(t,n)}(e,[{key:"getStyle",value:function(){return this._style}},{key:"getColor",value:function(){return this._color}}]),e}();function bu(t){return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function du(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gu(t,e){return!e||"object"!==bu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mu(t){return(mu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vu(t,e){return(vu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(yu,"outputStyle",{None:0,Line:1,VolumeStick:2,MACDStick:3,SARPoint:4});var _u=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=gu(this,mu(e).call(this)))._name=t,i._minValue=n,i._maxValue=o,i._value=r,i._defaultValue=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vu(t,e)}(e,Kr),function(t,e,n){e&&du(t.prototype,e),n&&du(t,n)}(e,[{key:"execute",value:function(){return this._value}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){0===t?this._value=0:t<this._minValue?this._value=this._minValue:t>this._maxValue?this._value=this._maxValue:this._value=t}}]),e}();function wu(t){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ou(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Su(t,e){return!e||"object"!==wu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pu(t){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ku(t,e){return(ku=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ju=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Su(this,Pu(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ku(t,e)}(e,yu),function(t,e,n){e&&Ou(t.prototype,e),n&&Ou(t,n)}(e,[{key:"getName",value:function(){return this._name+this._exprA.getRange()}}]),e}();function xu(t){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tu(t,e){return!e||"object"!==xu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Iu(t){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eu(t,e){return(Eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Au=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tu(this,Iu(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eu(t,e)}(e,yi),function(t,e,n){e&&Cu(t.prototype,e),n&&Cu(t,n)}(e,[{key:"execute",value:function(t){if((void 0===this._offset||this._offset<0)&&(this._offset=this._exprB.execute(t),this._offset<0))throw"offset < 0";if((t-=this._offset)<0)throw"index < 0";var e=this._exprA.execute(t);if(isNaN(e))throw"NaN";return e}}]),e}();function Mu(t){return(Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Du(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ru(t,e){return!e||"object"!==Mu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nu(t,e,n){return(Nu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lu(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Lu(t){return(Lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fu(t,e){return(Fu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vu=function(t){function e(t,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ru(this,Lu(e).call(this,t,n,o,r)))._buf=[],i._range=-1,i._min=null,i._step=null,i._max=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fu(t,e)}(e,nu),function(t,e,n){e&&Du(t.prototype,e),n&&Du(t,n)}(e,[{key:"execute",value:function(t){this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0)/100,this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);var e=this._buf[t],n=Ti.get(),o=n._firstIndex;if(o<0)e.longPos=!0,e.sar=n._ds.getDataAt(t).low,e.ep=n._ds.getDataAt(t).high,e.af=.02;else{var r=n._ds.getDataAt(t).high,i=n._ds.getDataAt(t).low,a=this._buf[t-1];if(e.sar=a.sar+a.af*(a.ep-a.sar),a.longPos){if(e.longPos=!0,r>a.ep?(e.ep=r,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar>i){e.longPos=!1;var c=t-this._range+1;for(c=Math.max(c,o);c<t;c++){var u=n._ds.getDataAt(c).high;r<u&&(r=u)}e.sar=r,e.ep=i,e.af=.02}}else if(e.longPos=!1,i<a.ep?(e.ep=i,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar<r){e.longPos=!0;var s=t-this._range+1;for(s=Math.max(s,o);s<t;s++){var l=n._ds.getDataAt(s).low;i>l&&(i=l)}e.sar=i,e.ep=r,e.af=.02}}return e.sar}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});Nu(Lu(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){Nu(Lu(e.prototype),"clear",this).call(this),this._range=-1}}]),e}();function Bu(t){return(Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Yu(t,e){return!e||"object"!==Bu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xu(t,e,n){return(Xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uu(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Uu(t){return(Uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wu(t,e){return(Wu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zu=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yu(this,Uu(e).call(this,t,n)))._exprC=o,r._mul=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wu(t,e)}(e,ea),function(t,e,n){e&&Hu(t.prototype,e),n&&Hu(t,n)}(e,[{key:"initRange",value:function(){Xu(Uu(e.prototype),"initRange",this).call(this),this._mul=this._exprC.execute(0)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=Ti.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return o>t+1-n&&(o=t+1-n),((o-1)*this._buf[t-1].result+e*this._mul)/o}return e}}]),e}();function Gu(t){return(Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ju(t,e){return!e||"object"!==Gu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ku(t,e,n){return(Ku="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$u(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function $u(t){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qu(t,e){return(Qu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ju(this,$u(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qu(t,e)}(e,ea),function(t,e,n){e&&qu(t.prototype,e),n&&qu(t,n)}(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=this._stdBuf[t],o=Ti.get()._firstIndex;if(o<0)return n.resultMA=e,0;if(t>o){var r=this._range;r>=t+1-o?(r=t+1-o,n.resultMA=this._stdBuf[t-1].resultMA*(1-1/r)+e/r):n.resultMA=this._stdBuf[t-1].resultMA+(e-this._buf[t-r].resultA)/r;for(var i=0,a=t-r+1;a<=t;a++)i+=Math.pow(this._buf[a].resultA-n.resultMA,2);return Math.sqrt(i/r)}return n.resultMA=e,0}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var o=n;o>0;o--)this._stdBuf.push({resultMA:NaN});Ku($u(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){Ku($u(e.prototype),"clear",this).call(this),this._stdBuf=[]}}]),e}();function ts(t){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function es(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ns(t,e){return!e||"object"!==ts(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rs(t,e){return(rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var is=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ns(this,os(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rs(t,e)}(e,yi),function(t,e,n){e&&es(t.prototype,e),n&&es(t,n)}(e,[{key:"execute",value:function(t){return this._exprA.execute(t)-this._exprB.execute(t)}}]),e}();function as(t){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cs(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function us(t,e){return!e||"object"!==as(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ss(t){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ls(t,e){return(ls=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),us(this,ss(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ls(t,e)}(e,ea),function(t,e,n){e&&cs(t.prototype,e),n&&cs(t,n)}(e,[{key:"calcResult",value:function(t,e){var n=Ti.get()._firstIndex;if(n<0)return e;if(t>n){var o=this._range;return 0===o||o>=t+1-n?this._buf[t-1].result+e:this._buf[t-1].result+e-this._buf[t-o].resultA}return e}}]),e}();function hs(t){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ps(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ys(t,e){return!e||"object"!==hs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bs(t){return(bs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ds(t,e){return(ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ys(this,bs(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ds(t,e)}(e,Kr),function(t,e,n){e&&ps(t.prototype,e),n&&ps(t,n)}(e,[{key:"execute",value:function(t){return Ti.get()._ds.getDataAt(t).volume}}]),e}();function ms(t){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vs(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _s(t,e){return!e||"object"!==ms(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ws(t){return(ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Os(t,e){return(Os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ss=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_s(this,ws(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Os(t,e)}(e,Kr),function(t,e,n){e&&vs(t.prototype,e),n&&vs(t,n)}(e,[{key:"execute",value:function(t){return Ti.get()._ds.getIndexPriceAt(t).close}}]),e}();function Ps(t){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ks(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function js(t,e){return!e||"object"!==Ps(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cs(t,e){return(Cs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ts=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=js(this,xs(e).call(this,t))).kId=o.kId,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cs(t,e)}(e,tt),function(t,e,n){e&&ks(t.prototype,e),n&&ks(t,n)}(e,[{key:"Draw",value:function(t){var e=this,n=ag.getInstance(this.kId),o=n.getArea(this.getAreaName()),r=n.getTimeline(this.getDataSourceName()),i=n.getRange(this.getAreaName());if(0!==i.getRange()){var a=n.getDataProvider(this.getName());if(qe.isInstance(a,Ue)){var c,u=n.getTheme(this.getFrameName()),s=r.getColumnWidth(),l=r.getFirstIndex(),f=r.getLastIndex();c=o.isChanged()||r.isUpdated()||i.isUpdated()?l:Math.max(l,f-2),a.getIndicators().forEach(function(a){var h,p,y=a.getOutputCount();for(p=0;p<y;p++){var b=(h=a.getOutputAt(p)).getStyle();b===yu.outputStyle.VolumeStick?e.drawVolumeStick(t,u,n.getDataSource(e.getDataSourceName()),c,f,r.toItemLeft(c),s,r.getItemWidth(),i):b===yu.outputStyle.MACDStick?e.drawMACDStick(t,u,h,c,f,r.toItemLeft(c),s,r.getItemWidth(),i):b===yu.outputStyle.SARPoint&&e.drawSARPoint(t,u,h,c,f,r.toItemCenter(c),s,r.getItemWidth(),i)}var d=r.toColumnLeft(c),g=r.toItemCenter(c);for(t.save(),t.rect(d,o.getTop(),o.getRight()-d,o.getHeight()),t.clip(),t.translate(.5,.5),p=0;p<y;p++){var m=g;if((h=a.getOutputAt(p)).getStyle()===yu.outputStyle.Line){var v=void 0,_=[];c>l&&(v=h.execute(c-1),!1===isNaN(v)&&_.push({x:m-s,y:i.toY(v)}));for(var w=c;w<f;w++,m+=s)v=h.execute(w),!1===isNaN(v)&&_.push({x:m,y:i.toY(v)});if(_.length>0){var O=h.getColor();void 0===O&&(O="Indicator".concat(p)),t.strokeStyle=u[O],cn.drawLines(t,_)}}}t.restore()})}}}},{key:"drawVolumeStick",value:function(t,e,n,o,r,i,a,c,u){for(var s="dark"===e.getName(),l=i,f=[],h=[],p=[],y=o;y<r;y++){var b=n.getDataAt(y);if(b){var d=u.toY(b.volume),g=u.toHeight(b.volume);b.close>b.open?g>1&&c>1&&s?f.push({x:l+.5,y:d+.5,w:c-1,h:g-1}):h.push({x:l,y:d,w:Math.max(c,1),h:Math.max(g,1)}):b.close===b.open&&y>0&&b.close>=n.getDataAt(y-1).close?g>1&&c>1&&s?f.push({x:l+.5,y:d+.5,w:c-1,h:g-1}):h.push({x:l,y:d,w:Math.max(c,1),h:Math.max(g,1)}):p.push({x:l,y:d,w:Math.max(c,1),h:Math.max(g,1)}),l+=a}}f.length>0&&(t.strokeStyle=e.Positive,cn.createRectangles(t,f),t.stroke()),h.length>0&&(t.fillStyle=e.Positive,cn.createRectangles(t,h),t.fill()),p.length>0&&(t.fillStyle=e.Negative,cn.createRectangles(t,p),t.fill())}},{key:"drawMACDStick",value:function(t,e,n,o,r,i,a,c,u){for(var s=i,l=u.toY(0),f=[],h=[],p=[],y=[],b=o>0?n.execute(o-1):NaN,d=o;d<r;d++){var g=n.execute(d);if(g>=0){var m=u.toHeight(g);(0===d||g>=b)&&m>1&&c>1?f.push({x:s+.5,y:l-m+.5,w:c-1,h:m-1}):p.push({x:s,y:l-m,w:Math.max(c,1),h:Math.max(m,1)})}else{var v=u.toHeight(-g);(0===d||g>=b)&&v>1&&c>1?h.push({x:s+.5,y:l+.5,w:c-1,h:v-1}):y.push({x:s,y:l,w:Math.max(c,1),h:Math.max(v,1)})}b=g,s+=a}f.length>0&&(t.strokeStyle=e.Positive,cn.createRectangles(t,f),t.stroke()),h.length>0&&(t.strokeStyle=e.Negative,cn.createRectangles(t,h),t.stroke()),p.length>0&&(t.fillStyle=e.Positive,cn.createRectangles(t,p),t.fill()),y.length>0&&(t.fillStyle=e.Negative,cn.createRectangles(t,y),t.fill())}},{key:"drawSARPoint",value:function(t,e,n,o,r,i,a,c,u){var s=c>>1;s<.5&&(s=.5),s>4&&(s=4);var l=i,f=l+s,h=2*Math.PI;t.save(),t.translate(.5,.5),t.strokeStyle=e.Indicator3,t.beginPath();for(var p=o;p<r;p++){var y=u.toY(n.execute(p));t.moveTo(f,y),t.arc(l,y,s,0,h),l+=a,f+=a}t.stroke(),t.restore()}}]),e}();function Is(t){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Es(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function As(t,e){return!e||"object"!==Is(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ms(t){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ds(t,e){return(Ds=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),As(this,Ms(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ds(t,e)}(e,cn),function(t,e,n){e&&Es(t.prototype,e),n&&Es(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=this.getAreaName(),o=e.getArea(n),r=n.substring(0,n.lastIndexOf("Range")),i=e.getRange(r),a=e.getDataSource(this.getDataSourceName());if(!(a.getDataCount()<1)){var c=a.getLastItem(),u=c.close,s=c.open;if(!(u<i.getMinValue()||u>i.getMaxValue())){var l=e.getTheme(this.getFrameName()),f=i.toY(u),h=o.getLeft(),p=o.getRight();t.fillStyle=l.Background,t.strokeStyle=u>s?l.TextPositive:l.TextNegative,cn.createPolygon(t,[{x:h,y:f},{x:h+4,y:f-4},{x:h+4,y:f-10},{x:p-2,y:f-10},{x:p-2,y:f+10},{x:h+4,y:f+10},{x:h+4,y:f+4}]),t.globalAlpha=.6,t.fill(),t.globalAlpha=1,t.stroke(),t.font=l.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=u>s?l.TextPositive:l.TextNegative;var y=qe.fromFloat(u,a.getDecimalDigits());t.fillText(y,h+(p-h)/2,f+2)}}}}]),e}();function Ns(t){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ls(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fs(t,e){return!e||"object"!==Ns(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vs(t){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bs(t,e){return(Bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Fs(this,Vs(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bs(t,e)}(e,pn),function(t,e,n){e&&Ls(t.prototype,e),n&&Ls(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getArea(this.getAreaName()),o=e.getTimeline(this.getDataSourceName()),r=e.getRange(this.getAreaName()),i=e.getTheme(this.getFrameName()),a=n.getRect();if(!n.isChanged()&&!o.isUpdated()&&!r.isUpdated()){var c=o.getFirstIndex(),u=o.getLastIndex()-2,s=Math.max(c,u);a.X=o.toColumnLeft(s),a.Width=n.getRight()-a.X}t.fillStyle=i[this._color],t.clearRect(a.X,a.Y,a.Width,a.Height)}}]),e}();function Ys(t){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xs(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Us(t,e){return!e||"object"!==Ys(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ws(t){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zs(t,e){return(zs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gs=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Us(this,Ws(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zs(t,e)}(e,cn),function(t,e,n){e&&Xs(t.prototype,e),n&&Xs(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=this.getAreaName(),o=e.getArea(n),r=n.substring(0,n.lastIndexOf("Range")),i=e.getRange(r);if(0!==i.getRange()){var a=e.getDataSource(this.getDataSourceName());if(!(a.getDataCount()<1)){var c=e.getTheme(this.getFrameName()),u=a.getLastItem(),s=u.volume,l=u.close,f=u.open,h=i.toY(s),p=o.getLeft(),y=o.getRight();t.fillStyle=c.Background,t.strokeStyle=l>f?c.TextPositive:c.TextNegative,cn.createPolygon(t,[{x:p,y:h},{x:p+4,y:h-4},{x:p+4,y:h-10},{x:y-2,y:h-10},{x:y-2,y:h+10},{x:p+4,y:h+10},{x:p+4,y:h+4}]),t.globalAlpha=.6,t.fill(),t.globalAlpha=1,t.stroke(),t.font=c.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=l>f?c.TextPositive:c.TextNegative;var b=qe.fromFloat(s,s>1?2:a.getDecimalDigits());t.fillText(b,p+(y-p)/2,h+2)}}}}]),e}(),qs={zh_cn:{high:"高",open:"开",low:"低",close:"收",change:"涨幅",amplitude:"振幅",volume:"成交量",year:"年",month:"月",day:"日",time:"时间",period:{my:"我的",edit:"编辑",complete:"完成",more:"更多",period:"周期",line:"分时",m:"分钟",h:"小时",d:"日",w:"周",M:"月",y:"年"},str_indicator:"技术指标",str_tools:"画线工具",str_screenshot:"屏幕快照",str_local_save:"本地保存",str_compare:"对比",str_setting:"设置",str_fullscreen:"全屏",str_fullscreen_close:"退出全屏",settings:{close:"关闭",default:"默认值",indicator_parameters:"指标参数设置"},ctools:{cursor:"光标",cross_cursor:"十字光标",seg_line:"线段",straight_line:"直线",ray_line:"射线",arrow_line:"箭头",horz_seg_line:"水平线段",horz_straight_line:"水平直线",horz_ray_line:"水平射线",vert_straight_line:"垂直直线",price_line:"价格线",tri_parallel_line:"价格通道线",bi_parallel_line:"平行直线",bi_parallel_ray:"平行射线",fib_retrace:"斐波纳契回调",fib_fans:"斐波纳契扇形",hide:"隐藏",show:"显示",delete:"删除",hide_all:"隐藏所有绘图工具",show_all:"显示所有绘图工具",delete_all:"删除所有绘图工具"},compare:{index_title:"现货指数",index_desc:"价格指数",futures_title:"交割合约价格",futures_desc_1:"当周",futures_desc_2:"次周",futures_desc_4:"当季",futures_desc_5:"次季",swap_title:"永续合约价格",swap_desc:"永续"}},en_us:{high:"high",open:"open",low:"low",close:"close",change:"change",amplitude:"range",volume:"volume",year:"year",month:"month",day:"day",time:"time",period:{my:"My",edit:"Edit",complete:"Complete",more:"More",period:"TIME",line:"Line(1m)",m:"m",h:"H",d:"D",w:"W",M:"M",y:"Y"},str_indicator:"Indicator",str_tools:"Tools",str_screenshot:"Screenshot",str_local_save:"Save",str_compare:"Compare",str_setting:"Setting",str_fullscreen:"Fullscreen",str_fullscreen_close:"Exit Fullscreen",settings:{close:"CLOSE",default:"default",indicator_parameters:"Indicator Parameters"},ctools:{cursor:"Cursor",cross_cursor:"Cross Cursor",seg_line:"Trend Line",straight_line:"Extended",ray_line:"Ray",arrow_line:"Arrow",horz_seg_line:"Horizontal Line",horz_straight_line:"Horizontal Extended",horz_ray_line:"Horizontal Ray",vert_straight_line:"Vertical Extended",price_line:"Price Line",tri_parallel_line:"Parallel Channel",bi_parallel_line:"Parallel Lines",bi_parallel_ray:"Parallel Rays",fib_retrace:"Fibonacci Retracements",fib_fans:"Fibonacci Fans",hide:"Hide",show:"Show",delete:"Delete",hide_all:"Hide All Drawing Tools",show_all:"Display All Drawing Tools",delete_all:"Delete All Drawing Tools"},compare:{index_title:"Token Index",index_desc:" Prcie Index",futures_title:"Futures Price",futures_desc_1:" Weekly",futures_desc_2:" Bi-weekly",futures_desc_4:" Quarterly",futures_desc_5:" Bi-quarterly",swap_title:"Swap Price",swap_desc:" Swap"}},zh_hk:{high:"高",open:"開",low:"低",close:"收",change:"漲幅",amplitude:"振幅",volume:"成交量",year:"年",month:"月",day:"日",time:"時間",period:{my:"我的",edit:"編輯",complete:"完成",more:"更多",period:"週期",line:"分時",m:"分鐘",h:"小時",d:"日",w:"周",M:"月",y:"年"},str_indicator:"技術指標",str_tools:"畫線工具",str_screenshot:"屏幕快照",str_local_save:"本地保存",str_compare:"对比",str_setting:"設置",str_fullscreen:"全屏",str_fullscreen_close:"退出全屏",settings:{close:"關閉",default:"默認值",indicator_parameters:"指標參數設置"},ctools:{cursor:"光標",cross_cursor:"十字光標",seg_line:"線段",straight_line:"直線",ray_line:"射線",arrow_line:"箭頭",horz_seg_line:"水平線段",horz_straight_line:"水平直線",horz_ray_line:"水平射線",vert_straight_line:"垂直直線",price_line:"價格線",tri_parallel_line:"價格通道線",bi_parallel_line:"平行直線",bi_parallel_ray:"平行射線",fib_retrace:"斐波納契回調",fib_fans:"斐波納契扇形",hide:"隱藏",show:"顯示",delete:"删除",hide_all:"隱藏所有繪圖工具",show_all:"顯示所有繪圖工具",delete_all:"删除所有繪圖工具"},compare:{index_title:"現貨指數",index_desc:"價格指數",futures_title:"交割合約價格",futures_desc_1:"當週",futures_desc_2:"次週",futures_desc_4:"当季",futures_desc_5:"次季",swap_title:"永續合約價格",swap_desc:"永續"}}};function Js(t){return t=t&&t.toLowerCase(),qs[t]||qs.en_us}function Ks(t){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Qs(t,e,n[e])})}return t}function Qs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zs(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tl(t,e){return!e||"object"!==Ks(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function el(t){return(el=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nl(t,e){return(nl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ol=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=tl(this,(t=el(e)).call.apply(t,[this].concat(r)))).lastPanelPostion="left",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nl(t,e)}(e,cn),function(t,e,n){e&&Zs(t.prototype,e),n&&Zs(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getTimeline(this.getDataSourceName()).getSelectedIndex();if(!(n<0)){var o=e.getDataSource(this.getDataSourceName()),r=e.getTheme(this.getFrameName()),i=e.getArea(this.getAreaName()),a=e.getFrameMousePos(this.getFrameName()),c=r.Text0,u=r.Text1,s=this.kConfig,l=s.mainInfoStyle,f=Js(s.language),h=o.getDataAt(n),p=o.getDecimalDigits(),y=[];if(t.font=r.DefaultFont,t.textAlign="left",t.textBaseline="top","vertical"===l){var b=new Date(h.date),d=b.getFullYear(),g=qe.formatTime(b.getMonth()+1),m=qe.formatTime(b.getDate()),v=qe.formatTime(b.getHours()),_=qe.formatTime(b.getMinutes());y.push({key:f.time,value:"".concat(d,"-").concat(g,"-").concat(m," ").concat(v,":").concat(_),color:c})}y.push({key:f.open,value:h.open.toFixed(p),keyColor:c}),y.push({key:f.high,value:h.high.toFixed(p),keyColor:c}),y.push({key:f.low,value:h.low.toFixed(p),keyColor:c}),y.push({key:f.close,value:h.close.toFixed(p),keyColor:c});var w=u,O=o.getDataAt(n-1);if(n>0){var S;S=(h.close-O.close)/O.close*100?(h.close-O.close)/O.close*100:0,w=r[S>=0?"TextPositive":"TextNegative"],y.push({key:f.change,value:"".concat(S.toFixed(2),"%"),color:w,keyColor:c});var P=0;O&&(P=(h.high-h.low)/O.close*100||0),y.push({key:f.amplitude,value:"".concat(P.toFixed(2),"%"),keyColor:c})}s.showVolume&&y.push({key:f.volume,value:h.volume.toFixed(2),keyColor:c});var k=e.getDataProvider("".concat(this.getAreaName(),".secondary"));if(k)k.getIndicators().forEach(function(t){for(var e=t.getOutputCount(),o=0;o<e;o++){var i=t.getOutputAt(o),a=i.execute(n);if(!Number.isNaN(a)){var c=i.getColor();void 0===c&&(c="Indicator".concat(o));var u=i.getName();y.push({key:f[u.toLocaleLowerCase()]||u,value:a.toFixed(p),color:r[c]})}}});var j=i.getLeft(),x=i.getTop(),C=i.getRight(),T=i.getWidth(),I=i.getHeight();if("vertical"===l){for(var E=1.5*parseInt(r.DefaultFont,10),A=0,M=0;M<y.length;M++){var D=y[M],R=t.measureText("".concat(D.key).concat(D.value)).width;A<R&&(A=R)}var N=(A+=10)+14;a.x<=N&&(this._lastPanelPostion="right"),a.x>=T-N&&(this._lastPanelPostion="left");var L=Math.min(y.length,Math.floor((I-14)/E)),F=j,V=L*E+14*.55;L<y.length&&y.shift();var B={x:j+7,y:x+4.55,w:T-14,h:I-14},H=A+7;"right"===this._lastPanelPostion&&(F=C-N,B.x=F+7,H=C-7),t.globalAlpha=r.MainInfoAlpha,t.fillStyle=r.MainInfoBg,t.fillRect(F,x,N,V),t.globalAlpha=1;for(var Y=0;Y<L;Y++){var X=y[Y];t.fillStyle=X.keyColor||X.color||u,cn.drawString(t,X.key,$s({},B));var U=t.measureText(X.value).width;if(t.fillStyle=X.color||u,!cn.drawString(t,X.value,$s({},B,{x:H-U})))break;B.y+=E,B.h-=E}}else for(var W={x:j+7,y:x+7,w:T-14,h:I-14},z=0;z<y.length;z++){var G=y[z];if(t.fillStyle=G.color||u,!cn.drawString(t,"  ".concat(G.key,": ").concat(G.value),W))break}}}}]),e}();function rl(t){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function il(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function al(t,e){return!e||"object"!==rl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cl(t){return(cl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ul(t,e){return(ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sl=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=al(this,cl(e).call(this,t))).kId=o.kId,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ul(t,e)}(e,tt),function(t,e,n){e&&il(t.prototype,e),n&&il(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var o=e.getTimeline(this.getDataSourceName());if(!(o.getInnerWidth()<o.getColumnWidth())){var r=e.getRange(this.getAreaName());if(0!==r.getRange()){var i=e.getDataProvider("".concat(this.getAreaName(),".main")),a=o.getFirstIndex(),c=a+o.getLastIndex()>>1,u=e.getTheme(this.getFrameName());t.font=u.DefaultFont,t.textBaseline="middle",t.fillStyle=u.Text4,t.strokeStyle=u.Text4;var s=n.getDecimalDigits();this.drawMark(t,i.getMinValue(),s,r.toY(i.getMinValue()),a,c,i.getMinValueIndex(),o),this.drawMark(t,i.getMaxValue(),s,r.toY(i.getMaxValue()),a,c,i.getMaxValueIndex(),o)}}}}},{key:"drawMark",value:function(t,e,n,o,r,i,a,c){var u,s,l,f,h=c.toItemCenter(a);h>c.getInnerWidth()/2?(t.textAlign="right",l=(u=h-4)-3,f=(s=u-7)-4):(t.textAlign="left",l=(u=h+4)+3,f=(s=u+7)+4),cn.drawLine(t,u,o,s,o),cn.drawLine(t,u,o,l,o+2),cn.drawLine(t,u,o,l,o-2),t.fillText(qe.fromFloat(e,n),f,o)}}]),e}();function ll(t){return(ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hl(t,e){return!e||"object"!==ll(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pl(t){return(pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yl(t,e){return(yl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hl(this,pl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yl(t,e)}(e,cn),function(t,e,n){e&&fl(t.prototype,e),n&&fl(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getDataSource(this.getDataSourceName());if(qe.isInstance(n,Ae)&&!(n.getDataCount()<1)){var o,r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),a=e.getRange(this.getAreaName()),c=e.getTheme(this.getFrameName()),u=i.getFirstIndex(),s=i.getLastIndex();o=r.isChanged()||i.isUpdated()||a.isUpdated()?u:Math.max(u,s-2);for(var l=i.getColumnWidth(),f=i.getItemWidth()>>1,h=i.toItemLeft(o),p=i.toItemCenter(o),y=[],b=[],d=[],g=o;g<s;g++){var m=n.getDataAt(g),v=a.toY(m.high),_=a.toY(m.low),w=Math.max(_-v,1);if(m.close>m.open){var O=a.toY(m.close),S=a.toY(m.open);y.push({x:p,y:v,w:1,h:w}),y.push({x:h,y:O,w:f,h:1}),y.push({x:p,y:S,w:f,h:1})}else if(m.close===m.open){var P=a.toY(m.close);b.push({x:p,y:v,w:1,h:w}),b.push({x:h,y:P,w:f,h:1}),b.push({x:p,y:P,w:f,h:1})}else{var k=a.toY(m.open),j=a.toY(m.close);d.push({x:p,y:v,w:1,h:w}),d.push({x:h,y:k,w:f,h:1}),d.push({x:p,y:j,w:f,h:1})}h+=l,p+=l}y.length>0&&(t.fillStyle=c.Positive,cn.createRectangles(t,y),t.fill()),b.length>0&&(t.fillStyle=c.Negative,cn.createRectangles(t,b),t.fill()),d.length>0&&(t.fillStyle=c.Negative,cn.createRectangles(t,d),t.fill())}}}]),e}();function dl(t){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ml(t,e){return!e||"object"!==dl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vl(t){return(vl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _l(t,e){return(_l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ml(this,vl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_l(t,e)}(e,pn),function(t,e,n){e&&gl(t.prototype,e),n&&gl(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=this.getAreaName(),o=e.getArea(n),r=e.getRange(n.substring(0,n.lastIndexOf("Range")));if("main"===r.getNameObject().getCompAt(2)||o.isChanged()||r.isUpdated()){var i=e.getTheme(this.getFrameName());t.fillStyle=i[this._color],t.fillRect(o.getLeft(),o.getTop(),o.getWidth(),o.getHeight())}}}]),e}();function Ol(t){return(Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pl(t,e){return!e||"object"!==Ol(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kl(t){return(kl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jl(t,e){return(jl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xl=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Pl(this,kl(e).call(this,t))).kId=o.kId,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jl(t,e)}(e,tt),function(t,e,n){e&&Sl(t.prototype,e),n&&Sl(t,n)}(e,[{key:"getRequiredWidth",value:function(t,e){var n=ag.getInstance(this.kId).getTheme(this.getFrameName());return t.font=n.DefaultFont,t.measureText((Math.floor(e)+.88).toString()).width+16}},{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getDataSource(this.getDataSourceName()),o=this.getAreaName(),r=e.getArea(o),i=o.substring(0,o.lastIndexOf("Range")),a=e.getRange(i);if(0!==a.getRange()){var c=2;if("main"===a.getNameObject().getCompAt(2))c=n.getDecimalDigits();else if(!r.isChanged()&&!a.isUpdated())return;var u=a.getGradations();if(0!==u.length){var s=r.getLeft(),l=r.getRight(),f=r.getCenter(),h=e.getTheme(this.getFrameName());t.font=h.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=h.Grid1;var p=[];for(var y in u){var b=a.toY(u[y]);p.push({x:s,y:b,w:6,h:1}),p.push({x:l-6,y:b,w:6,h:1}),t.fillText(qe.fromFloat(u[y],c),f,b)}p.length>0&&(t.fillStyle=h.Grid1,cn.createRectangles(t,p),t.fill())}}}}]),e}();function Cl(t){return(Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Il(t,e){return!e||"object"!==Cl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function El(t){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Al(t,e){return(Al=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ml=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Il(this,El(e).call(this,t))).kId=o.kId,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Al(t,e)}(e,tt),function(t,e,n){e&&Tl(t.prototype,e),n&&Tl(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=this.getAreaName(),o=e.getArea(n);if(!(e.getTimeline(this.getDataSourceName()).getSelectedIndex()<0)){var r=n.substring(0,n.lastIndexOf("Range")),i=e.getRange(r);if(!(0===i.getRange()||i.getSelectedPosition()<0)){var a=i.getSelectedValue();if(a!==-Number.MAX_VALUE){var c=i.getSelectedPosition(),u=e.getTheme(this.getFrameName());t.strokeStyle=u.Grid2,t.fillStyle=u.Grid3;var s=o.getLeft(),l=o.getRight();cn.createPolygon(t,[{x:s,y:c},{x:s+4,y:c-4},{x:s+4,y:c-10},{x:l-2,y:c-10},{x:l-2,y:c+10},{x:s+4,y:c+10},{x:s+4,y:c+4}]),t.fill(),t.stroke(),t.font=u.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=u.Text3;var f=2;"main"===i.getNameObject().getCompAt(2)&&(f=e.getDataSource(this.getDataSourceName()).getDecimalDigits()),t.fillText(qe.fromFloat(a,f),o.getCenter(),c+2)}}}}}]),e}();function Dl(t){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nl(t,e){return!e||"object"!==Dl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ll(t){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fl(t,e){return(Fl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Nl(this,Ll(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fl(t,e)}(e,cn),function(t,e,n){e&&Rl(t.prototype,e),n&&Rl(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId);if(e._drawingTool===yt.CrossCursor){var n=e.getArea(this.getAreaName()),o=e.getTimeline(this.getDataSourceName());if(!(o.getSelectedIndex()<0)){var r=e.getRange(this.getAreaName()),i=e.getTheme(this.getFrameName());t.strokeStyle=i.CursorColor,t.fillStyle=i.CursorColor;var a=o.toItemCenter(o.getSelectedIndex());cn.drawDashedLine(t,a,n.getTop()-1,a,n.getBottom(),10,5);var c=r.getSelectedPosition();c>=0&&(cn.drawDashedLine(t,0,c,n.getRight(),c,10,5),t.stroke())}}}}]),e}();function Bl(t){return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Yl(t,e){return!e||"object"!==Bl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xl(t){return(Xl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ul(t,e){return(Ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wl=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yl(this,Xl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ul(t,e)}(e,pn),function(t,e,n){e&&Hl(t.prototype,e),n&&Hl(t,n)}(e,[{key:"Draw",value:function(t){var e=ag.getInstance(this.kId),n=e.getArea(this.getAreaName()),o=e.getTimeline(this.getDataSourceName());if(n.isChanged()||o.isUpdated()){var r=e.getTheme(this.getFrameName());t.fillStyle=r[this._color],t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}}]),e}();function zl(t){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ql(t,e){return!e||"object"!==zl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jl(t){return(Jl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kl(t,e){return(Kl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $l=[3e5,6e5,9e5,18e5,36e5,72e5,108e5,216e5,432e5,864e5,1728e5,5184e5],Ql=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ql(this,Jl(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kl(t,e)}(e,cn),function(t,e,n){e&&Gl(t.prototype,e),n&&Gl(t,n)}(e,[{key:"Draw",value:function(t){var e=this.kConfig.language,n=Js(e),o=ag.getInstance(this.kId),r=o.getArea(this.getAreaName()),i=o.getTimeline(this.getDataSourceName());if(r.isChanged()||i.isUpdated()){var a=i.getFirstIndex(),c=i.getLastIndex();if(!(c<=a)){var u=o.getDataSource(this.getDataSourceName());if(!(u.getDataCount()<2)){var s=u.getDataAt(c-1),l=u.getDataAt(c-2);if(s&&l){for(var f=s.date-l.date,h=$l.length,p=0;p<h&&!(f<$l[p]);p++);for(;p<h&&!($l[p]%f==0&&$l[p]/f*i.getColumnWidth()>60);p++);var y=60*(new Date).getTimezoneOffset()*1e3,b=o.getTheme(this.getFrameName());t.font=b.DefaultFont,t.textAlign="center",t.textBaseline="middle";for(var d=[],g=r.getTop(),m=r.getMiddle(),v=r.getLeft(),_=a;_<c;_++){var w=u.getDataAt(_).date,O=w-y,S=new Date(w),P=S.getFullYear(),k=S.getMonth()+1,j=S.getDate(),x=S.getHours(),C=S.getMinutes(),T="";if(p<h){var I=Math.max(864e5,$l[p]);if(O%I!=0&&O%$l[p]!=0&&(O-=f<=6e4?7e3:6e4,432e5===f&&(O-=216e5)),O%I==0)T=/en_/.test(e)?"".concat(mt[k]," ").concat(j.toString()):"".concat(k.toString()).concat(n.month).concat(j.toString()).concat(n.day),t.fillStyle=b.Text4;else if(O%$l[p]==0){var E=C.toString();C<10&&(E="0".concat(E)),T="".concat(x.toString(),":").concat(E),t.fillStyle=b.Grid1}}else 1===j&&x<f/36e5&&(1===k?(T=P.toString(),/en_/.test(e)||(T+=n.year)):T=/en_/.test(e)?mt[k]:"".concat(k.toString()).concat(n.month),t.fillStyle=b.Text4);if(T.length>0){var A=t.measureText(T).width,M=i.toItemCenter(_);if(M-A/2<v)continue;v=M+A/2,d.push({x:M,y:g,w:1,h:4}),t.fillText(T,M,m)}}d.length>0&&(t.fillStyle=b.Grid1,cn.createRectangles(t,d),t.fill())}}}}}}]),e}();function Zl(t){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ef(t,e){return!e||"object"!==Zl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nf(t){return(nf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function of(t,e){return(of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rf=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ef(this,nf(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&of(t,e)}(e,cn),function(t,e,n){e&&tf(t.prototype,e),n&&tf(t,n)}(e,[{key:"Draw",value:function(t){var e=this.kConfig.language,n=Js(e),o=ag.getInstance(this.kId),r=o.getArea(this.getAreaName()),i=o.getTimeline(this.getDataSourceName());if(!(i.getSelectedIndex()<0)){var a=o.getDataSource(this.getDataSourceName());if(qe.isInstance(a,Ae)){var c=new Date(a.getDataAt(i.getSelectedIndex()).date),u=c.getMonth()+1,s=c.getDate(),l=c.getHours(),f=c.getMinutes(),h=c.getSeconds(),p=u.toString(),y=s.toString(),b=l.toString(),d=f.toString(),g=h.toString();f<10&&(d="0".concat(d)),h<10&&(g="0".concat(g));var m="";m=/en_/.test(e)?"".concat(mt[u]," ").concat(y," ").concat(b,":").concat(d):"".concat(p).concat(n.month).concat(y).concat(n.day," ").concat(b,":").concat(d),this.kState.periodMS<6e4&&(m+=":".concat(g));var v=o.getTheme(this.getFrameName()),_=t.measureText(m).width;t.strokeStyle=v.Grid2,t.fillStyle=v.Grid3;var w=i.toItemCenter(i.getSelectedIndex()),O=r.getTop(),S=[{x:w,y:O},{x:w+4,y:O+4},{x:w+_/2+5,y:O+4},{x:w+_/2+5,y:O+20},{x:w-_/2-5,y:O+20},{x:w-_/2-5,y:O+4},{x:w-4,y:O+4}],P=w;if(S[4].x<0){var k=0-S[4].x;S.forEach(function(t,e){[0,1,6].includes(e)||(t.x+=k)}),P=w+k}cn.createPolygon(t,S),t.fill(),t.stroke(),t.font=v.DefaultFont,t.textAlign="center",t.textBaseline="middle",t.fillStyle=v.Text3,t.fillText(m,P,r.getTop()+14)}}}}]),e}();function af(t){return(af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uf(t,e){return!e||"object"!==af(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sf(t){return(sf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lf(t,e){return(lf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}for(var ff=[],hf=[],pf=5;pf<150;pf++)ff.push(.3*pf),hf.push(.1*pf);var yf=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=uf(this,sf(e).call(this,t))).kId=n.kId,o._updated=!1,o._innerLeft=0,o._innerWidth=0,o._firstColumnLeft=0,o._scale=n.kConfig.candleScale||20,o._lastScale=-1,o._maxItemCount=0,o._maxIndex=0,o._firstIndex=-1,o._selectedIndex=-1,o._savedFirstIndex=-1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lf(t,e)}(e,tt),function(t,e,n){e&&cf(t.prototype,e),n&&cf(t,n)}(e,[{key:"isLatestShown",value:function(){return this.getLastIndex()===this._maxIndex}},{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getItemWidth",value:function(){return ff[this._scale]}},{key:"getSpaceWidth",value:function(){return hf[this._scale]}},{key:"getColumnWidth",value:function(){return this.getSpaceWidth()+this.getItemWidth()}},{key:"getInnerWidth",value:function(){return this._innerWidth}},{key:"getItemLeftOffset",value:function(){return this.getSpaceWidth()}},{key:"getItemCenterOffset",value:function(){return this.getSpaceWidth()+(this.getItemWidth()>>1)}},{key:"getFirstColumnLeft",value:function(){return this._firstColumnLeft}},{key:"getMaxItemCount",value:function(){return this._maxItemCount}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"getLastIndex",value:function(){return Math.min(this._firstIndex+this._maxItemCount,this._maxIndex)}},{key:"getSelectedIndex",value:function(){return this._selectedIndex}},{key:"getMaxIndex",value:function(){return this._maxIndex}},{key:"calcColumnCount",value:function(t){return Math.floor(t/this.getColumnWidth())<<0}},{key:"calcFirstColumnLeft",value:function(t){return this._innerLeft+this._innerWidth-this.getColumnWidth()*t}},{key:"calcFirstIndexAlignRight",value:function(t,e,n){return Math.max(0,t+Math.max(e,1)-Math.max(n,1))}},{key:"calcFirstIndex",value:function(t){return this.validateFirstIndex(this.calcFirstIndexAlignRight(this._firstIndex,this._maxItemCount,t),t)}},{key:"updateMaxItemCount",value:function(){var t,e=this.calcColumnCount(this._innerWidth);if(this._maxItemCount<1)t=this.calcFirstIndex(e);else if(this._lastScale===this._scale){if(t=this.validateFirstIndex(this._firstIndex-(e-this._maxItemCount)),this.isLatestShown()&&e<this._maxItemCount){var n=this.getLastIndex()-e;t=n<0?this._firstIndex:n}}else{var o=this._selectedIndex>=0?this._selectedIndex:this.getLastIndex()-1;t=this.validateFirstIndex(o-Math.round((o-this._firstIndex)*e/this._maxItemCount))}this._lastScale=this._scale,this._firstIndex!==t&&(this._selectedIndex===this._firstIndex&&(this._selectedIndex=t),this._firstIndex=t,this._updated=!0),this._maxItemCount!==e&&(this._maxItemCount=e,this._updated=!0),this._firstColumnLeft=this.calcFirstColumnLeft(e)}},{key:"validateFirstIndex",value:function(t){if(this._maxIndex<1)return-1;if(t<0)return 0;var e=Math.max(0,this._maxIndex-1);return t>e?e:t}},{key:"validateSelectedIndex",value:function(){this._selectedIndex<this._firstIndex?this._selectedIndex=-1:this._selectedIndex>=this.getLastIndex()&&(this._selectedIndex=-1)}},{key:"onLayout",value:function(){var t=ag.getInstance(this.kId).getArea("".concat(this.getDataSourceName(),".main"));if(null!==t){this._innerLeft=t.getLeft()+4;var e=Math.max(0,t.getWidth()-12);this._innerWidth!==e&&(this._innerWidth=e,this.updateMaxItemCount())}}},{key:"toIndex",value:function(t){return this._firstIndex+this.calcColumnCount(t-this._firstColumnLeft)}},{key:"toColumnLeft",value:function(t){return this._firstColumnLeft+this.getColumnWidth()*(t-this._firstIndex)}},{key:"toItemLeft",value:function(t){return this.toColumnLeft(t)+this.getItemLeftOffset()}},{key:"toItemCenter",value:function(t){return this.toColumnLeft(t)+this.getItemCenterOffset()}},{key:"selectAt",value:function(t){return this._selectedIndex=this.toIndex(t),this.validateSelectedIndex(),this._selectedIndex>=0}},{key:"unselect",value:function(){this._selectedIndex=-1}},{key:"update",value:function(){var t=ag.getInstance(this.kId).getDataSource(this.getDataSourceName()),e=this._maxIndex;switch(this._maxIndex=t.getDataCount(),t.getUpdateMode()){case _t:this._maxIndex<1?this._firstIndex=-1:this._firstIndex=Math.max(this._maxIndex-this._maxItemCount,0),this._selectedIndex=-1,this._updated=!0;break;case Ot:var n=this.getLastIndex(),o=t.getErasedCount();n<e?o>0&&(this._firstIndex=Math.max(this._firstIndex-o,0),this._selectedIndex>=0&&(this._selectedIndex-=o,this.validateSelectedIndex()),this._updated=!0):n===e&&(this._firstIndex+=this._maxIndex-e,this._selectedIndex>=0&&(this._selectedIndex-=o,this.validateSelectedIndex()),this._updated=!0)}}},{key:"move",value:function(t){this.isLatestShown()&&ag.getInstance(this.kId).getArea("".concat(this.getDataSourceName(),".mainRange")).setChanged(!0),this._firstIndex=this.validateFirstIndex(this._savedFirstIndex-this.calcColumnCount(t),this._maxItemCount),this._updated=!0,this._selectedIndex>=0&&this.validateSelectedIndex()}},{key:"startMove",value:function(){this._savedFirstIndex=this._firstIndex}},{key:"scale",value:function(t){this._scale+=t,this._scale<0?this._scale=0:this._scale>=ff.length&&(this._scale=ff.length-1),this.updateMaxItemCount(),k.isMobile&&(this._selectedIndex=-1),this._selectedIndex>=0&&this.validateSelectedIndex()}}]),e}();function bf(t){return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function df(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gf(t,e){return!e||"object"!==bf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mf(t){return(mf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vf(t,e){return(vf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _f=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gf(this,mf(e).call(this,t))).kId=o.kId,n._updated=!0,n._minValue=Number.MAX_VALUE,n._maxValue=-Number.MAX_VALUE,n._outerMinValue=Number.MAX_VALUE,n._outerMaxValue=-Number.MAX_VALUE,n._ratio=0,n._top=0,n._bottom=0,n._paddingTop=0,n._paddingBottom=0,n._minInterval=36,n._selectedPosition=-1,n._selectedValue=-Number.MAX_VALUE,n._gradations=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vf(t,e)}(e,tt),function(t,e,n){e&&df(t.prototype,e),n&&df(t,n)}(e,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getRange",value:function(){return this._maxValue-this._minValue}},{key:"getOuterMinValue",value:function(){return this._outerMinValue}},{key:"getOuterMaxValue",value:function(){return this._outerMaxValue}},{key:"getOuterRange",value:function(){return this._outerMaxValue-this._outerMinValue}},{key:"getHeight",value:function(){return Math.max(0,this._bottom-this._top)}},{key:"getGradations",value:function(){return this._gradations}},{key:"getMinInterval",value:function(){return this._minInterval}},{key:"setMinInterval",value:function(t){this._minInterval=t}},{key:"getSelectedPosition",value:function(){return this._selectedPosition>=0?this._selectedPosition:this._selectedValue>-Number.MAX_VALUE?this.toY(this._selectedValue):-1}},{key:"getSelectedValue",value:function(){if(this._selectedValue>-Number.MAX_VALUE)return this._selectedValue;var t=ag.getInstance(this.kId).getArea(this.getAreaName());return null===t?-Number.MAX_VALUE:this._selectedPosition<t.getTop()+12||this._selectedPosition>=t.getBottom()-4?-Number.MAX_VALUE:this.toValue(this._selectedPosition)}},{key:"setPaddingTop",value:function(t){this._paddingTop=t}},{key:"setPaddingBottom",value:function(t){this._paddingBottom=t}},{key:"toValue",value:function(t){return this._maxValue-(t-this._top)/this._ratio}},{key:"toY",value:function(t){return 0===this.getRange()?(this._bottom+this._top)/2:this._ratio>0?this._top+Math.floor((this._maxValue-t)*this._ratio+.5):this._top}},{key:"toHeight",value:function(t){return t==1/0||0==this._ratio?1.5:Math.floor(t*this._ratio+1.5)}},{key:"update",value:function(){for(var t,e=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=ag.getInstance(this.kId),r=[".main",".secondary"],i=0;i<r.length;i++)null!==(t=o.getDataProvider(this.getName()+r[i]))&&void 0!==t&&(e=Math.min(e,t.getMinValue()),n=Math.max(n,t.getMaxValue()));var a={min:e,max:n};this.preSetRange(a),this.setRange(a.min,a.max)}},{key:"select",value:function(t){this._selectedValue=t,this._selectedPosition=-1}},{key:"selectAt",value:function(t){this._selectedPosition=t,this._selectedValue=-Number.MAX_VALUE}},{key:"unselect",value:function(){this._selectedPosition=-1,this._selectedValue=-Number.MAX_VALUE}},{key:"preSetRange",value:function(t){t.min===t.max&&(t.min=-1,t.max=1)}},{key:"setRange",value:function(t,e){var n=ag.getInstance(this.kId).getArea(this.getAreaName());if(this._minValue!==t||this._maxValue!==e||n.isChanged()){this._updated=!0,this._minValue=t,this._maxValue=e,this._gradations=[];var o=n.getTop()+this._paddingTop,r=n.getBottom()-(this._paddingBottom+1);o>=r?this._minValue=this._maxValue:(this._top=o,this._bottom=r,this._maxValue>this._minValue?this._ratio=(r-o)/(this._maxValue-this._minValue):this._ratio=1,this._outerMinValue=this.toValue(n.getBottom()),this._outerMaxValue=this.toValue(n.getTop()),this.updateGradations())}}},{key:"calcInterval",value:function(){var t=this.getHeight(),e=this.getMinInterval();t/e<=1&&(e=t>>1);for(var n,o,r=this.getRange(),i=0,a=ag.getInstance(this.kId).getDataSource(this.getDataSourceName()).getDecimalDigits();i>-a&&Math.floor(r)<r;)r*=10,i--;for(;(n=o=Math.pow(10,i),!(this.toHeight(n)>e))&&(n=2*o,!(this.toHeight(n)>e))&&(n=5*o,!(this.toHeight(n)>e));i++);return n}},{key:"updateGradations",value:function(){this._gradations=[];var t=this.calcInterval();if(!(t<=0)){var e=Math.floor(this.getMaxValue()/t)*t;do{this._gradations.push(e),e-=t}while(e>this.getMinValue())}}}]),e}();function wf(t){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Of(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sf(t,e){return!e||"object"!==wf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pf(t){return(Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kf(t,e){return(kf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jf=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Sf(this,Pf(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kf(t,e)}(e,_f),function(t,e,n){e&&Of(t.prototype,e),n&&Of(t,n)}(e,[{key:"preSetRange",value:function(t){var e=ag.getInstance(this.kId),n=e.getTimeline(this.getDataSourceName()),o=n.getMaxIndex()-n.getLastIndex();if(o<25){var r=e.getDataSource(this.getDataSourceName()).getLastItem(),i=(t.max-t.min)/4*(1-o/25);r&&(t.min=Math.min(t.min,Math.max(r.low-i,0)),t.max=Math.max(t.max,r.high+i))}if(t.min>0){var a=t.max/t.min;if(a<1.016){var c=(t.max+t.min)/2,u=1.5*(a-1);t.max=c*(1+u),t.min=c*(1-u)}else if(a<1.048){var s=(t.max+t.min)/2;t.max=1.024*s,t.min=.976*s}}t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}();function xf(t){return(xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tf(t,e){return!e||"object"!==xf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function If(t){return(If=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ef(t,e){return(Ef=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Af=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tf(this,If(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ef(t,e)}(e,_f),function(t,e,n){e&&Cf(t.prototype,e),n&&Cf(t,n)}(e,[{key:"updateGradations",value:function(){this._gradations=[];var t=ag.getInstance(this.kId).getArea(this.getAreaName()),e=Math.floor(this.toHeight(10));if(!(e<<2>t.getHeight())){var n=10*Math.ceil(this.getMinValue()/10);if(0===n&&(n=0),e<<2<24){if(e<<1<8)return;do{20!==n&&80!==n||this._gradations.push(n),n+=10}while(n<this.getMaxValue())}else do{e<8?20!==n&&50!==n&&80!==n||this._gradations.push(n):0!==n&&20!==n&&50!==n&&80!==n&&100!==n||this._gradations.push(n),n+=10}while(n<this.getMaxValue())}}}]),e}();function Mf(t){return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Df(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Rf(t,e){return!e||"object"!==Mf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nf(t){return(Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lf(t,e){return(Lf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ff=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rf(this,Nf(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lf(t,e)}(e,_f),function(t,e,n){e&&Df(t.prototype,e),n&&Df(t,n)}(e,[{key:"preSetRange",value:function(t){t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}();function Vf(t){return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Hf(t,e){return!e||"object"!==Vf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yf(t){return(Yf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xf(t,e){return(Xf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uf=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hf(this,Yf(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xf(t,e)}(e,_f),function(t,e,n){e&&Bf(t.prototype,e),n&&Bf(t,n)}(e,[{key:"preSetRange",value:function(t){t.min=0,t.max<0&&(t.max=0)}}]),e}();function Wf(t){return(Wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Gf(t,e){return!e||"object"!==Wf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qf(t){return(qf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jf(t,e){return(Jf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kf=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gf(this,qf(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jf(t,e)}(e,_f),function(t,e,n){e&&zf(t.prototype,e),n&&zf(t,n)}(e,[{key:"calcInterval",value:function(t){var e=this.getMinInterval();if(t.getHeight()/e<2)return 0;var n,o=this.getRange();for(n=3;!(this.toHeight(o/n)<=e);n+=2);return o/(n-=2)}},{key:"updateGradations",value:function(){this._gradations=[];var t=ag.getInstance(this.kId).getArea(this.getAreaName()),e=this.calcInterval(t);if(!(e<=0)){var n=e/2;do{this._gradations.push(n),this._gradations.push(-n),n+=e}while(n<=this.getMaxValue())}}},{key:"preSetRange",value:function(t){var e=Math.max(Math.abs(t.min),Math.abs(t.max));t.min=-e,t.max=e}}]),e}();function $f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Qf=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&$f(t.prototype,e),n&&$f(t,n)}(t,null,[{key:"createCandlestickDataSource",value:function(t){return new Ae(t)}},{key:"createDataSource",value:function(t,e,n,o){var r=ag.getInstance(o);null===r.getCachedDataSource(e)&&r.setCachedDataSource(e,n(e)),r.setCurrentDataSource(t,e),r.updateData(t,null)}},{key:"createTableComps",value:function(t,e){this.createMainChartComps(t,e),e.kConfig.showVolume&&this.createIndicatorChartComps(t,"VOLUME",e),this.createTimelineComps(t,e)}},{key:"createMainChartComps",value:function(t,e){var n=ag.getInstance(e.kId),o=n.getArea("".concat(t,".charts")),r="".concat(t,".main"),i="".concat(r,"Range"),a=new Ht(r,e);n.addArea(r,a),o.addArea(a);var c=new Gt(i,e);n.addArea(i,c),o.addArea(c);var u=new tn("".concat(r,".main"),e);n.setDataProvider(u.getName(),u),n.setMainIndicator(t,"MA");var s=new jf(r,e);n.setRange(s.getName(),s),s.setPaddingTop(28),s.setPaddingBottom(12);var l=new Hs("".concat(r,".background"),e);n.setPlotter(l.getName(),l),l=new Ln("".concat(r,".grid"),e),n.setPlotter(l.getName(),l),l=new eo("".concat(r,".main"),e),n.setPlotter(l.getName(),l),l=new sl("".concat(r,".decoration"),e),n.setPlotter(l.getName(),l),l=new ol("".concat(r,".info"),e),n.setPlotter(l.getName(),l),l=new Vl("".concat(r,".selection"),e),n.setPlotter(l.getName(),l),l=new En("".concat(r,".tool"),e),n.setPlotter(l.getName(),l),l=new wl("".concat(r,"Range.background"),e),n.setPlotter(l.getName(),l),l=new Xn("".concat(r,"Range.grid"),e),n.setPlotter(l.getName(),l),l=new xl("".concat(r,"Range.main"),e),n.setPlotter(l.getName(),l),l=new Ml("".concat(r,"Range.selection"),e),n.setPlotter(l.getName(),l),l=new Rs("".concat(r,"Range.decoration"),e),n.setPlotter(l.getName(),l)}},{key:"createIndicatorChartComps",value:function(t,e,n){var o=ag.getInstance(n.kId),r=o.getArea("".concat(t,".charts")),i="".concat(t,".indic").concat(r.getNextRowId()),a="".concat(i,"Range"),c=new Tt(i,n);o.addArea(i,c),r.addArea(c);var u=r.getAreaCount()>>1,s=K.getInstance(n.kId).charts.areaHeight;if(s.length>u){var l,f;for(f=0;f<u;f++)(l=r.getAreaAt(f<<1)).setTop(0),l.setBottom(s[f]);c.setTop(0),c.setBottom(s[u])}var h=new Rt(a,n);o.addArea(a,h),r.addArea(h);var p=new Ue("".concat(i,".secondary"),n);if(o.setDataProvider(p.getName(),p),!1!==o.setIndicator(i,e)){var y=new Hs("".concat(i,".background"),n);o.setPlotter(y.getName(),y),y=new Ln("".concat(i,".grid"),n),o.setPlotter(y.getName(),y),y=new Ts("".concat(i,".secondary"),n),o.setPlotter(y.getName(),y),y=new qr("".concat(i,".info"),n),o.setPlotter(y.getName(),y),y=new Vl("".concat(i,".selection"),n),o.setPlotter(y.getName(),y),y=new wl("".concat(i,"Range.background"),n),o.setPlotter(y.getName(),y),y=new xl("".concat(i,"Range.main"),n),o.setPlotter(y.getName(),y),y=new Ml("".concat(i,"Range.selection"),n),o.setPlotter(y.getName(),y)}else o.removeIndicator(i)}},{key:"createTimelineComps",value:function(t,e){var n,o=ag.getInstance(e.kId),r=new yf(t,e);o.setTimeline(r.getName(),r),n=new Wl("".concat(t,".timeline.background"),e),o.setPlotter(n.getName(),n),n=new Ql("".concat(t,".timeline.main"),e),o.setPlotter(n.getName(),n),n=new rf("".concat(t,".timeline.selection"),e),o.setPlotter(n.getName(),n)}}]),t}();function Zf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var th=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&Zf(t.prototype,e),n&&Zf(t,n)}(t,null,[{key:"onMeasuring",value:function(t,e){var n=e.Width;"timeline"===t.getNameObject().getCompAt(2)&&t.setMeasuredDimension(n,22)}}]),t}();function eh(t){return(eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){oh(t,e,n[e])})}return t}function oh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ih(t,e){return!e||"object"!==eh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ah(t){return(ah=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ch(t,e){return(ch=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uh=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ih(this,ah(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ch(t,e)}(e,Qf),function(t,e,n){e&&rh(t.prototype,e),n&&rh(t,n)}(e,null,[{key:"loadTemplate",value:function(t,e,n){var o=n.kId,r=ag.getInstance(o),i=K.getInstance(o),a=new Q(t).getCompAt(0);r.unloadTemplate(a),this.createDataSource(t,e,this.createCandlestickDataSource,o);var c=new ae(a,n);c.setGridColor("Grid1"),r.addFrame(c.getName(),c),r.addArea(c.getName(),c);var u=new Zt("".concat(t,".timeline"),nh({},n,{dockStyle:St.Bottom}));r.addArea(u.getName(),u),c.addArea(u),u.Measuring.on("measure",th.onMeasuring);var s=new pe("".concat(t,".charts"),nh({},n,{dockStyle:St.Fill}));return r.addArea(s.getName(),s),c.addArea(s),this.createTableComps(t,n),r.switchThemeName(a,i.theme),r}}]),e}();function sh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var lh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.kId=e.kId,this.kConfig=e.kConfig,this.kSettings=e.kSettings,this.kState=e.kState,this.kGlobal=e.kGlobal,this.control=e.control,this._data=null,this._charStyle="CandleStick",this._depthData={array:null,asks_count:0,bids_count:0,asks_si:0,asks_ei:0,bids_si:0,bids_ei:0},this.strIsLine=!1}return function(t,e,n){e&&sh(t.prototype,e),n&&sh(t,n)}(t,[{key:"updateDataAndDisplay",value:function(){var t=ag.getInstance(this.kId);t.setCurrentDataSource("f0.k0","".concat(this.kState.periodMS)),t.setNormalMode(),t.redraw("All",!1)}},{key:"setCurrentPeriod",value:function(t){this.kState.periodMS=qe.getPeriodMillisecond(t),this.updateDataAndDisplay()}},{key:"updateDataSource",value:function(t){this._data=t,ag.getInstance(this.kId).updateData("f0.k0",this._data)}},{key:"updateDepth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{asks:[],bids:[]},e=ag.getInstance(this.kId),n=this._depthData;n.array=[];for(var o=0;o<t.asks.length;o++){var r={};r.rate=t.asks[o][0],r.amount=t.asks[o][1],n.array.push(r)}for(var i=0;i<t.bids.length;i++){var a={};a.rate=t.bids[i][0],a.amount=t.bids[i][1],n.array.push(a)}n.asks_count=t.asks.length,n.bids_count=t.bids.length,n.asks_si=n.asks_count-1,n.asks_ei=0,n.bids_si=n.asks_count,n.bids_ei=n.asks_count+n.bids_count-1;for(var c=n.asks_si;c>=n.asks_ei;c--)c===n.asks_si&&void 0!==n.array[c]?n.array[c].amounts=n.array[c].amount:void 0!==n.array[c+1]&&(n.array[c].amounts=n.array[c+1].amounts+n.array[c].amount);for(var u=n.bids_si;u<=n.bids_ei;u++)u===n.bids_si&&void 0!==n.array[u]?n.array[u].amounts=n.array[u].amount:void 0!==n.array[u-1]&&(n.array[u].amounts=n.array[u-1].amounts+n.array[u].amount);e.redraw("All",!1)}},{key:"setIndicator",value:function(t,e){var n=ag.getInstance(this.kId);t=2,this.kConfig.showVolume||(t=1);var o=n.getIndicatorAreaName("f0.k0",t);"NONE"===e?""!==o&&n.removeIndicator(o):""===o?Qf.createIndicatorChartComps("f0.k0",e,{kId:this.kId,kSettings:this.kSettings,kConfig:this.kConfig,kState:this.kState}):n.setIndicator(o,e),n.redraw("All",!0)}},{key:"addIndicator",value:function(t){var e=ag.getInstance(this.kId);e.addIndicator(t),e.redraw("All",!0)}},{key:"removeIndicator",value:function(){var t=ag.getInstance(this.kId),e=t.getIndicatorAreaName(2);t.removeIndicator(e),t.redraw("All",!0)}}]),t}();function fh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var hh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._exprEnv=new Ti,this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}return function(t,e,n){e&&fh(t.prototype,e),n&&fh(t,n)}(t,[{key:"addParameter",value:function(t){this._params.push(t)}},{key:"addAssign",value:function(t){this._assigns.push(t)}},{key:"addOutput",value:function(t){this._outputs.push(t)}},{key:"getParameterCount",value:function(){return this._params.length}},{key:"getParameterAt",value:function(t){return this._params[t]}},{key:"getOutputCount",value:function(){return this._outputs.length}},{key:"getOutputAt",value:function(t){return this._outputs[t]}},{key:"clear",value:function(){var t,e;for(this._exprEnv.setFirstIndex(-1),e=this._assigns.length,t=0;t<e;t++)this._assigns[t].clear();for(e=this._outputs.length,t=0;t<e;t++)this._outputs[t].clear()}},{key:"reserve",value:function(t){var e,n;for(this._rid++,n=this._assigns.length,e=0;e<n;e++)this._assigns[e].reserve(this._rid,t);for(n=this._outputs.length,e=0;e<n;e++)this._outputs[e].reserve(this._rid,t)}},{key:"execute",value:function(t,e){if(!(e<0)){this._exprEnv.setDataSource(t),Ti.set(this._exprEnv);try{var n,o;for(o=this._assigns.length,n=0;n<o;n++)this._assigns[n].assign(e);for(o=this._outputs.length,n=0;n<o;n++)this._outputs[n].assign(e);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(e)}catch(t){if(this._exprEnv.getFirstIndex()>=0)throw t}}}},{key:"getParameters",value:function(){var t,e=[],n=this._params.length;for(t=0;t<n;t++)e.push(this._params[t].getValue());return e}},{key:"setParameters",value:function(t){if(t instanceof Array&&t.length===this._params.length)for(var e in this._params)this._params[e].setValue(t[e])}}]),t}();function ph(t){return(ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bh(t,e){return!e||"object"!==ph(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dh(t){return(dh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gh(t,e){return(gh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=bh(this,dh(e).call(this));var n=new _u("N",2,120,26);t.addParameter(n);var o=new Ni("REF_CLOSE_1",new Au(new Yi,new qi(1)));t.addAssign(o);var r=new yu("BR",new Uc(new pa(new fs(new Fc(new qi(0),new is(new Ka,o)),n),new fs(new Fc(new qi(0),new is(o,new _c)),n)),new qi(100)));t.addOutput(r);var i=new yu("AR",new Uc(new pa(new fs(new is(new Ka,new uu),n),new fs(new is(new uu,new _c),n)),new qi(100)));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gh(t,e)}(e,hh),function(t,e,n){e&&yh(t.prototype,e),n&&yh(t,n)}(e,[{key:"getName",value:function(){return"BRAR"}}]),e}();function vh(t){return(vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wh(t,e){return!e||"object"!==vh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oh(t){return(Oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sh(t,e){return(Sh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ph=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=wh(this,Oh(e).call(this));var n=new _u("N",2,500,20);t.addParameter(n);var o=new Ni("STD_CLOSE_N",new Zu(new Yi,n));t.addAssign(o);var r=new yu("BOLL",new Ac(new Yi,n));t.addOutput(r);var i=new yu("UB",new _i(r,new Uc(new qi(2),o)));t.addOutput(i);var a=new yu("LB",new is(r,new Uc(new qi(2),o)));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sh(t,e)}(e,hh),function(t,e,n){e&&_h(t.prototype,e),n&&_h(t,n)}(e,[{key:"getName",value:function(){return"BOLL"}}]),e}();function kh(t){return(kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xh(t,e){return!e||"object"!==kh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ch(t){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Th(t,e){return(Th=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ih=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=xh(this,Ch(e).call(this));var n=new _u("N1",2,60,10),o=new _u("N2",2,250,50),r=new _u("M",2,100,10);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new yu("DIF",new is(new Ac(new Yi,n),new Ac(new Yi,o)));t.addOutput(i);var a=new yu("DIFMA",new Ac(i,r));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Th(t,e)}(e,hh),function(t,e,n){e&&jh(t.prototype,e),n&&jh(t,n)}(e,[{key:"getName",value:function(){return"DMA"}}]),e}();function Eh(t){return(Eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ah(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mh(t,e){return!e||"object"!==Eh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dh(t){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rh(t,e){return(Rh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Mh(this,Dh(e).call(this));var n=new _u("N",2,90,14),o=new _u("MM",2,60,6);t.addParameter(n),t.addParameter(o);var r=new Ni("MTR",new Aa(new Fc(new Fc(new is(new Ka,new _c),new ui(new is(new Ka,new Au(new Yi,new qi(1))))),new ui(new is(new Au(new Yi,new qi(1)),new _c))),n));t.addAssign(r);var i=new Ni("HD",new is(new Ka,new Au(new Ka,new qi(1))));t.addAssign(i);var a=new Ni("LD",new is(new Au(new _c,new qi(1)),new _c));t.addAssign(a);var c=new Ni("DMP",new Aa(new uc(new ji(new Fa(i,new qi(0)),new Fa(i,a)),i,new qi(0)),n));t.addAssign(c);var u=new Ni("DMM",new Aa(new uc(new ji(new Fa(a,new qi(0)),new Fa(a,i)),a,new qi(0)),n));t.addAssign(u);var s=new yu("PDI",new Uc(new pa(c,r),new qi(100)));t.addOutput(s);var l=new yu("MDI",new Uc(new pa(u,r),new qi(100)));t.addOutput(l);var f=new yu("ADX",new Aa(new Uc(new pa(new ui(new is(l,s)),new _i(l,s)),new qi(100)),o));t.addOutput(f);var h=new yu("ADXR",new Aa(f,o));return t.addOutput(h),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rh(t,e)}(e,hh),function(t,e,n){e&&Ah(t.prototype,e),n&&Ah(t,n)}(e,[{key:"getName",value:function(){return"DMI"}}]),e}();function Lh(t){return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vh(t,e){return!e||"object"!==Lh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bh(t){return(Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hh(t,e){return(Hh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Vh(this,Bh(e).call(this));var n=new _u("M1",2,1e3,7),o=new _u("M2",2,1e3,30),r=new _u("M3",2,1e3,0),i=new _u("M4",2,1e3,0),a=new _u("M5",2,1e3,0),c=new _u("M6",2,1e3,0);return t.addParameter(n),t.addParameter(o),t.addParameter(r),t.addParameter(i),t.addParameter(a),t.addParameter(c),t.addOutput(new ju("EMA",new _a(new Yi,n))),t.addOutput(new ju("EMA",new _a(new Yi,o))),t.addOutput(new ju("EMA",new _a(new Yi,r))),t.addOutput(new ju("EMA",new _a(new Yi,i))),t.addOutput(new ju("EMA",new _a(new Yi,a))),t.addOutput(new ju("EMA",new _a(new Yi,c))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hh(t,e)}(e,hh),function(t,e,n){e&&Fh(t.prototype,e),n&&Fh(t,n)}(e,[{key:"getName",value:function(){return"EMA"}}]),e}();function Xh(t){return(Xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wh(t,e){return!e||"object"!==Xh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zh(t){return(zh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gh(t,e){return(Gh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qh=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wh(this,zh(e).call(this));var n=new _u("N",2,90,14),o=new _u("M",2,60,9);t.addParameter(n),t.addParameter(o);var r=new Ni("VOLUME",new pa(new Ac(new gs,n),new gs));t.addAssign(r);var i=new Ni("MID",new Uc(new pa(new is(new _i(new Ka,new _c),new Au(new _i(new Ka,new _c),new qi(1))),new _i(new Ka,new _c)),new qi(100)));t.addAssign(i);var a=new yu("EMV",new Ac(new pa(new Uc(i,new Uc(r,new is(new Ka,new _c))),new Ac(new is(new Ka,new _c),n)),n));t.addOutput(a);var c=new yu("MAEMV",new Ac(a,o));return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gh(t,e)}(e,hh),function(t,e,n){e&&Uh(t.prototype,e),n&&Uh(t,n)}(e,[{key:"getName",value:function(){return"EMV"}}]),e}();function Jh(t){return(Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kh(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $h(t,e){return!e||"object"!==Jh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qh(t){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zh(t,e){return(Zh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=$h(this,Qh(e).call(this));var n=new _u("M1",2,1e3,60);return t.addParameter(n),t.addOutput(new yu("HIGH",new Ka,yu.outputStyle.None)),t.addOutput(new yu("LOW",new _c,yu.outputStyle.None)),t.addOutput(new yu("CLOSE",new Yi,yu.outputStyle.Line,"Indicator0")),t.addOutput(new ju("MA",new Ac(new Yi,n),yu.outputStyle.Line,"Indicator1")),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zh(t,e)}(e,hh),function(t,e,n){e&&Kh(t.prototype,e),n&&Kh(t,n)}(e,[{key:"getName",value:function(){return"CLOSE"}}]),e}();function ep(t){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function np(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function op(t,e){return!e||"object"!==ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rp(t){return(rp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ip(t,e){return(ip=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ap=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=op(this,rp(e).call(this));var n=new _u("N",2,90,9),o=new _u("M1",2,30,3),r=new _u("M2",2,30,3);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Ni("HHV",new Ua(new Ka,n));t.addAssign(i);var a=new Ni("LLV",new yc(new _c,n));t.addAssign(a);var c=new Ni("RSV",new Uc(new pa(new is(new Yi,a),new is(i,a)),new qi(100)));t.addAssign(c);var u=new yu("K",new zu(c,o,new qi(1)));t.addOutput(u);var s=new yu("D",new zu(u,r,new qi(1)));t.addOutput(s);var l=new yu("J",new is(new Uc(u,new qi(3)),new Uc(s,new qi(2))));return t.addOutput(l),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ip(t,e)}(e,hh),function(t,e,n){e&&np(t.prototype,e),n&&np(t,n)}(e,[{key:"getName",value:function(){return"KDJ"}}]),e}();function cp(t){return(cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function up(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sp(t,e){return!e||"object"!==cp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lp(t){return(lp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fp(t,e){return(fp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=sp(this,lp(e).call(this));var n=new _u("SHORT",2,200,12),o=new _u("LONG",2,200,26),r=new _u("MID",2,200,9);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new yu("DIF",new is(new _a(new Yi,n),new _a(new Yi,o)));t.addOutput(i);var a=new yu("DEA",new _a(i,r));t.addOutput(a);var c=new yu("MACD",new Uc(new is(i,a),new qi(2)),yu.outputStyle.MACDStick);return t.addOutput(c),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fp(t,e)}(e,hh),function(t,e,n){e&&up(t.prototype,e),n&&up(t,n)}(e,[{key:"getName",value:function(){return"MACD"}}]),e}();function pp(t){return(pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function bp(t,e){return!e||"object"!==pp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dp(t){return(dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gp(t,e){return(gp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mp=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=bp(this,dp(e).call(this)),t.forEach(function(t,e){var o=new _u("M".concat(e),2,1e3,t);n.addParameter(o),n.addOutput(new ju("MA",new Ac(new Yi,o)))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gp(t,e)}(e,hh),function(t,e,n){e&&yp(t.prototype,e),n&&yp(t,n)}(e,[{key:"getName",value:function(){return"MA"}}]),e}();function vp(t){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wp(t,e){return!e||"object"!==vp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Op(t){return(Op=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sp(t,e){return(Sp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=wp(this,Op(e).call(this));var n=new _u("N",2,120,12),o=new _u("M",2,60,6);t.addParameter(n),t.addParameter(o);var r=new yu("MTM",new is(new Yi,new Au(new Yi,n)));t.addOutput(r);var i=new yu("MTMMA",new Ac(r,o));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sp(t,e)}(e,hh),function(t,e,n){e&&_p(t.prototype,e),n&&_p(t,n)}(e,[{key:"getName",value:function(){return"MTM"}}]),e}();function kp(t){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xp(t,e){return!e||"object"!==kp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cp(t){return(Cp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tp(t,e){return(Tp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ip=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=xp(this,Cp(e).call(this));var n=new _u("M",2,100,30);t.addParameter(n);var o=new Ni("REF_CLOSE_1",new Au(new Yi,new qi(1)));t.addAssign(o);var r=new Ni("VA",new uc(new Fa(new Yi,o),new gs,new Kc(new gs)));t.addAssign(r);var i=new yu("OBV",new fs(new uc(new ja(new Yi,o),new qi(0),r),new qi(0)));t.addOutput(i);var a=new yu("MAOBV",new Ac(i,n));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tp(t,e)}(e,hh),function(t,e,n){e&&jp(t.prototype,e),n&&jp(t,n)}(e,[{key:"getName",value:function(){return"OBV"}}]),e}();function Ep(t){return(Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ap(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Mp(t,e){return!e||"object"!==Ep(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dp(t){return(Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rp(t,e){return(Rp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Np=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Mp(this,Dp(e).call(this));var n=new _u("N",2,100,12),o=new _u("M",2,100,6);t.addParameter(n),t.addParameter(o);var r=new yu("PSY",new Uc(new pa(new ca(new Fa(new Yi,new Au(new Yi,new qi(1))),n),n),new qi(100)));t.addOutput(r);var i=new yu("PSYMA",new Ac(r,o));return t.addOutput(i),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rp(t,e)}(e,hh),function(t,e,n){e&&Ap(t.prototype,e),n&&Ap(t,n)}(e,[{key:"getName",value:function(){return"PSY"}}]),e}();function Lp(t){return(Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vp(t,e){return!e||"object"!==Lp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bp(t){return(Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hp(t,e){return(Hp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Vp(this,Bp(e).call(this));var n=new _u("N",2,120,12),o=new _u("M",2,60,6);t.addParameter(n),t.addParameter(o);var r=new Ni("REF_CLOSE_N",new Au(new Yi,n));t.addAssign(r);var i=new yu("ROC",new Uc(new pa(new is(new Yi,r),r),new qi(100)));t.addOutput(i);var a=new yu("MAROC",new Ac(i,o));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hp(t,e)}(e,hh),function(t,e,n){e&&Fp(t.prototype,e),n&&Fp(t,n)}(e,[{key:"getName",value:function(){return"ROC"}}]),e}();function Xp(t){return(Xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Up(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wp(t,e){return!e||"object"!==Xp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zp(t){return(zp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gp(t,e){return(Gp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qp=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Wp(this,zp(e).call(this));var n=new _u("N1",2,120,6),o=new _u("N2",2,250,12),r=new _u("N3",2,500,24);t.addParameter(n),t.addParameter(o),t.addParameter(r);var i=new Ni("LC",new Au(new Yi,new qi(1)));t.addAssign(i);var a=new Ni("CLOSE_LC",new is(new Yi,i));return t.addAssign(a),t.addOutput(new yu("RSI1",new Uc(new pa(new zu(new Fc(a,new qi(0)),n,new qi(1)),new zu(new ui(a),n,new qi(1))),new qi(100)))),t.addOutput(new yu("RSI2",new Uc(new pa(new zu(new Fc(a,new qi(0)),o,new qi(1)),new zu(new ui(a),o,new qi(1))),new qi(100)))),t.addOutput(new yu("RSI3",new Uc(new pa(new zu(new Fc(a,new qi(0)),r,new qi(1)),new zu(new ui(a),r,new qi(1))),new qi(100)))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gp(t,e)}(e,hh),function(t,e,n){e&&Up(t.prototype,e),n&&Up(t,n)}(e,[{key:"getName",value:function(){return"RSI"}}]),e}();function Jp(t){return(Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $p(t,e){return!e||"object"!==Jp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qp(t){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zp(t,e){return(Zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ty=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=$p(this,Qp(e).call(this));var n=new qi(4),o=new qi(2),r=new qi(2),i=new qi(20);return t.addOutput(new yu("SAR",new Vu(n,o,r,i),yu.outputStyle.SARPoint)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zp(t,e)}(e,hh),function(t,e,n){e&&Kp(t.prototype,e),n&&Kp(t,n)}(e,[{key:"getName",value:function(){return"SAR"}}]),e}();function ey(t){return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ny(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function oy(t,e){return!e||"object"!==ey(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ry(t){return(ry=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iy(t,e){return(iy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ay=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=oy(this,ry(e).call(this));var n=new _u("N",3,100,14),o=new _u("M",3,100,14),r=new _u("P1",2,50,3),i=new _u("P2",2,50,3);t.addParameter(n),t.addParameter(o),t.addParameter(r),t.addParameter(i);var a=new Ni("LC",new Au(new Yi,new qi(1)));t.addAssign(a);var c=new Ni("CLOSE_LC",new is(new Yi,a));t.addAssign(c);var u=new Ni("RSI",new Uc(new pa(new zu(new Fc(c,new qi(0)),n,new qi(1)),new zu(new ui(c),n,new qi(1))),new qi(100)));t.addAssign(u);var s=new yu("STOCHRSI",new Uc(new pa(new Ac(new is(u,new yc(u,o)),r),new Ac(new is(new Ua(u,o),new yc(u,o)),r)),new qi(100)));return t.addOutput(s),t.addOutput(new ju("MA",new Ac(s,i))),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iy(t,e)}(e,hh),function(t,e,n){e&&ny(t.prototype,e),n&&ny(t,n)}(e,[{key:"getName",value:function(){return"StochRSI"}}]),e}();function cy(t){return(cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sy(t,e){return!e||"object"!==cy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ly(t){return(ly=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fy(t,e){return(fy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hy=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=sy(this,ly(e).call(this));var n=new _u("N",2,100,12),o=new _u("M",2,100,9);t.addParameter(n),t.addParameter(o);var r=new Ni("MTR",new _a(new _a(new _a(new Yi,n),n),n));t.addAssign(r);var i=new yu("TRIX",new Uc(new pa(new is(r,new Au(r,new qi(1))),new Au(r,new qi(1))),new qi(100)));t.addOutput(i);var a=new yu("MATRIX",new Ac(i,o));return t.addOutput(a),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fy(t,e)}(e,hh),function(t,e,n){e&&uy(t.prototype,e),n&&uy(t,n)}(e,[{key:"getName",value:function(){return"TRIX"}}]),e}();function py(t){return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function by(t,e){return!e||"object"!==py(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dy(t){return(dy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gy(t,e){return(gy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var my=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=by(this,dy(e).call(this));var n=new _u("M1",2,500,5),o=new _u("M2",2,500,10);t.addParameter(n),t.addParameter(o);var r=new yu("VOLUME",new gs,yu.outputStyle.VolumeStick,"Text4");return t.addOutput(r),t.addOutput(new ju("MA",new Ac(r,n),yu.outputStyle.Line,"Indicator0")),t.addOutput(new ju("MA",new Ac(r,o),yu.outputStyle.Line,"Indicator1")),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gy(t,e)}(e,hh),function(t,e,n){e&&yy(t.prototype,e),n&&yy(t,n)}(e,[{key:"getName",value:function(){return"VOLUME"}}]),e}();function vy(t){return(vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wy(t,e){return!e||"object"!==vy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oy(t){return(Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sy(t,e){return(Sy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Py=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=wy(this,Oy(e).call(this));var n=new _u("N",2,100,26),o=new _u("M",2,100,6);t.addParameter(n),t.addParameter(o);var r=new Ni("REF_CLOSE_1",new Au(new Yi,new qi(1)));t.addAssign(r);var i=new Ni("TH",new fs(new uc(new Fa(new Yi,r),new gs,new qi(0)),n));t.addAssign(i);var a=new Ni("TL",new fs(new uc(new jc(new Yi,r),new gs,new qi(0)),n));t.addAssign(a);var c=new Ni("TQ",new fs(new uc(new ja(new Yi,r),new gs,new qi(0)),n));t.addAssign(c);var u=new yu("VR",new Uc(new pa(new _i(new Uc(i,new qi(2)),c),new _i(new Uc(a,new qi(2)),c)),new qi(100)));t.addOutput(u);var s=new yu("MAVR",new Ac(u,o));return t.addOutput(s),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sy(t,e)}(e,hh),function(t,e,n){e&&_y(t.prototype,e),n&&_y(t,n)}(e,[{key:"getName",value:function(){return"VR"}}]),e}();function ky(t){return(ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function xy(t,e){return!e||"object"!==ky(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cy(t){return(Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ty(t,e){return(Ty=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Iy=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=xy(this,Cy(e).call(this));var n=new _u("N",2,100,10),o=new _u("N1",2,100,6);t.addParameter(n),t.addParameter(o);var r=new Ni("HHV",new Ua(new Ka,n));t.addAssign(r);var i=new Ni("HHV1",new Ua(new Ka,o));t.addAssign(i);var a=new Ni("LLV",new yc(new _c,n));t.addAssign(a);var c=new Ni("LLV1",new yc(new _c,o));t.addAssign(c);var u=new yu("WR1",new Uc(new pa(new is(r,new Yi),new is(r,a)),new qi(100)));t.addOutput(u);var s=new yu("WR2",new Uc(new pa(new is(i,new Yi),new is(i,c)),new qi(100)));return t.addOutput(s),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ty(t,e)}(e,hh),function(t,e,n){e&&jy(t.prototype,e),n&&jy(t,n)}(e,[{key:"getName",value:function(){return"WR"}}]),e}();function Ey(t){return(Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ay(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function My(t,e){return!e||"object"!==Ey(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dy(t){return(Dy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ry(t,e){return(Ry=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ny=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=My(this,Dy(e).call(this));var n=new yu("Index",new Ss,yu.outputStyle.Line,"Indicator5");return t.addOutput(n),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ry(t,e)}(e,hh),function(t,e,n){e&&Ay(t.prototype,e),n&&Ay(t,n)}(e,[{key:"getName",value:function(){return"IXPE"}}]),e}();function Ly(t){return(Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vy(t,e){return!e||"object"!==Ly(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function By(t){return(By=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hy(t,e){return(Hy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yy=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Vy(this,By(e).call(this,t))).kId=n,o.pos={index:-1,value:-1},o.state=dt.Hide,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hy(t,e)}(e,tt),function(t,e,n){e&&Fy(t.prototype,e),n&&Fy(t,n)}(e,[{key:"getChartObjects",value:function(){var t=ag.getInstance(this.kId),e=t.getDataSource("f0.k0");if(null===e||!qe.isInstance(e,Ae))return null;var n=t.getTimeline("f0.k0");if(null===n)return null;var o=t.getRange("f0.k0.main");return null===o?null:{pMgr:t,pCDS:e,pTimeline:n,pRange:o}}},{key:"setPosXY",value:function(t,e){var n=this.getChartObjects(),o=n.pTimeline.toIndex(t),r=n.pRange.toValue(e),i=this.snapValue(o,r);null!==i&&(r=i),this.setPosIV(o,r)}},{key:"setPosXYNoSnap",value:function(t,e){var n=this.getChartObjects(),o=n.pTimeline.toIndex(t),r=n.pRange.toValue(e);this.setPosIV(o,r)}},{key:"setPosIV",value:function(t,e){this.pos={index:t,value:e}}},{key:"getPosXY",value:function(){var t=this.getChartObjects();return{x:t.pTimeline.toItemCenter(this.pos.index),y:t.pRange.toY(this.pos.value)}}},{key:"getPosIV",value:function(){return{i:this.pos.index,v:this.pos.value}}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"trySelect",value:function(t,e){var n=this.getPosXY();return!(t<n.x-4||t>n.x+4||e<n.y-4||e>n.y+4)&&(this.setState(dt.Highlight),!0)}},{key:"snapValue",value:function(t,e){var n=this.getChartObjects(),o=null,r=Math.floor(n.pTimeline.getFirstIndex()),i=Math.floor(n.pTimeline.getLastIndex());if(t<r||t>i)return o;var a=n.pRange.toY(e),c=n.pCDS.getDataAt(t);if(null===c||void 0===c)return o;var u=null;u=t>0?n.pCDS.getDataAt(t-1):n.pCDS.getDataAt(t);var s=n.pMgr.getChartStyle(n.pCDS.getFrameName()),l=n.pRange.toY(c.open),f=n.pRange.toY(c.high),h=n.pRange.toY(c.low),p=n.pRange.toY(c.close);"CandleStickHLC"===s&&(l=n.pRange.toY(u.close));var y=Math.abs(l-a),b=Math.abs(f-a),d=Math.abs(h-a),g=Math.abs(p-a);return y<=b&&y<=d&&y<=g&&y<6&&(o=c.open),b<=y&&b<=d&&b<=g&&b<6&&(o=c.high),d<=y&&d<=b&&d<=g&&d<6&&(o=c.low),g<=y&&g<=b&&g<=d&&g<6&&(o=c.close),o}}]),e}();function Xy(t){return(Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wy(t,e){return!e||"object"!==Xy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zy(t){return(zy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gy(t,e){return(Gy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qy=function(t){function e(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wy(this,zy(e).call(this,t))).kId=o.kId,n.drawer=null,n.state=gt.BeforeDraw,n.points=[],n.step=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gy(t,e)}(e,tt),function(t,e,n){e&&Uy(t.prototype,e),n&&Uy(t,n)}(e,[{key:"getChartObjects",value:function(){var t=ag.getInstance(this.kId),e=t.getDataSource("f0.k0");if(null===e||!qe.isInstance(e,Ae))return null;var n=t.getTimeline("f0.k0");if(null===n)return null;var o=t.getArea("f0.k0.main");if(null===o)return null;var r=t.getRange("f0.k0.main");return null===r?null:{pMgr:t,pCDS:e,pTimeline:n,pArea:o,pRange:r}}},{key:"isValidMouseXY",value:function(t,e){var n=this.getChartObjects(),o=n.pArea.getLeft(),r=n.pArea.getTop(),i=n.pArea.getRight(),a=n.pArea.getBottom();return!(t<o||t>i||e<r||e>a)}},{key:"getPlotter",value:function(){return this.drawer}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"addPoint",value:function(t){this.points.push(t)}},{key:"getPoint",value:function(t){return this.points[t]}},{key:"acceptMouseMoveEvent",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===gt.BeforeDraw?this.setBeforeDrawPos(t,e):this.state===gt.Draw?this.setDrawPos(t,e):this.state===gt.AfterDraw&&this.setAfterDrawPos(t,e),!0)}},{key:"acceptMouseDownEvent",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===gt.BeforeDraw?(this.setDrawPos(t,e),this.setState(gt.Draw)):this.state===gt.Draw?(this.setAfterDrawPos(t,e),0===this.step&&this.setState(gt.AfterDraw)):this.state===gt.AfterDraw&&this.trySelect(t,e)&&this.setState(gt.Draw),this.oldx=t,this.oldy=e,!0)}},{key:"acceptMouseDownMoveEvent",value:function(t,e){if(!1===this.isValidMouseXY(t,e))return!1;for(var n in this.points)if(this.points[n].state==dt.Highlight)return void this.setDrawPos(t,e);var o=this.getChartObjects(),r=o.pTimeline.getItemWidth();if(Math.abs(t-this.oldx)<r&&0===Math.abs(e-this.oldy))return!0;var i=o.pTimeline.toIndex(this.oldx),a=o.pRange.toValue(this.oldy),c=o.pTimeline.toIndex(t),u=o.pRange.toValue(e);this.oldx=t,this.oldy=e;var s=c-i,l=u-a;for(var f in this.points)this.points[f].pos.index+=s,this.points[f].pos.value+=l;return!0}},{key:"acceptMouseUpEvent",value:function(t,e){return!1!==this.isValidMouseXY(t,e)&&(this.state===gt.Draw&&(this.setAfterDrawPos(t,e),0===this.step&&this.setState(gt.AfterDraw)),this.getChartObjects().pMgr.getSelectToolObjcet()&&(this.setAfterDrawPos(t,e),this.setState(gt.Draw)),!0)}},{key:"setBeforeDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e),this.points[n].setState(dt.Show)}},{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].getState()===dt.Highlight&&this.points[n].setPosXY(t,e)}},{key:"setAfterDrawPos",value:function(t,e){for(var n in 0!==this.step&&(this.step-=1),this.points)this.points[n].setState(dt.Hide);0===this.step&&this.getChartObjects().pMgr.setNormalMode()}},{key:"trySelect",value:function(t,e){var n=!1;for(var o in this.points)if(this.points[o].trySelect(t,e)){this.points[o].setState(dt.Highlight),n=!0;break}return!0===n?(this.select(),!0):(this.unselect(),!1)}},{key:"select",value:function(){for(var t in this.points)this.points[t].getState()===dt.Hide&&this.points[t].setState(dt.Show)}},{key:"unselect",value:function(){for(var t in this.setState(gt.AfterDraw),this.points)this.points[t].getState()!==dt.Hide&&this.points[t].setState(dt.Hide)}},{key:"calcDistance",value:function(t,e,n){var o=t.getPosXY().x,r=t.getPosXY().y,i=e.getPosXY().x,a=e.getPosXY().y,c=n.getPosXY().x,u=n.getPosXY().y,s=o-c,l=r-u,f=i-c,h=a-u;return Math.abs(s*h-l*f)/Math.sqrt(Math.pow(i-o,2)+Math.pow(a-r,2))}},{key:"calcGap",value:function(t,e,n){var o=t.sx,r=t.sy,i=t.ex,a=t.ey,c=o-e,u=r-n,s=i-e,l=a-n;return Math.abs(c*l-u*s)/Math.sqrt(Math.pow(i-o,2)+Math.pow(a-r,2))}},{key:"isWithRect",value:function(t,e,n){var o=t.getPosXY().x,r=t.getPosXY().y,i=e.getPosXY().x,a=e.getPosXY().y,c=n.getPosXY().x,u=n.getPosXY().y;return o>i?(o+=4,i-=4):(o-=4,i+=4),r>a?(r+=4,a-=4):(r-=4,a+=4),o<=c&&i>=c&&r<=u&&a>=u||(o>=c&&i<=c&&r<=u&&a>=u||(o<=c&&i>=c&&r>=u&&a<=u||o>=c&&i<=c&&r>=u&&a<=u))}}]),e}();function Jy(t){return(Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ky(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $y(t,e){return!e||"object"!==Jy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qy(t,e,n){return(Qy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zy(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Zy(t){return(Zy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tb(t,e){return(tb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var eb=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=$y(this,Zy(e).call(this,t,n))).addPoint(new Yy(t,o.kId)),o.addPoint(new Yy(t,o.kId)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tb(t,e)}(e,qy),function(t,e,n){e&&Ky(t.prototype,e),n&&Ky(t,n)}(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=1,Qy(Zy(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(dt.Show),this.getPoint(1).setState(dt.Highlight)}}]),e}();function nb(t){return(nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ob(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rb(t,e,n){return(rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ib(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ib(t){return(ib=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ab(t,e){return(ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ub=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==nb(e)&&"function"!=typeof e?cb(t):e}(this,ib(e).call(this,t,n))).drawer=new Pr(t,cb(cb(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ab(t,e)}(e,eb),function(t,e,n){e&&ob(t.prototype,e),n&&ob(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===rb(ib(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Yy("f0.k0",this.kId);return o.setPosXY(t,n),!1!==this.isWithRect(this.getPoint(0),this.getPoint(1),o)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0))}}]),e}();function sb(t){return(sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lb(t){return(lb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fb(t,e){return(fb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var pb=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==sb(e)&&"function"!=typeof e?hb(t):e}(this,lb(e).call(this,t,n))).drawer=new co(t,hb(hb(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fb(t,e)}(e,ub),e}();function yb(t){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function db(t,e,n){return(db="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function gb(t){return(gb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mb(t,e){return(mb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var _b=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==yb(e)&&"function"!=typeof e?vb(t):e}(this,gb(e).call(this,t,n))).drawer=new ho(t,vb(vb(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mb(t,e)}(e,eb),function(t,e,n){e&&bb(t.prototype,e),n&&bb(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===db(gb(e.prototype),"trySelect",this).call(this,t,n))return!0;new Yy("f0.k0",this.kId).setPosXY(t,n);this.getPoint(0).getPosXY().x;for(var o=this.getPoint(0).getPosXY().y,r=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),i=[100,87.5,75,62.5,50,37.5,25,12.5,0],a=0;a<i.length;a++){var c=o+(100-i[a])/100*(r-o);if(c<n+4&&c>n-4)return this.select(),!0}return!1}}]),e}();function wb(t){return(wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ob(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Sb(t,e){return!e||"object"!==wb(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pb(t,e,n){return(Pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function kb(t){return(kb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jb(t,e){return(jb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xb=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Sb(this,kb(e).call(this,t,n))).addPoint(new Yy(t,o.kId)),o.addPoint(new Yy(t,o.kId)),o.addPoint(new Yy(t,o.kId)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jb(t,e)}(e,qy),function(t,e,n){e&&Ob(t.prototype,e),n&&Ob(t,n)}(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=2,Pb(kb(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(dt.Show),this.getPoint(1).setState(dt.Show),this.getPoint(2).setState(dt.Highlight)}},{key:"setAfterDrawPos",value:function(t,e){if(0!==this.step&&(this.step-=1),0===this.step)for(var n in this.points)this.points[n].setState(dt.Hide);else this.getPoint(0).setState(dt.Show),this.getPoint(1).setState(dt.Highlight),this.getPoint(2).setState(dt.Show);0===this.step&&this.getChartObjects().pMgr.setNormalMode()}}]),e}();function Cb(t){return(Cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ib(t,e,n){return(Ib="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Eb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Eb(t){return(Eb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ab(t,e){return(Ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Db=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Cb(e)&&"function"!=typeof e?Mb(t):e}(this,Eb(e).call(this,t,n))).drawer=new Eo(t,Mb(Mb(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ab(t,e)}(e,xb),function(t,e,n){e&&Tb(t.prototype,e),n&&Tb(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Ib(Eb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s={sx:o,sy:r,ex:c,ey:u},l={sx:i,sy:a,ex:o-(o-i+(o-c)),ey:r-(r-a+(r-u))};return(s.ex>s.sx&&t>s.sx-4||s.ex<s.sx&&t<s.sx+4||l.ex>l.sx&&t>l.sx-4||l.ex<l.sx&&t<l.sx+4)&&(!(this.calcGap(s,t,n)>4&&this.calcGap(l,t,n)>4)&&(this.select(),!0))}}]),e}();function Rb(t){return(Rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lb(t,e,n){return(Lb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Fb(t){return(Fb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vb(t,e){return(Vb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Hb=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Rb(e)&&"function"!=typeof e?Bb(t):e}(this,Fb(e).call(this,t,n))).drawer=new ko(t,Bb(Bb(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vb(t,e)}(e,xb),function(t,e,n){e&&Nb(t.prototype,e),n&&Nb(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Lb(Fb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s={sx:o,sy:r,ex:c,ey:u},l={sx:i,sy:a,ex:o-(o-i+(o-c)),ey:r-(r-a+(r-u))};return!(this.calcGap(s,t,n)>4&&this.calcGap(l,t,n)>4)}}]),e}();function Yb(t){return(Yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ub(t,e,n){return(Ub="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Wb(t){return(Wb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zb(t,e){return(zb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var qb=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Yb(e)&&"function"!=typeof e?Gb(t):e}(this,Wb(e).call(this,t,n))).drawer=new Lo(t,Gb(Gb(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zb(t,e)}(e,eb),function(t,e,n){e&&Xb(t.prototype,e),n&&Xb(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Ub(Wb(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Yy("f0.k0",this.kId);o.setPosXY(t,n);for(var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,a=this.getPoint(1).getPosXY().x,c=this.getPoint(1).getPosXY().y,u=this.getChartObjects(),s={left:u.pArea.getLeft(),top:u.pArea.getTop(),right:u.pArea.getRight(),bottom:u.pArea.getBottom()},l=[0,38.2,50,61.8],f=0;f<l.length;f++){var h={x:r,y:i},p={x:a,y:i+(100-l[f])/100*(c-i)},y=this.getRectCrossPt(s,h,p),b=Math.pow(y[0].x-r,2)+Math.pow(y[0].y-i,2)>Math.pow(y[0].x-a,2)+Math.pow(y[0].y-c,2)?{x:y[0].x,y:y[0].y}:{x:y[1].x,y:y[1].y};if(!(b.x>r&&t<r)&&!(b.x<r&&t>r)){var d=new Yy("f0.k0",this.kId);d.setPosXY(r,i);var g=new Yy("f0.k0",this.kId);if(g.setPosXY(b.x,b.y),!(this.calcDistance(d,g,o)>4))return this.select(),!0}}return!1}}]),e}();function Jb(t){return(Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $b(t,e,n){return($b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qb(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Qb(t){return(Qb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zb(t,e){return(Zb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ed=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Jb(e)&&"function"!=typeof e?td(t):e}(this,Qb(e).call(this,t,n))).drawer=new Yo(t,td(td(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zb(t,e)}(e,eb),function(t,e,n){e&&Kb(t.prototype,e),n&&Kb(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===$b(Qb(e.prototype),"trySelect",this).call(this,t,n))return!0;new Yy("f0.k0",this.kId).setPosXY(t,n);this.getPoint(0).getPosXY().x;for(var o=this.getPoint(0).getPosXY().y,r=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),i=0;i<bt.length;i++){var a=o+(100-bt[i])/100*(r-o);if(a<n+4&&a>n-4)return this.select(),!0}return!1}}]),e}();function nd(t){return(nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function od(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rd(t,e,n){return(rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=id(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function id(t){return(id=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ad(t,e){return(ad=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ud=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==nd(e)&&"function"!=typeof e?cd(t):e}(this,id(e).call(this,t,n))).drawer=new qo(t,cd(cd(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ad(t,e)}(e,eb),function(t,e,n){e&&od(t.prototype,e),n&&od(t,n)}(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===dt.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===dt.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"trySelect",value:function(t,n){if(!0===rd(id(e.prototype),"trySelect",this).call(this,t,n))return!0;new Yy("f0.k0",this.kId).setPosXY(t,n);var o=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n>o+4||n<o-4)&&(!(i>r&&t<r-4)&&(!(i<r&&t>r+4)&&(this.select(),!0)))}}]),e}();function sd(t){return(sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ld(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fd(t,e,n){return(fd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function hd(t){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pd(t,e){return(pd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var bd=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==sd(e)&&"function"!=typeof e?yd(t):e}(this,hd(e).call(this,t,n))).drawer=new tr(t,yd(yd(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pd(t,e)}(e,eb),function(t,e,n){e&&ld(t.prototype,e),n&&ld(t,n)}(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===dt.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===dt.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"trySelect",value:function(t,n){if(!0===fd(hd(e.prototype),"trySelect",this).call(this,t,n))return!0;new Yy("f0.k0",this.kId).setPosXY(t,n);var o=this.getPoint(0).getPosXY().y,r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(n>o+4||n<o-4)&&(!(r>i&&(t>r+4||t<i-4))&&(!(r<i&&(t<r-4||t>i+4))&&(this.select(),!0)))}}]),e}();function dd(t){return(dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function md(t,e,n){return(md="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function vd(t){return(vd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _d(t,e){return(_d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Od=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==dd(e)&&"function"!=typeof e?wd(t):e}(this,vd(e).call(this,t,n))).drawer=new ar(t,wd(wd(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_d(t,e)}(e,eb),function(t,e,n){e&&gd(t.prototype,e),n&&gd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].state!==dt.Hide&&this.points[0].setPosXY(t,e)}},{key:"trySelect",value:function(t,n){if(!0===md(vd(e.prototype),"trySelect",this).call(this,t,n))return!0;new Yy("f0.k0",this.kId).setPosXY(t,n);var o=this.getPoint(0).getPosXY().y;return!(n>o+4||n<o-4)&&(this.select(),!0)}}]),e}();function Sd(t){return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function kd(t,e,n){return(kd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function jd(t){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xd(t,e){return(xd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Cd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Td=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Sd(e)&&"function"!=typeof e?Cd(t):e}(this,jd(e).call(this,t,n))).drawer=new hr(t,Cd(Cd(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xd(t,e)}(e,ub),function(t,e,n){e&&Pd(t.prototype,e),n&&Pd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].state!==dt.Hide&&this.points[0].setPosXY(t,e)}},{key:"trySelect",value:function(t,n){if(!0===kd(jd(e.prototype),"trySelect",this).call(this,t,n))return!0;new Yy("f0.k0",this.kId).setPosXY(t,n);var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y;this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y;return!(t<o-4)&&(!(n>=r+4||n<=r-4)&&(this.select(),!0))}}]),e}();function Id(t){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ed(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ad(t,e,n){return(Ad="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Md(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Md(t){return(Md=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dd(t,e){return(Dd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Nd=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Id(e)&&"function"!=typeof e?Rd(t):e}(this,Md(e).call(this,t,n))).drawer=new mr(t,Rd(Rd(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dd(t,e)}(e,eb),function(t,e,n){e&&Ed(t.prototype,e),n&&Ed(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Ad(Md(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Yy("f0.k0",this.kId);o.setPosXY(t,n);var r=this.getPoint(0).getPosXY().x,i=this.getPoint(1).getPosXY().x;return!(i>r&&t<r-4)&&(!(i<r&&t>r+4)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0)))}}]),e}();function Ld(t){return(Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Vd(t,e,n){return(Vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Bd(t){return(Bd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hd(t,e){return(Hd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Xd=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Ld(e)&&"function"!=typeof e?Yd(t):e}(this,Bd(e).call(this,t,n))).drawer=new Ir(t,Yd(Yd(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hd(t,e)}(e,eb),function(t,e,n){e&&Fd(t.prototype,e),n&&Fd(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===Vd(Bd(e.prototype),"trySelect",this).call(this,t,n))return!0;var o=new Yy("f0.k0",this.kId);return o.setPosXY(t,n),this.calcDistance(this.getPoint(0),this.getPoint(1),o)<4&&(this.select(),!0)}}]),e}();function Ud(t){return(Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function zd(t,e,n){return(zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gd(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Gd(t){return(Gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qd(t,e){return(qd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Kd=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==Ud(e)&&"function"!=typeof e?Jd(t):e}(this,Gd(e).call(this,t,n))).drawer=new Nr(t,Jd(Jd(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qd(t,e)}(e,xb),function(t,e,n){e&&Wd(t.prototype,e),n&&Wd(t,n)}(e,[{key:"trySelect",value:function(t,n){if(!0===zd(Gd(e.prototype),"trySelect",this).call(this,t,n))return!0;this.getChartObjects();var o=this.getPoint(0).getPosXY().x,r=this.getPoint(0).getPosXY().y,i=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,c=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,s=o-(o-i+(o-c)),l=r-(r-a+(r-u)),f={sx:o,sy:r,ex:c,ey:u},h={sx:i,sy:a,ex:s,ey:l},p=i-o,y=a-r,b=s-c,d=l-u,g={sx:Math.abs(p-o),sy:Math.abs(y-r),ex:Math.abs(b-c),ey:Math.abs(d-u)};return!(this.calcGap(f,t,n)>4&&this.calcGap(h,t,n)>4&&this.calcGap(g,t,n)>4)&&(this.select(),!0)}}]),e}();function $d(t){return($d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zd(t,e,n){return(Zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tg(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function tg(t){return(tg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eg(t,e){return(eg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ng(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var og=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==$d(e)&&"function"!=typeof e?ng(t):e}(this,tg(e).call(this,t,n))).drawer=new Yr(t,ng(ng(o)),n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eg(t,e)}(e,eb),function(t,e,n){e&&Qd(t.prototype,e),n&&Qd(t,n)}(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].state!==dt.Hide&&this.points[0].setPosXY(t,e)}},{key:"trySelect",value:function(t,n){if(!0===Zd(tg(e.prototype),"trySelect",this).call(this,t,n))return!0;new Yy("f0.k0",this.kId).setPosXY(t,n);var o=this.getPoint(0).getPosXY().x;return!(t>o+4||t<o-4)&&(this.select(),!0)}}]),e}();function rg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ig(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ag=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.opts=e,this.kId=e.kId,this.kState=e.kState,this.kConfig=e.kConfig,this.kSettings=e.kSettings,this.control=e.control,this._dataSources={},this._dataSourceCache={},this._dataProviders={},this._frames={},this._areas={},this._timelines={},this._ranges={},this._plotters={},this._themes={},this._frameMousePos={},this._dsChartStyle={},this._dragStarted=!1,this._fakeIndicators={},this._enableWheelScale=this.kConfig.enableWheelScale,this._chart={},this._chart.defaultFrame=new lh(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ig(t,e,n[e])})}return t}({},e,{control:this.control})),this._drawingTool=yt.CrossCursor,this._beforeDrawingTool=this._drawingTool,this._mainCanvas=null,this._overlayCanvas=null,this._mainContext=null,this._overlayContext=null,this._capturingMouseArea=null,this.mousePosition={x:-1,y:-1},t.instanceMap[e.kId]=this}return function(t,e,n){e&&rg(t.prototype,e),n&&rg(t,n)}(t,[{key:"createIndicatorAndRange",value:function(t,e){var n,o,r=this.opts,i=r.kSettings.indics[e];switch(e){case"MA":n=new mp(i),o=new Ff(t,r);break;case"EMA":n=new Yh(i),o=new Ff(t,r);break;case"VOLUME":n=new my(i),o=new Uf(t,r);break;case"MACD":n=new hp(i),o=new Kf(t,r);break;case"DMI":n=new Nh(i),o=new Af(t,r);break;case"DMA":n=new Ih(i),o=new _f(t,r);break;case"TRIX":n=new hy(i),o=new _f(t,r);break;case"BRAR":n=new mh(i),o=new _f(t,r);break;case"VR":n=new Py(i),o=new _f(t,r);break;case"OBV":n=new Ip(i),o=new _f(t,r);break;case"EMV":n=new qh(i),o=new _f(t,r);break;case"RSI":n=new qp(i),o=new Af(t,r);break;case"WR":n=new Iy(i),o=new Af(t,r);break;case"SAR":n=new ty(i),o=new Ff(t,r);break;case"KDJ":n=new ap(i),o=new Af(t,r);break;case"ROC":n=new Yp(i),o=new _f(t,r);break;case"MTM":n=new Pp(i),o=new _f(t,r);break;case"BOLL":n=new Ph(i),o=new _f(t,r);break;case"PSY":n=new Np(i),o=new _f(t,r);break;case"StochRSI":n=new ay(i),o=new Af(t,r);break;default:return null}return{indic:n,range:o}}},{key:"redraw",value:function(t,e){if("hidden"!==document.visibilityState){var n=this.kState.kScale,o=this.getFrame("f0");o&&((void 0===t||e)&&(t="All"),"All"!==t&&"MainCanvas"!==t||(e&&o.setChanged(!0),this.doLayout(this._mainContext,"f0",0,0,this._mainCanvas.width/n,this._mainCanvas.height/n),this.drawMain("f0",this._mainContext)),"All"!==t&&"OverlayCanvas"!==t||(this._overlayContext.clearRect(0,0,this._overlayCanvas.width,this._overlayCanvas.height),this.drawOverlay("f0",this._overlayContext)))}}},{key:"bindCanvas",value:function(t,e){"main"===t?(this._mainCanvas=e,this._mainContext=e.getContext("2d")):"overlay"===t&&(this._overlayCanvas=e,this._overlayContext=e.getContext("2d"),this._enableWheelScale&&p(this._overlayCanvas).on("mousewheel",this.control.mouseWheel.bind(this.control)))}},{key:"getCaptureMouseWheelDirectly",value:function(){return this._enableWheelScale}},{key:"getChart",value:function(){return this._chart.defaultFrame}},{key:"setCurrentDrawingTool",value:function(t){this._drawingTool=yt[t],this.setRunningMode(this._drawingTool)}},{key:"switchThemeName",value:function(t,e){var n=q(e,this.kConfig);this.setTheme(t,n),this.getFrame(t).setChanged(!0)}},{key:"getChartStyle",value:function(t){return this._dsChartStyle[t]||"CandleStick"}},{key:"setChartStyle",value:function(t,e){if(this._dsChartStyle[t]!==e){var n,o,r="".concat(t,".main"),i="".concat(r,".main"),a="".concat(r,".main");switch(e){case"CandleStick":case"CandleStickHLC":case"OHLC":switch(void 0!==(n=this.getDataProvider(i))&&qe.isInstance(n,tn)||(n=new tn(i,this.opts),this.setDataProvider(i,n),n.updateData()),this.setMainIndicator(t,this.kSettings.charts.mainIndic),e){case"CandleStick":o=new eo(a,this.opts);break;case"CandleStickHLC":o=new Jn(a,this.opts);break;case"OHLC":o=new bl(a,this.opts)}this.setPlotter(a,o),o=new sl("".concat(r,".decoration"),this.opts),this.setPlotter(o.getName(),o);break;case"Line":n=new Ue(i,this.opts),this.setDataProvider(n.getName(),n),n.setIndicator(new tp),this.removeMainIndicator(t),o=new Ts(a,this.opts),this.setPlotter(a,o),this.removePlotter("".concat(r,".decoration"))}this.getArea(o.getAreaName()).setChanged(!0),this._dsChartStyle[t]=e}}},{key:"setNormalMode",value:function(){this._drawingTool=this._beforeDrawingTool,this.kState.CTool.selectedTool="CrossCursor",this._drawingTool===yt.Cursor?(this.showCursor(),this.kState.CTool.selectedTool="Cursor"):this.hideCursor()}},{key:"setRunningMode",value:function(t){var e=this.getDataSource("f0.k0"),n=e.getCurrentToolObject();if(null!==n&&n.state!==gt.AfterDraw&&e.delToolObject(),e.getToolObjectCount()+e.getHideToolObjectCount()>=this.kConfig.maxToolCount)this.setNormalMode();else switch(this._drawingTool=t,t===yt.Cursor&&this.showCursor(),t){case yt.Cursor:this._beforeDrawingTool=t;break;case yt.ArrowLine:e.addToolObject(new pb("f0.k0",this.opts));break;case yt.BandLine:e.addToolObject(new _b("f0.k0",this.opts));break;case yt.BiParallelLine:e.addToolObject(new Hb("f0.k0",this.opts));break;case yt.BiParallelRayLine:e.addToolObject(new Db("f0.k0",this.opts));break;case yt.CrossCursor:this._beforeDrawingTool=t;break;case yt.DrawFibFans:e.addToolObject(new qb("f0.k0",this.opts));break;case yt.DrawFibRetrace:e.addToolObject(new ed("f0.k0",this.opts));break;case yt.DrawLines:e.addToolObject(new Xd("f0.k0",this.opts));break;case yt.HoriRayLine:e.addToolObject(new ud("f0.k0",this.opts));break;case yt.HoriSegLine:e.addToolObject(new bd("f0.k0",this.opts));break;case yt.HoriStraightLine:e.addToolObject(new Od("f0.k0",this.opts));break;case yt.PriceLine:e.addToolObject(new Td("f0.k0",this.opts));break;case yt.RayLine:e.addToolObject(new Nd("f0.k0",this.opts));break;case yt.SegLine:e.addToolObject(new ub("f0.k0",this.opts));break;case yt.StraightLine:e.addToolObject(new Xd("f0.k0",this.opts));break;case yt.TriParallelLine:e.addToolObject(new Kd("f0.k0",this.opts));break;case yt.VertiStraightLine:e.addToolObject(new og("f0.k0",this.opts))}}},{key:"updateToolObject",value:function(t){var e=this.getDataSource("f0.k0");switch(t){case"show_all":e.showAllToolObject();break;case"hide":e.hideSelectToolObject();break;case"hide_all":e.hideAllToolObject();break;case"delete":e.delSelectToolObject();break;case"delete_all":e.delAllToolObject()}if(this.setNormalMode(),this._drawingTool===yt.CrossCursor){var n=this.getRange("f0.k0.main"),o=this.mousePosition,r=o.x,i=o.y;this.showCrossCursor(n,r,i)}this.redraw("OverlayCanvas")}},{key:"setCurrentDataSource",value:function(t,e){var n=this.getCachedDataSource(e);n?this.setDataSource(t,n):(n=new Ae(e),this.setDataSource(t,n),this.setCachedDataSource(e,n))}},{key:"getDataSource",value:function(t){return this._dataSources[t]}},{key:"setDataSource",value:function(t,e){this._dataSources[t]=e,this.updateData(t,null)}},{key:"getCachedDataSource",value:function(t){return this._dataSourceCache[t]}},{key:"setCachedDataSource",value:function(t,e){this._dataSourceCache[t]=e}},{key:"clearCachedDataSource",value:function(){this._dataSourceCache={}}},{key:"getDataProvider",value:function(t){return this._dataProviders[t]}},{key:"setDataProvider",value:function(t,e){this._dataProviders[t]=e}},{key:"removeDataProvider",value:function(t){delete this._dataProviders[t]}},{key:"getFrame",value:function(t){return this._frames[t]}},{key:"addFrame",value:function(t,e){this._frames[t]=e}},{key:"removeFrame",value:function(t){delete this._frames[t]}},{key:"getArea",value:function(t){return this._areas[t]}},{key:"addArea",value:function(t,e){this._areas[t]=e}},{key:"removeArea",value:function(t){delete this._areas[t]}},{key:"getTimeline",value:function(t){return this._timelines[t]}},{key:"setTimeline",value:function(t,e){this._timelines[t]=e}},{key:"removeTimeline",value:function(t){delete this._timelines[t]}},{key:"getRange",value:function(t){return this._ranges[t]}},{key:"setRange",value:function(t,e){this._ranges[t]=e}},{key:"removeRange",value:function(t){delete this._ranges[t]}},{key:"getPlotter",value:function(t){return this._plotters[t]}},{key:"setPlotter",value:function(t,e){this._plotters[t]=e}},{key:"removePlotter",value:function(t){delete this._plotters[t]}},{key:"getTheme",value:function(t){return this._themes[t]}},{key:"setTheme",value:function(t,e){this._themes[t]=e}},{key:"getFrameMousePos",value:function(t){var e={};return this._frameMousePos[t]?(e.x=this._frameMousePos[t].x,e.y=this._frameMousePos[t].y):(e.x=-1,e.y=-1),e}},{key:"setFrameMousePos",value:function(t,e,n){this._frameMousePos[t]={x:e,y:n}}},{key:"drawArea",value:function(t,e,n){var o,r,i=e.getNameObject().getCompAt(2);if("timeline"===i){if(e.getHeight()<20)return}else if(e.getHeight()<30)return;if(!(e.getWidth()<30))for(i=e.getName(),r=0;r<n.length;r++)(o=this._plotters[i+n[r]])&&o.Draw(t)}},{key:"drawAreaMain",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".background"]:[".background",".grid",".main",".secondary"],this.drawArea(t,e,n),e.setChanged(!1)}},{key:"drawAreaOverlay",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".selection"]:[".decoration",".selection",".tool",".info"],this.drawArea(t,e,n)}},{key:"drawMain",value:function(t,e){for(var n in this._areas)this._areas[n].getFrameName()!==t||qe.isInstance(this._areas[n],pt)||this.drawAreaMain(e,this._areas[n]);var o;for(var r in this._timelines)(o=this._timelines[r]).getFrameName()===t&&o.setUpdated(!1);for(var i in this._ranges)(o=this._ranges[i]).getFrameName()===t&&o.setUpdated(!1);for(var a in this._areas)(o=this._areas[a]).getFrameName()===t&&o.setChanged(!1)}},{key:"drawOverlay",value:function(t,e){for(var n in this._areas){var o=this._areas[n];qe.isInstance(o,pt)&&o.getFrameName()===t&&o.drawGrid(e)}for(var r in this._areas){var i=this._areas[r];!1===qe.isInstance(i,pt)&&i.getFrameName()===t&&this.drawAreaOverlay(e,i)}}},{key:"updateData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.getDataSource(t);if(o){if(e){if(!o.updateData(e,n))return!1;if(o.getUpdateMode()===vt)return!0}else o.setUpdateMode(_t);var r=this.getTimeline(t);if(r&&r.update(),o.getDataCount()<1)return!0;var i,a,c=[".main",".secondary"];for(var u in this._areas)if(i=this._areas[u],!qe.isInstance(i,pt)&&i.getDataSourceName()===t){a=i.getName();for(var s=0;s<c.length;s++){var l=this.getDataProvider(a+c[s]);void 0!==l&&null!==l&&l.updateData()}}return this.redraw("All",!1),!0}}},{key:"updateIndexPrice",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.getDataSource(t);if(o&&(o.updateIndexPrice(e,n),n)){var r=this.kSettings.charts.mainIndic,i=void 0===r?[]:r;this.setMainIndicator("f0.k0",i),this.redraw("All",!0)}}},{key:"updateRange",value:function(t){if(!(this.getDataSource(t).getDataCount()<1)){var e,n,o=[".main",".secondary"];for(var r in this._areas)if(e=this._areas[r],!qe.isInstance(e,pt)&&e.getDataSourceName()===t){n=e.getName();for(var i=0;i<o.length;i++){var a=this.getDataProvider(n+o[i]);void 0!==a&&null!==a&&a.updateRange()}var c=this.getTimeline(t);if(void 0!==c&&c.getMaxItemCount()>0){var u=this.getRange(n);void 0!==u&&null!==u&&u.update()}}}}},{key:"doLayout",value:function(t,e,n,o,r,i){var a=this.getFrame(e);for(var c in a.measure(t,r-n,i-o),a.doLayout(n,o,r,i),this._timelines){var u=this._timelines[c];u.getFrameName()===e&&u.onLayout()}for(var s in this._dataSources)s.substring(0,e.length)===e&&this.updateRange(s)}},{key:"SelectRange",value:function(t,e){for(var n in this._ranges){this._ranges[n].getAreaName()===t.getName()?this._ranges[n].selectAt(e):this._ranges[n].unselect()}}},{key:"scale",value:function(t){var e=this.getTimeline("f0.k0");e&&(e.scale(t),this.updateRange("f0.k0"))}},{key:"showCursor",value:function(t){t=t||"default",this._mainCanvas.style.cursor=t,this._overlayCanvas.style.cursor=t}},{key:"hideCursor",value:function(){this._mainCanvas.style.cursor="none",this._overlayCanvas.style.cursor="none"}},{key:"showCrossCursor",value:function(t,e,n){var o=this.getRange(t.getName());return!(void 0===o||(o.selectAt(n),void 0===(o=this.getTimeline(t.getDataSourceName()))||!o.selectAt(e)))}},{key:"hideCrossCursor",value:function(t){if(null!==t&&void 0!==t)for(var e in this._timelines){var n=this._timelines[e];n!==t&&n.unselect()}else for(var o in this._timelines)this._timelines[o].unselect();for(var r in this._ranges)this._ranges[r].unselect()}},{key:"clearHighlight",value:function(){null!==this._highlightedFrame&&void 0!==this._highlightedFrame&&(this._highlightedFrame.highlight(null),this._highlightedFrame=null)}},{key:"onToolMouseMove",value:function(t,e,n){var o=!1;for(var r in t+=".",this._dataSources)if(0===r.indexOf(t)){var i=this._dataSources[r];qe.isInstance(i,Ae)&&i.toolManager.acceptMouseMoveEvent(e,n)&&(o=!0)}return o}},{key:"onToolMouseDown",value:function(t,e,n){var o=!1;for(var r in t+=".",this._dataSources)if(0===r.indexOf(t)){var i=this._dataSources[r];qe.isInstance(i,Ae)&&i.toolManager.acceptMouseDownEvent(e,n)&&(o=!0)}return o}},{key:"onToolMouseUp",value:function(t,e,n){var o=!1;for(var r in t+=".",this._dataSources)if(0===r.indexOf(t)){var i=this._dataSources[r];qe.isInstance(i,Ae)&&i.toolManager.acceptMouseUpEvent(e,n)&&(o=!0)}return o}},{key:"onToolMouseDrag",value:function(t,e,n){var o=!1;for(var r in t+=".",this._dataSources)if(0===r.indexOf(t)){var i=this._dataSources[r];qe.isInstance(i,Ae)&&i.toolManager.acceptMouseDownMoveEvent(e,n)&&(o=!0)}return o}},{key:"onMouseMove",value:function(t,e,n){var o=this.getFrame(t);if(void 0!==o)if(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this._highlightedFrame!==o&&this.clearHighlight(),this._capturingMouseArea)this._capturingMouseArea.onMouseMove(e,n);else{var r=o.contains(e,n);if(null!==r)for(var i,a=r.length-1;a>=0;a--)if(null!==(i=(i=r[a]).onMouseMove(e,n)))return void(qe.isInstance(i,pt)||(o.highlight(i),this._highlightedFrame=o))}}},{key:"onMouseLeave",value:function(t,e,n){this.getFrame(t)&&(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this.clearHighlight(),this._capturingMouseArea&&(this._capturingMouseArea.onMouseLeave(e,n),this._capturingMouseArea=null),this._dragStarted=!1)}},{key:"onMouseDown",value:function(t,e,n){var o=this.getFrame(t);if(o){var r=o.contains(e,n);if(r)for(var i,a=r.length-1;a>=0;a--)if(i=(i=r[a]).onMouseDown(e,n))return void(this._capturingMouseArea=i)}}},{key:"onMouseUp",value:function(t,e,n){var o=this.getFrame(t);o&&(!this._capturingMouseArea||this._capturingMouseArea.onMouseUp(e,n)||this._dragStarted||this._enableWheelScale||(this._selectedFrame?(p(this._overlayCanvas).off("mousewheel"),this._selectedFrame.select(null),this._selectedFrame=null):(p(this._overlayCanvas).on("mousewheel",this.control.mouseWheel.bind(this.control)),this._selectedFrame=o,this._selectedFrame.select(this._capturingMouseArea))),this._capturingMouseArea=null,this._dragStarted=!1)}},{key:"getSelectToolObjcet",value:function(){return this.getDataSource("f0.k0").getSelectToolObjcet()}},{key:"unselectToolObjcet",value:function(){this.getDataSource("f0.k0").unselect()}},{key:"unloadTemplate",value:function(t){if(void 0!==this.getFrame(t)){for(var e in this._dataSources)e.match("".concat(t,"."))&&delete this._dataSources[e];for(var n in this._dataProviders)this._dataProviders[n].getFrameName()===t&&delete this._dataProviders[n];for(var o in delete this._frames[t],this._areas)this._areas[o].getFrameName()===t&&delete this._areas[o];for(var r in this._timelines)this._timelines[r].getFrameName()===t&&delete this._timelines[r];for(var i in this._ranges)this._ranges[i].getFrameName()===t&&delete this._ranges[i];for(var a in this._plotters)this._plotters[a].getFrameName()===t&&delete this._plotters[a];delete this._themes[t],delete this._frameMousePos[t]}}},{key:"setMainIndicator",value:function(t,e){var n=this;Array.isArray(e)||(e=[e]);var o="".concat(t,".main"),r=this.getDataProvider("".concat(o,".main"));if(void 0===r||!qe.isInstance(r,tn))return!1;var i=e.map(function(t){var e,o=n.kSettings.indics[t];switch(t){case"MA":e=new mp(o);break;case"EMA":e=new Yh(o);break;case"BOLL":e=new Ph(o);break;case"SAR":e=new ty(o);break;case"Index":e=new Ny}return e.setParameters(n.kSettings.indics[t]),e}),a="".concat(o,".secondary"),c=this.getDataProvider(a);void 0===c&&(c=new Ue(a,this.opts),this.setDataProvider(c.getName(),c)),c.setIndicator(i);var u=this.getPlotter(a);return void 0===u&&(u=new Ts(a,this.opts),this.setPlotter(u.getName(),u)),this.getArea(o).setChanged(!0),!0}},{key:"setIndicator",value:function(t,e){var n=this.getArea(t);if(null===n||void 0===n||"main"===n.getNameObject().getCompAt(2))return!1;var o=this.getDataProvider("".concat(t,".secondary"));if(null===o||void 0===o||!qe.isInstance(o,Ue))return!1;var r=this.createIndicatorAndRange(t,e);if(!r)return!1;var i=r.indic,a=r.range;if(i.setParameters(this.kSettings.indics[e]),this.removeDataProvider("".concat(t,".main")),this.removePlotter("".concat(t,".main")),this.removeRange(t),this.removePlotter("".concat(t,"Range.decoration")),o.setIndicator([i]),this.setRange(t,a),a.setPaddingTop(20),a.setPaddingBottom(4),a.setMinInterval(20),qe.isInstance(i,my)){var c=new Gs("".concat(t,"Range.decoration"),this.opts);this.setPlotter(c.getName(),c)}else if(qe.isInstance(i,Ph)||qe.isInstance(i,ty)){var u=new tn("".concat(t,".main"),this.opts);this.setDataProvider(u.getName(),u),u.updateData();var s=new bl("".concat(t,".main"),this.opts);this.setPlotter(s.getName(),s)}return!0}},{key:"removeMainIndicator",value:function(t){var e="".concat(t,".main"),n="".concat(e,".secondary"),o=this.getDataProvider(n);void 0!==o&&qe.isInstance(o,Ue)&&(this.removeDataProvider(n),this.removePlotter(n),this.getArea(e).setChanged(!0))}},{key:"removeIndicator",value:function(t){var e=this.getArea(t);if(void 0!==e&&"main"!==e.getNameObject().getCompAt(2)){var n=this.getDataProvider("".concat(t,".secondary"));if(void 0!==n&&qe.isInstance(n,Ue)){var o="".concat(t,"Range"),r=this.getArea(o);if(void 0!==r){var i=this.getArea("".concat(e.getDataSourceName(),".charts"));if(void 0!==i){for(var a in i.removeArea(e),this.removeArea(t),i.removeArea(r),this.removeArea(o),this._dataProviders)this._dataProviders[a].getAreaName()===t&&this.removeDataProvider(a);for(var c in this._ranges)this._ranges[c].getAreaName()===t&&this.removeRange(c);for(var u in this._plotters)this._plotters[u].getAreaName()===t&&this.removePlotter(u);for(var s in this._plotters)this._plotters[s].getAreaName()===o&&this.removePlotter(s)}}}}}},{key:"getIndicatorParameters",value:function(t){var e=this._fakeIndicators[t];if(void 0===e){var n=this.createIndicatorAndRange("",t);if(!n)return;n.indic.setParameters(this.kSettings.indics[t]),this._fakeIndicators[t]=e=n.indic}var o,r=[],i=e.getParameterCount();for(o=0;o<i;o++)r.push(e.getParameterAt(o));return r}},{key:"setIndicatorParameters",value:function(t,e){var n,o,r=this,i=function(){var o=r._dataProviders[n];if(!1===qe.isInstance(o,Ue))return"continue";o.getIndicators().forEach(function(n){n.getName()==t&&(n.setParameters(e),o.refresh(),r.getArea(o.getAreaName()).setChanged(!0))})};for(n in this._dataProviders)i();if(void 0===(o=this._fakeIndicators[t])){var a=this.createIndicatorAndRange("",t);if(!a)return;this._fakeIndicators[t]=o=a.indic}o.setParameters(e)}},{key:"getIndicatorAreaName",value:function(t,e){var n=this.getArea("".concat(t,".charts")),o=n.getAreaCount()>>1;return e<0||e>=o?"":n.getAreaAt(e<<1).getName()}}],[{key:"getInstance",value:function(e){return t.instanceMap[e]}}]),t}();function cg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ug(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}ig(ag,"instanceMap",{});var sg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.kId=e.kId,this.kSettings=e.kSettings,this.kState=e.kState,this.kConfig=e.kConfig,this.kGlobal=e.kGlobal,this.kline=e.kline}return function(t,e,n){e&&ug(t.prototype,e),n&&ug(t,n)}(t,[{key:"setData",value:function(t){var e=ag.getInstance(this.kId);e.updateData("f0.k0",t,!0),e.redraw("All",!1)}},{key:"setDepth",value:function(t){var e=ag.getInstance(this.kId);e.getChart().updateDepth(t),e.redraw("All",!1)}},{key:"resize",value:function(t,e){var n=this.kline.el,o=this.kline.anchor[0].getBoundingClientRect();t=t||o.width,e=e||o.height,n.css({width:"".concat(t,"px"),height:"".concat(e,"px")});var r=p(".ctool-panel",n),i=p(".indic-tabbar",n),a=r[0].getBoundingClientRect();r.css({height:"".concat(e,"px")});var c=i[0].getBoundingClientRect(),u={};u.w=t-a.width,u.h=e-c.height;var s=p(".main-canvas",n)[0],l=p(".overlay-canvas",n)[0],f=this.kState.kScale;s.width=f*u.w,s.height=f*u.h,s.style.width="".concat(u.w,"px"),s.style.height="".concat(u.h,"px"),l.width=f*u.w,l.height=f*u.h,l.style.width="".concat(u.w,"px"),l.style.height="".concat(u.h,"px"),s.getContext("2d").scale(f,f),l.getContext("2d").scale(f,f),ag.getInstance(this.kId).redraw("All",!0),this.setMainLogo()}},{key:"setMainLogo",value:function(t){t=t||this.kConfig.theme;var e=ag.getInstance(this.kId),n=this.kConfig.logo,o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){cg(t,e,n[e])})}return t}({},R.logo,n),r=o.size,i=o.position,a=o.img,c=r.width,u=r.height,s=i.x,l=void 0===s?0:s,f=i.y,h=void 0===f?0:f,y=a[t]||a.default,b=e.getArea("f0.k0.main"),d=b.getWidth(),g=b.getHeight()-u,m=d-c;if(!(g<=0||m<=0)){var v=m/2,_=g/2;switch(i.location){case"left-top":v=0,_=0;break;case"left-center":v=0;break;case"left-bottom":v=0,_=g;break;case"center-top":_=0;break;case"center-bottom":_=g;break;case"right-top":v=m,_=0;break;case"right-center":v=m;break;case"right-bottom":v=m,_=g}p(".canvas-group",this.kline.el).css({"background-image":"url(".concat(y,")"),"background-position":"".concat(v+l,"px ").concat(_+h,"px"),"background-repeat":"no-repeat","background-size":"".concat(c,"px ").concat(u,"px")})}}},{key:"mouseWheel",value:function(t){var e=ag.getInstance(this.kId);return e.scale(t.wheelDelta>0?1:-1),e.redraw("All",!0),t.preventDefault(),!1}},{key:"switchTools",value:function(t){var e=ag.getInstance(this.kId),n=p(".ctool-panel",this.kline.el);t?(n.css({width:"auto"}),e._drawingTool===yt.Cursor?this.kState.CTool.selectedTool="Cursor":e._drawingTool===yt.CrossCursor&&(this.kState.CTool.selectedTool="CrossCursor")):(n.css({width:"0px"}),e.setRunningMode(e._beforeDrawingTool),e.redraw("All",!0)),this.resize()}},{key:"switchIndic",value:function(t){var e=this.kSettings,n=ag.getInstance(this.kId),o=p(".indic-tabbar",this.kline.el);if(t){var r=e.charts.indics[1];n.getChart().setIndicator(2,r),o.removeClass("hide")}else n.getChart().setIndicator(2,"NONE"),o.addClass("hide");this.resize()}},{key:"switchPeriod",value:function(t){var e=this.kSettings,n=ag.getInstance(this.kId);if(n.showCursor(),"line"===t)n.getChart().strIsLine=!0,n.setChartStyle("f0.k0","Line"),n.getChart().setCurrentPeriod("line");else{n.getChart().strIsLine=!1;var o=1===t.replace(/\D/g,"").length?"0".concat(t):t;n.setChartStyle("f0.k0",e.charts.mainStyle),n.getChart().setCurrentPeriod(o)}e.save()}}]),t}();function lg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var fg=function(t){return t[0]=new Date(t[0]).getTime(),t[1]=Number(t[1]),t[2]=Number(t[2]),t[3]=Number(t[3]),t[4]=Number(t[4]),t[5]=Number(t[5]),t},hg=null;function pg(t){return t.map(hg)}var yg=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.klineInstance=o,hg=n.dataAdapter||fg,this.callbackMap={},this.disconnected=!1,this.socket=new WebSocketCore({connectUrl:n.wsUrl});var r=this.socket;this.connected=new Promise(function(t){e.connectedHandle=r.onSocketConnected(function(){e.disconnected?(e.fetchRestData(),e.disconnected=!1):t()}),e.errorHandle=r.onSocketError(function(){e.disconnected=!0,e.fetchRestData()})}),this.pingHandle=r.onPushDiscontinue(function(){r.sendChannel("ping")}),this.PushHandle=r.setPushDataResolver(function(t){var n=t.table,o=t.data,r=[],i="";if(o&&o.length&&e.callbackMap){o.forEach(function(t){var e=t.instrument_id,n=t.candle;i=e,r.push(n)});var a=e.callbackMap["".concat(n,":").concat(i)];a&&a(pg(r))}}),r.connect()}return function(t,e,n){e&&lg(t.prototype,e),n&&lg(t,n)}(t,[{key:"getBars",value:function(t,e,n){return p.ajax({url:"".concat(t.replace(/<symbol>/,e),"?granularity=").concat(n,"&size=1000")}).then(function(t){var e=t.code,n=t.data;return 0!==e?[]:pg(n)})}},{key:"subscribeBars",value:function(t,e,n,o,r){var i=this,a="".concat(t,"/").concat(e).concat(n,"s:").concat(o);this.callbackMap["".concat(a)]=r;var c=JSON.stringify({op:"subscribe",args:[a]});this.connected.then(function(){i.socket.isConnected()&&i.socket.sendChannel(c)})}},{key:"unsubscribeBars",value:function(t,e,n,o){var r="".concat(t,"/").concat(e).concat(n,"s:").concat(o);this.unsubscribeChannel([r])}},{key:"unsubscribeChannel",value:function(t){var e=this;if(t.forEach(function(t){delete e.callbackMap[t]}),this.socket.isConnected()){var n=JSON.stringify({op:"unsubscribe",args:t});this.socket.sendChannel(n)}}},{key:"unsubscribeAll",value:function(){var t=Object.keys(this.callbackMap);this.unsubscribeChannel(t)}},{key:"fetchRestData",value:function(){var t=this.klineInstance.kConfig,e=t.period,n=t.symbol;this.klineInstance.getData(e,n)}},{key:"destroy",value:function(){this.unsubscribeAll(),this.pingHandle&&this.pingHandle(),this.PushHandle&&this.PushHandle(),this.connectedHandle&&this.connectedHandle(),this.errorHandle&&this.errorHandle(),delete this.socket,delete this.klineInstance,delete this.pingHandle,delete this.PushHandle,delete this.connectedHandle,delete this.errorHandle,delete this.connected,delete this.callbackMap,delete this.disconnected,hg=null}}]),t}(),bg=n(0),dg=n.n(bg);n(7);function gg(t){return(gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vg(t,e){return!e||"object"!==gg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _g(t){return(_g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wg(t,e){return(wg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Og={Cursor:{className:"icon-kline-cursor",lang:"cursor"},CrossCursor:{className:"icon-kline_tool_a",lang:"cross_cursor"},SegLine:{className:"icon-kline_tool_b",lang:"seg_line"},StraightLine:{className:"icon-kline_tool_c",lang:"straight_line"},RayLine:{className:"icon-kline_tool_d",lang:"ray_line"},ArrowLine:{className:"icon-kline_tool_e",lang:"arrow_line"},HoriSegLine:{className:"icon-kline_tool_f",lang:"horz_seg_line"},HoriStraightLine:{className:"icon-kline_tool_g",lang:"horz_straight_line"},HoriRayLine:{className:"icon-kline_tool_h",lang:"horz_ray_line"},VertiStraightLine:{className:"icon-kline_tool_i",lang:"vert_straight_line"},PriceLine:{className:"icon-kline_tool_j",lang:"price_line"},TriParallelLine:{className:"icon-kline_tool_k",lang:"tri_parallel_line"},BiParallelLine:{className:"icon-kline_tool_l",lang:"bi_parallel_line"},BiParallelRayLine:{className:"icon-kline_tool_m",lang:"bi_parallel_ray"},DrawFibRetrace:{className:"icon-kline_tool_n",lang:"fib_retrace"},DrawFibFans:{className:"icon-kline_tool_o",lang:"fib_fans"},show_all:{className:"icon-kline-hide",lang:"show_all"},hide_all:{className:"icon-kline-display",lang:"hide_all"},delete_all:{className:"icon-Eliminate",lang:"delete_all"}},Sg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vg(this,_g(e).call(this,t))).kId=t.kId,n.bindEvent(),n.setLanguage(),E(function(){y("li",n.el).removeClass("selected"),p("li[key=".concat(n.kState.CTool.selectedTool,"]"),n.el).addClass("selected"),n.switchOperation()}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wg(t,e)}(e,_),function(t,e,n){e&&mg(t.prototype,e),n&&mg(t,n)}(e,[{key:"bindEvent",value:function(){var t=this,e=this.el[0];this.el.on("click",function(n){var o=p(n.target).closest("li");if(o){var r=e.clientHeight,i=e.scrollTop;if(o.hasClass("arrow-top"))e.scrollTop=i-r;else if(o.hasClass("arrow-bottom"))e.scrollTop=i+r+r;else{t.hideToolOperation();var a=o.attr("key");if(/^[a-z][A-z_]*$/.test(a))return t.emit("tool-operation",a),void t.switchOperation(a);t.kState.CTool.selectedTool=a,t.emit("tool-switch",a)}}});var n=p(".popover",this.el),o={x:0,y:0};this.el.on("mousemove",function(e){o={x:e.x,y:e.y};var r=p(e.target).closest("li");if(n.addClass("hide"),r){var i=r.attr("name");if(i){t.language!==t.kConfig.language&&t.setLanguage(),n.removeClass("hide").removeClass("bottom").addClass("right"),p(".title",n).html(i);var a=t.el[0].getBoundingClientRect(),c=n[0].getBoundingClientRect(),u=r[0].getBoundingClientRect(),s=a.right-a.left,l=u.top-a.top-(c.height-u.height)/2;r.parent().hasClass("tool-operation")&&(n.removeClass("bottom").addClass("bottom"),s=u.left-a.left-(c.width-u.width)/2,l=u.bottom-a.top),n.css({left:"".concat(s,"px"),top:"".concat(l,"px")})}}}).on("mouseleave",function(){n.addClass("hide")}),this.el.on("scroll",function(){y(".tool-panel li").each(function(t){var e=t.getBoundingClientRect(),r=o,i=r.x,a=r.y,c=e.left,u=e.right,s=e.top,l=e.bottom;if(i>=c&&i<=u&&a>=s&&a<=l){var f=p(t).attr("name");f&&p(".title",n).html(f)}}),t.resize()}),new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(function(){t.resize()}).observe(this.el[0],{attributes:!0})}},{key:"resize",value:function(){if(!k.isMobile){var t=p(".tool-panel",this.el),e=y(".arrow",t),n=this.el[0],o=n.clientWidth,r=n.clientHeight,i=n.scrollHeight,a=n.scrollTop;0==a?t.removeClass("hide-top"):t.addClass("hide-top"),a+r>=i?t.removeClass("hide-bottom"):t.addClass("hide-bottom"),0==o?e.addClass("hide"):e.removeClass("hide")}}},{key:"setLanguage",value:function(){this.language=this.kConfig.language;var t=Js(this.language);y("li[key]").each(function(e){var n=(e=p(e)).attr("key");e.attr("name",Og[n]?t.ctools[Og[n].lang]:t.ctools[n])})}},{key:"showToolOperation",value:function(){p(".tool-operation",this.el).removeClass("hide")}},{key:"hideToolOperation",value:function(){p(".tool-operation",this.el).addClass("hide")}},{key:"switchOperation",value:function(t){var e=ag.getInstance(this.kId).getDataSource("f0.k0"),n=0===e.getToolObjectCount()&&0!==e.getHideToolObjectCount(),o=p(".tool-panel li[key=hide_all]",this.el),r=p(".tool-panel li[key=show_all]",this.el),i=p(".popover .title",this.el);if(n?(o.addClass("hide"),r.removeClass("hide")):(o.removeClass("hide"),r.addClass("hide")),"show_all"===t){var a=o.attr("name");i.html(a)}if("hide_all"===t&&n){var c=r.attr("name");i.html(c)}}},{key:"render",value:function(){var t=this;if(k.isMobile)this.el.addClass("hide");else{var e=[];Object.keys(Og).forEach(function(n){var o=Og[n],r='key="'.concat(n,'" class="').concat(t.kState.CTool.selectedTool==n?"selected":"",'"');e.push("<li ".concat(r,'><i class="iconfont ').concat(o.className,'"></i></li>'))});var n='<ul class="tool-panel"><li class="arrow arrow-top"><i class="iconfont icon-fold"></i></li>'.concat(e.join(""),'<li class="arrow arrow-bottom"><i class="iconfont icon-Unfold"></i></li></ul>');this.el.html(n+'<ul class="tool-operation hide"><li key="hide"><i class="iconfont icon-kline-display"></i></li><li key="delete"><i class="iconfont icon-Eliminate"></i></li></ul><div class="popover hide"><div class="title"></div><div class="triangle"></div><div class="split"></div></div>')}}}]),e}();n(8);function Pg(t){return(Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jg(t,e){return!e||"object"!==Pg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xg(t){return(xg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cg(t,e){return(Cg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tg=[{key:"MACD"},{key:"KDJ"},{key:"StochRSI"},{key:"RSI"},{key:"DMI"},{key:"OBV"},{key:"BOLL"},{key:"SAR"},{key:"DMA"},{key:"TRIX"},{key:"BRAR"},{key:"VR"},{key:"EMV"},{key:"WR"},{key:"ROC"},{key:"MTM"},{key:"PSY"}],Ig=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jg(this,xg(e).call(this,t))).el.on("click",function(t){var e=p(t.target).closest("li");if(e){var o=e.attr("key");y("li",n.el).removeClass("selected"),e.addClass("selected"),n.emit("indic-switch",o)}}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cg(t,e)}(e,_),function(t,e,n){e&&kg(t.prototype,e),n&&kg(t,n)}(e,[{key:"render",value:function(){var t=[],e=this.kSettings.charts.indics[1];Tg.forEach(function(n){t.push('<li key="'.concat(n.key,'" class="').concat(n.key===e?"selected":"",'"><span>').concat(n.key,"</span></li>"))}),this.el.html("<ul>".concat(t.join(""),"</ul>"))}}]),e}(),Eg=n(1),Ag=n.n(Eg);n(9);function Mg(t){return(Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Rg(t,e){return!e||"object"!==Mg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ng(t){return(Ng=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lg(t,e){return(Lg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fg=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rg(this,Ng(e).call(this,t))).el.on("click",function(t){var e=p(t.target);if(e.closest(".close-btn"))n.hidden();else if(e.hasClass("default-btn")){var o=e.attr("key");n.emit("restore-dafult",o),y("input[key=".concat(o,"]")).each(function(t,e){t.value=n.kSettings.indics[o][e]})}}),n.el.on("change",function(t){var e=p(t.target).attr("key");t.target.value=t.target.value.replace(/\D/g,"")||0;var o=[];y("input[key=".concat(e,"]")).each(function(t){o.push(parseInt(t.value,10))}),n.emit("param-changed",e,o)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lg(t,e)}(e,_),function(t,e,n){e&&Dg(t.prototype,e),n&&Dg(t,n)}(e,[{key:"visible",value:function(){var t="",e=this.kSettings;Object.keys(e.indics).forEach(function(n,o){(o%2==0||k.isMobile)&&(t+="<tr>"),t+="<th>".concat(n,"</th><td>"),e.indics[n].forEach(function(e){t+="<input key=".concat(n,' value="').concat(e,'" />')}),t+='<button class="default-btn" key="'.concat(n,'" /></td>'),(o%2==1||k.isMobile)&&(t+="</tr>")}),p("table",this.el).html("<tbody>".concat(t,"</tbody>"));var n=Js(this.kConfig.language);y(".default-btn",this.el).html(n.settings.default),p(".settings-title",this.el).html(n.settings.indicator_parameters),this.el.removeClass("hide")}},{key:"hidden",value:function(){p("tbody",this.el)[0].remove(),this.el.addClass("hide")}},{key:"switchVisible",value:function(t){t?this.visible():this.hidden()}},{key:"render",value:function(){this.el.html(Ag.a),this.el.addClass("hide"),k.isMobile?this.el.addClass("app"):this.el.addClass("pc")}}]),e}();n(10);function Vg(t){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Hg(t,e){return!e||"object"!==Vg(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yg(t){return(Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xg(t,e){return(Xg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ug=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=p(".screen-close",(n=Hg(this,Yg(e).call(this,t))).el),r=p(".screen-btn",n.el);return o.on("click",function(){n.hide()}),r.on("click",function(){var t=n.options,e=t.url,o=t.symbol,r=t.time,i=document.createElement("a");try{i.download="".concat(o,"_").concat(r,".png"),i.rel="noopener",i.href=e,i.dispatchEvent(new MouseEvent("click"))}catch(t){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(a)}n.hide()}),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xg(t,e)}(e,_),function(t,e,n){e&&Bg(t.prototype,e),n&&Bg(t,n)}(e,[{key:"setLanguage",value:function(){this.language=this.kConfig.language;var t=Js(this.language);p(".screen-title",this.el).html(t.str_screenshot),p(".screen-btn span",this.el).html(t.str_local_save)}},{key:"show",value:function(t){var e=t.url;this.options=t;var n=p("img",this.el)[0],o=this.el.parent()[0].getBoundingClientRect().height;n.src=e,n.style.width="auto",n.style.height="".concat(Math.max(o-270,20),"px"),this.el.removeClass("hide")}},{key:"hide",value:function(){this.el.addClass("hide")}},{key:"render",value:function(){this.el.html('<div class="screen-header"><div class="screen-title"></div><i class="iconfont icon-cancel screen-close"></i></div><div class="screen-content"><img /><div class="screen-btn"><i class="iconfont icon-download"></i><span></span></div></div>')}}]),e}();function Wg(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var zg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.kConfig,o=e.kState,r=e.el,i=e.kId;this.kConfig=n,this.kState=o,this.el=r,this.kId=i}return function(t,e,n){e&&Wg(t.prototype,e),n&&Wg(t,n)}(t,[{key:"draw",value:function(){var t=this.kState,e=this.el,n=this.kId;this.mgr=ag.getInstance(n);var o=this.mgr.getDataSource("f0.k0");this.digits=o.getDecimalDigits();var r=o.getData(),i=r.length;return this.last=i>0?r[i-1]:null,this.prev=i>1?r[i-2]:null,this.last?(this.mainCanvas=p(".main-canvas",e)[0],this.overlayCanvas=p(".overlay-canvas",e)[0],this.width=this.mainCanvas.width/t.kScale,this.lineHeight=this.mainCanvas.height/t.kScale,this.headerHeight=66,this.height=this.lineHeight+this.headerHeight,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.drawHeader(),this.drawLine(),this.drawImage()):Promise.resolve()}},{key:"drawHeader",value:function(){var t=this,e=this.context,n=this.kConfig,o=this.width,r=this.height,i=this.digits,a=this.last,c=this.prev,u=n.symbol,s=n.language,l=n.screenshotIcon,f=n.period,h=n.convertName,p=this.mgr.getTheme("f0"),y=p.TextPositive,b=p.TextNegative,d=p.Text1,g=p.LineColorNormal,m=e.createLinearGradient(0,0,o,0);m.addColorStop(0,"#041636"),m.addColorStop(1,"#0B2758"),e.fillStyle=m,e.fillRect(0,0,o,r);var v=f.replace(/\D/g,""),_=f.replace(/\d/g,""),w="".concat(h?h(u):u,"  [").concat("line"==_?"":v).concat(Js(s).period[_],"]");e.textBaseline="middle",e.font="18px PingFangSC-Medium",e.fillStyle=d,e.fillText(w,16,22);var O=a.close.toFixed(i),S=e.measureText(w).width+16+24;e.font="16px DINPro-Medium",e.fillStyle=a.close>a.open?y:b,e.fillText(O,S,22);var P=c?(a.close-c.close)/c.close*100:0,k="".concat(P.toFixed(2),"%"),j=e.measureText(O).width+S+12;e.font="12px DINPro-Medium";var x=e.measureText(k).width;e.fillStyle=P>=0?y:b;e.moveTo(j-4,19),e.lineTo(j-4,25),e.arcTo(j-4,30,j-4+5,30,4),e.lineTo(j+x+4-5,30),e.arcTo(j+x+4,30,j+x+4,25,4),e.lineTo(j+x+4,19),e.arcTo(j+x+4,14,j+x+4-5,14,4),e.lineTo(j-4+5,14),e.arcTo(j-4,14,j-4,19,4),e.fill(),e.fillStyle=d,e.fillText(k,j,22);var C=window.location.hostname;e.font="12px PingFangSC-Regular",e.fillStyle=g,e.fillText(C,16,46);var T=new Date,I=T.getFullYear(),E=qe.formatTime(T.getMonth()+1),A=qe.formatTime(T.getDate()),M=qe.formatTime(T.getHours()),D=qe.formatTime(T.getMinutes()),R="".concat(I,"-").concat(E,"-").concat(A," ").concat(M,":").concat(D),N=e.measureText(C).width+16+12;e.fillStyle="#717B8A",e.fillText(R,N,46),this.iconImg=document.createElement("img"),this.iconImg.crossOrigin="Anonymous",this.iconPromise=Promise.resolve(),l&&(this.iconPromise=new Promise(function(e){t.iconImg.onload=e}),this.iconImg.src=l)}},{key:"drawLine",value:function(){var t=this,e=this.context,n=this.width,o=this.kConfig,r=this.headerHeight,i=this.lineHeight,a=o.theme,c=o.logo,u=this.mgr.getTheme("f0").Background;e.fillStyle=u,e.fillRect(0,r,n,i);var s=R.logo,l=c&&c.img?c.img:s.img;this.logoImg=document.createElement("img"),this.logoImg.crossOrigin="Anonymous",this.logoPromise=new Promise(function(e){t.logoImg.onload=e}),this.logoImg.src=l[a]||l.default,this.mainImg=document.createElement("img"),this.mainPromise=new Promise(function(e){t.mainImg.onload=e}),this.mainImg.src=this.mainCanvas.toDataURL(),this.overlayImg=document.createElement("img"),this.overlayPromise=new Promise(function(e){t.overlayImg.onload=e}),this.overlayImg.src=this.overlayCanvas.toDataURL()}},{key:"drawImage",value:function(){var t=this,e=this.context,n=this.kConfig,o=this.iconPromise,r=this.logoPromise,i=this.mainPromise,a=this.overlayPromise,c=this.iconImg,u=this.logoImg,s=this.mainImg,l=this.overlayImg,f=this.mainCanvas,h=this.overlayCanvas,p=this.canvas,y=this.width,b=this.height,d=this.headerHeight,g=this.lineHeight,m=n.symbol,v=n.screenshotIcon,_=n.logo,w=n.convertName;return Promise.all([o,r,i,a]).then(function(){if(v){var n=c.width,o=c.height,r=36*n/o;e.drawImage(c,0,0,n,o,y-r-16,16,r,36)}var i=R.logo,a=t.mgr.getArea("f0.k0.main"),O=a.getWidth(),S=a.getHeight(),P=_&&_.size?_.size:i.size,k=P.width,j=P.height,x=(O-k)/2,C=(S-j)/2,T=_&&_.position?_.position:i.position;switch(T.location){case"left-top":x=0,C=0;break;case"left-center":x=0;break;case"left-bottom":x=0,C=S-j;break;case"center-top":C=0;break;case"center-bottom":C=S-j;break;case"right-top":x=O-k,C=0;break;case"right-center":x=O-k;break;case"right-bottom":x=O-k,C=S-j}var I=T.x,E=T.y;I=I||0,E=E||0,e.drawImage(u,0,0,u.width,u.height,x+I,C+d+E,k,j),e.drawImage(s,0,0,f.width,f.height,0,d,y,g),e.drawImage(l,0,0,h.width,h.height,0,d,y,g);var A=(new Date).getTime();return{url:p.toDataURL(),width:y,height:b,time:A,symbol:w?w(m):m}})}}]),t}();function Gg(t){return(Gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qg(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){em(t,e,n[e])})}return t}function Kg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Qg(t){return(Qg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zg(t,e){return(Zg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function em(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nm(){return window.devicePixelRatio<1?1:window.devicePixelRatio}var om=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),em(tm(tm(n=function(t,e){return!e||"object"!==Gg(e)&&"function"!=typeof e?tm(t):e}(this,Qg(e).call(this)))),"downEvent",function(t){n.mouseDrag=!0;var e=qe.getMousePosition(t),o=e.x,r=e.y;n.mgr.onMouseDown("f0",o,r),t.preventDefault()}),em(tm(tm(n)),"upEvent",function(t){n.mouseDrag=!1;var e=qe.getMousePosition(t),o=e.x,r=e.y;n.mgr.onMouseUp("f0",o,r),n.mgr.redraw("All"),t.preventDefault()}),em(tm(tm(n)),"moveEvent",function(t){var e=qe.getMousePosition(t),o=e.x,r=e.y;n.mgr.mousePosition={x:o,y:r},n.mgr.onMouseMove("f0",o,r),n.mgr.redraw(n.mouseDrag?"All":"OverlayCanvas"),t.preventDefault()}),em(tm(tm(n)),"leaveEvent",function(t){var e=qe.getMousePosition(t)||n.mgr.mousePosition,o=e.x,r=e.y;n.mgr.onMouseLeave("f0",o,r),n.mgr.redraw("OverlayCanvas"),t.preventDefault()}),em(tm(tm(n)),"wheelEvent",function(t){var e=Kg(t.touches,2),o=e[0],r=e[1],i=qe.getPositionDistance(o.pageX,o.pageY,r.pageX,r.pageY);if(0!==n.distance){var a=-1;i>n.distance&&(a=1),n.distance=i,n.control.mouseWheel({wheelDelta:a}),t.preventDefault()}else n.distance=i}),em(tm(tm(n)),"registerEvent",function(){n.$doc.on("visibilitychange",n.onVisibilitychange),n.overlayCanvas.on("contextmenu",function(t){return t.cancelBubble=!0,t.returnValue=!1,t.preventDefault(),t.stopPropagation(),!1}),k.isMobile?n.registerAppEvent():n.overlayCanvas.on("mousedown",function(t){1===t.which?n.downEvent(t):n.mgr.updateToolObject("delete")}).on("mousemove",n.moveEvent).on("mouseleave",n.leaveEvent).on("mouseup",function(t){1===t.which&&n.upEvent(t),n.mgr.getSelectToolObjcet()?n.cToolPanel.showToolOperation():n.cToolPanel.hideToolOperation()})}),em(tm(tm(n)),"registerAppEvent",function(){n.overlayCanvas.on("touchstart",function(t){clearTimeout(n.touchTimeout),n.touchMoving=!1,n.mouseDrag=!0;var e=t.touches;1===(void 0===e?[]:e).length&&(n.startPosition=qe.getMousePosition(t),n.touchTimeout=setTimeout(function(){n.mouseDrag=!1,n.moveEvent(t)},500)),t.preventDefault()}).on("touchmove",function(t){var e=t.touches,o=void 0===e?[]:e;if(1===o.length){var r=qe.getMousePosition(t),i=n.startPosition,a=qe.getPositionDistance(r.x,r.y,i.x,i.y);if(!n.touchMoving&&a<5)return;!n.touchMoving&&n.mouseDrag&&n.downEvent(t),n.touchMoving=!0,n.moveEvent(t)}2===o.length&&n.wheelEvent(t),clearTimeout(n.touchTimeout)}).on("touchend",function(t){clearTimeout(n.touchTimeout),n.distance=0,n.mouseDrag&&n.leaveEvent(t)})}),n.element=t.element,n.anchor=p(t.anchor||t.element),n.kId=t.kId||t.element.replace(/[#.]/g,""),n.$doc=p(document),n.mgr=null,n.mouseDrag=!1,n.kConfig=Jg({},R,t),n.kState=D({periodMS:null,kScale:nm(),CTool:{selectedTool:"CrossCursor"}}),n.kGlobal={},n.kSettings=new K({kId:n.kId,kConfig:n.kConfig});var o=n.kConfig;return n.dataFeeds=new yg(o,tm(tm(n))),n.setSymbol(o.symbol),n.init(),o.onChartReady&&o.onChartReady(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zg(t,e)}(e,s),function(t,e,n){e&&$g(t.prototype,e),n&&$g(t,n)}(e,[{key:"ready",value:function(t){t&&t()}},{key:"init",value:function(){var t=this,e=this.kConfig,n=this.kSettings,o=this.kState,r={kId:this.kId,kConfig:e,kSettings:n,kGlobal:this.kGlobal,kState:o};this.control=new sg(Jg({},r,{kline:this})),p(dg.a).append(this.anchor),this.el=p(this.anchor.find(".kline-core")[0]),this.overlayCanvas=p(".overlay-canvas",this.el),this.mgr=new ag(Jg({},r,{control:this.control})),this.mgr.bindCanvas("main",p(".main-canvas",this.el)[0]),this.mgr.bindCanvas("overlay",this.overlayCanvas[0]),uh.loadTemplate("f0.k0","",r),this.cToolPanel=new Sg({kId:this.kId,el:p(".ctool-panel",this.el),kConfig:e,kSettings:n,kState:o}),this.cToolPanel.on("tool-switch",function(e){t.mgr.getDataSource("f0.k0").unselect(),t.mgr.redraw("OverlayCanvas"),t.mgr.setRunningMode(yt[e])}),this.cToolPanel.on("tool-operation",function(e){t.mgr.updateToolObject(e)}),this.indicTabbar=new Ig({el:p(".indic-tabbar",this.el),kConfig:e,kSettings:n,kState:o}),this.indicTabbar.on("indic-switch",function(o){n.charts.indics[1]=o,n.save(),!1===e.showVolume?t.mgr.getChart().setIndicator(1,o):t.mgr.getChart().setIndicator(2,o)}),this.parameterPanel=new Fg({el:p(".settings-panel",this.el),kConfig:e,kSettings:n,kState:o}),this.parameterPanel.on("param-changed",function(e,o){var r=t.mgr;r.setIndicatorParameters(e,o);var i=r.getIndicatorParameters(e);n.indics[e]=i.map(function(t){return t.getValue()}),n.save(),r.redraw("All",!1)}),this.parameterPanel.on("restore-dafult",function(o){var r=e.indicParam[o];t.mgr.setIndicatorParameters(o,r),n.indics[o]=qg(r),n.save(),t.mgr.redraw("All",!1)}),this.screenshotPanel=new Ug({el:p(".screenshot-panel",this.el),kConfig:e,kSettings:n,kState:o}),this.screenshotPlotter=new zg({kId:this.kId,el:this.el,kConfig:e,kState:o}),this.onVisibilitychange=this.onVisibilitychange.bind(this),this.removeToolObject=this.removeToolObject.bind(this),this.initFromSettings(),this.registerEvent()}},{key:"initFromSettings",value:function(){var t=this.kConfig,e=this.kSettings;this.setTheme(t.theme),this.setMainStyle(e.charts.mainStyle),this.switchIndics(e.charts.showIndics),this.setMainIndicator(e.charts.mainIndic),this.switchTools(e.charts.showLineTool),this.control.switchPeriod(t.period)}},{key:"setPeriod",value:function(t){this.hideToolOperation(),this.getData(t,this.kConfig.symbol),this.control.switchPeriod(t),this.cToolPanel.switchOperation()}},{key:"getPeriod",value:function(){return this.kConfig.period}},{key:"getSecondPeriod",value:function(){return qe.getPeriodMillisecond(this.kConfig.period)/1e3}},{key:"setMainIndicator",value:function(t){var e=this.kSettings.charts.mainIndic.includes("Index"),n=t.includes("Index");this.kSettings.charts.mainIndic=t,this.kSettings.save(),e&&!n&&this.unsubscribeIndexPrice(),!e&&n&&this.getIndexPrice(),t&&0!==t.length?this.mgr.setMainIndicator("f0.k0",t):this.mgr.removeMainIndicator("f0.k0"),this.mgr.redraw("All",!0)}},{key:"setMainStyle",value:function(t){this.kSettings.charts.mainStyle=t,this.kSettings.save(),this.mgr.setChartStyle("f0.k0",t),this.mgr.redraw()}},{key:"switchIndics",value:function(t){this.kSettings.charts.showIndics=t,this.kSettings.save(),this.control.switchIndic(t)}},{key:"switchTools",value:function(t){this.hideToolOperation(),this.kSettings.charts.showLineTool=t,this.kSettings.save(),this.control.switchTools(t)}},{key:"screenshot",value:function(t){var e=this;this.screenshotPlotter.draw().then(function(n){n&&(e.screenshotPanel.show(n),t&&t())})}},{key:"switchSettings",value:function(t){this.parameterPanel.switchVisible(t)}},{key:"setTheme",value:function(t){this.kConfig.theme=t,this.el.attr("class","kline-core ".concat(t)),this.mgr.switchThemeName("f0",t),this.mgr.redraw("All",!0),this.control.setMainLogo()}},{key:"setLanguage",value:function(t){this.kConfig.language=t}},{key:"setCurrency",value:function(t){this.kConfig.currency=t}},{key:"setSymbol",value:function(t,e){this.mgr&&(this.mgr.clearCachedDataSource(),this.mgr.setCurrentDataSource("f0.k0","".concat(this.kState.periodMS)),this.setData({lines:[],depths:{asks:[],bids:[]}})),this.updateConfig(e),this.getData(this.kConfig.period,t),this.hideToolOperation()}},{key:"getData",value:function(t,e){var n=this,o=this.kConfig,r=o.klineUrl,i=o.product,a=o.channel;o.period=t,o.symbol=e;var c=this.getSecondPeriod();this.dataFeeds.unsubscribeAll(),this.dataFeeds.getBars(r,e,c).then(function(r){o.period===t&&o.symbol===e&&(n.setData({lines:r}),n.dataFeeds.subscribeBars(i,a,c,e,function(t){n.updateData(t)}),n.getIndexPrice())})}},{key:"setData",value:function(t){t.lines&&this.control.setData(t.lines),t.depths&&this.control.setDepth(t.depths)}},{key:"updateData",value:function(t){this.mgr.updateData("f0.k0",t)}},{key:"getIndexPrice",value:function(){var t=this,e=this.kConfig,n=(e.compare||{}).index,o=this.kSettings.charts.mainIndic;if(n&&n.indicator&&o.includes("Index")){var r=e.symbol,i=e.period,a=n.klineUrl,c=n.product,u=n.channel,s=S.indexSymbol(r),l=this.getSecondPeriod();this.dataFeeds.getBars(a,s,l).then(function(n){e.period===i&&e.symbol===r&&(t.updateIndexPrice(n,!0),t.dataFeeds.subscribeBars(c,u,l,s,function(e){t.updateIndexPrice(e)}))})}}},{key:"unsubscribeIndexPrice",value:function(){var t=this.kConfig,e=t.symbol,n=t.compare.index,o=n.product,r=n.channel,i=this.getSecondPeriod(),a=e.replace(/^(\w+-\w+).*/,"$1");this.dataFeeds.unsubscribeBars(o,r,i,a)}},{key:"updateIndexPrice",value:function(t,e){this.mgr.updateIndexPrice("f0.k0",t,e)}},{key:"setDepth",value:function(t){this.setData({depths:t})}},{key:"updateLastData",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var o=e[n];t[o]=Number(t[o])}var r=this.mgr.getDataSource("f0.k0"),i=r.getData();if(i&&i.length>0){var a=i[i.length-1],c=a.high,u=a.low,s=t.close,l=t.volume;a.close=s,a.high=Math.max(c,s),a.low=Math.min(u,s),a.volume=l||a.volume,r.setData(i),this.mgr.redraw("All",!1)}}},{key:"updateConfig",value:function(t){var e=this;t&&Object.keys(t).forEach(function(n){e.kConfig[n]=t[n]})}},{key:"resize",value:function(t,e){var n=this.kConfig;this.kState.kScale=nm(),t=t||n.width,e=e||n.height,this.control.resize(t,e),this.cToolPanel.resize()}},{key:"hideToolOperation",value:function(){this.cToolPanel&&this.cToolPanel.hideToolOperation(),this.mgr&&this.mgr.unselectToolObjcet()}},{key:"destroy",value:function(){this.$doc.off(),this.overlayCanvas.off(),this.dataFeeds.destroy(),delete this.dataFeeds}},{key:"removeToolObject",value:function(t){46!==t.keyCode&&8!==t.keyCode||(this.mgr.updateToolObject("delete"),this.hideToolOperation())}},{key:"onVisibilitychange",value:function(){"visible"===document.visibilityState&&this.mgr.redraw("All",!0)}}]),e}(),rm={zh_hk:"zh_TW",zh_cn:"zh",en_us:"en",fr_fr:"fr",th_th:"th_TH",rn_ru:"ru",es_es:"es",vi_vi:"vi"};function im(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t.toLowerCase(),rm[t]?rm[t]:rm.en_us}function am(t){return"line"===t&&(t="1"),/m/.test(t)?t.replace(/m/,""):/h/.test(t)?"".concat(60*parseInt(t,10)):/y/.test(t)?"".concat(12*parseInt(t,10),"M"):t.toUpperCase()}var cm={S:1,m:60,H:3600,D:86400,W:604800,M:2678400};function um(t){if("12M"===t)return 31536e3;var e=t.replace(/\d*/,"")||"m";return parseInt(t,10)*cm[e]}function sm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var hm=function(t,e,n,o){return{time:(t=e?e(t,n,o):function(t){var e=fm(t,6),n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],c=e[5];return[new Date(n).getTime(),Number(o),Number(r),Number(i),Number(a),Number(c)]}(t))[0],open:t[1],high:t[2],low:t[3],close:t[4],volume:t[5]}},pm=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.symbolInfo=Object.assign({name:"",symbol:"",full_name:"",ticker:"",type:"bitcoin",session:"24x7",exchange:"OMEX",timezone:"Asia/Hong_Kong",minmov:1,pricescale:1e4,has_intraday:!0,has_dwm:!0,has_fractional_volume:!0,intraday_multipliers:["1","1","3","5","15","30","60","120","240","360","720","D","W","M","12M"],has_seconds:!1,seconds_multipliers:["5"],has_daily:!0,has_weekly_and_monthly:!0,volume_precision:8,data_status:"streaming",expired:!1,limit:100,base_name:[],legs:[]},n.symbolInfo,o),this.languageMap=Js(o.language),this.convertNames={},this.disconnected=!1,this.currentResolution=0,this.restCallback={},this.wsCallback={},this.subscribeChannel={},this.restCompare={},this.config=o,this.socket=new WebSocketCore({connectUrl:this.config.wsUrl});var r=this.socket;this.connected=new Promise(function(t){e.connectedHandle=r.onSocketConnected(function(){e.disconnected?(e.resetBars(),e.disconnected=!1):t()}),e.errorHandle=r.onSocketError(function(){e.disconnected=!0,e.resetBars()})}),this.pingHandle=r.onPushDiscontinue(function(){r.sendChannel("ping")}),this.PushHandle=r.setPushDataResolver(function(t){var n=t.table,o=t.data;n&&o&&o.forEach(function(t){var o=t.instrument_id,r=t.candle,i=e.getConfig(o),a=i.dataAdapter,c=i.charge,u=e.wsCallback["".concat(n,":").concat(o)];u&&u(hm(r,a,c,e.config.rate))})}),r.connect()}return function(t,e,n){e&&lm(t.prototype,e),n&&lm(t,n)}(t,[{key:"onReady",value:function(t){var e=this,n=this.config.compare;n?t({symbols_types:Object.keys(n).map(function(t){return{value:t,name:e.languageMap.compare["".concat(t,"_title")]}})}):t({})}},{key:"searchSymbols",value:function(t,e,n,o){var r=this.config.compare;if(n&&r){var i=r[n].listUrl;this.getCompareData(n,i).then(function(e){var r=e.key,i=e.data;if(r===n){var a=i.filter(function(e){return e.symbol.includes(t)});o(a)}}).catch(function(){o([])})}else o([])}},{key:"resolveSymbol",value:function(t,e,n){var o=this.getConfig(t).convertName,r=o?o(t,this.config.currency):t;t===this.symbolInfo.symbol&&(this.symbolInfo.base_name=[r],this.symbolInfo.legs=[r]),t!==r&&(this.convertNames[r]=t),e(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){sm(t,e,n[e])})}return t}({},this.symbolInfo,{symbol:this.convertNames[r]||t,name:r,full_name:r})),n("tradingView resolveSymbol error")}},{key:"getBars",value:function(t,e,n,o,r,i,a,c){var u=this,s=t.symbol,l=this.getConfig(s),f=l.product,h=l.channel,y=l.klineUrl,b=l.dataAdapter,d=l.charge,g=um(e);this.currentResolution=e,this.restCallback["".concat(f,"/").concat(h).concat(g,"s:").concat(s)]=r,a?p.ajax({url:"".concat(y.replace(/<symbol>/,s),"?granularity=").concat(g,"&size=1000")}).then(function(t){var e=t.code,n=t.data;if(0===e){if(s===u.config.symbol){for(var o,i=0,a=0;a<n.length;a++){o=n[a];for(var l=1;l<=4;l++){var f=Math.pow(10,S.safeDigits(o[l]));i<f&&(i=f)}}u.symbolInfo&&(u.symbolInfo.pricescale=i)}var h=function(t,e,n,o){return t.map(function(t){return hm(t,e,n,o)})}(n,b,d,u.config.rate);r(h),c&&c.subscribeChannel&&c.subscribeChannel()}else r([])}).catch(function(t){if(r([],{noData:!0}),!c||!c.subscribeChannel)throw t;c.subscribeChannel()}):r([],{noData:!0})}},{key:"resetBars",value:function(){var t=this;Object.keys(this.restCallback).forEach(function(e){var n={subscribeChannel:function(){t.subscribeChannel[e]&&t.subscribeChannel[e]()}},o=e.split(":")[1];t.getBars({symbol:o},t.currentResolution,null,null,t.restCallback[e],null,!0,n)})}},{key:"subscribeBars",value:function(t,e,n){var o=this,r=t.symbol,i=this.getConfig(r),a=um(e),c=i.product,u=i.channel,s="".concat(c,"/").concat(u).concat(a,"s:").concat(r);this.wsCallback[s]=n;var l=JSON.stringify({op:"subscribe",args:[s]});this.socket.isConnected()?this.socket.sendChannel(l):this.connected.then(function(){o.socket.sendChannel(l)}),this.subscribeChannel[s]=function(){o.socket&&o.socket.sendChannel(l)}}},{key:"unsubscribeBars",value:function(t){if(this.currentResolution){var e=t.split("_"),n=e.pop(),o=e.join(),r=um(n),i=this.getConfig(o),a=i.product,c=i.channel,u="".concat(a,"/").concat(c).concat(r,"s:").concat(o);if(delete this.restCallback[u],delete this.wsCallback[u],delete this.subscribeChannel[u],this.socket.isConnected()){var s={op:"unsubscribe",args:[u]};this.socket.sendChannel(JSON.stringify(s))}}}},{key:"getCompareData",value:function(t,e){var n=this,o=this.restCompare[t];if(o)return o;var r=p.ajax({url:e}).then(function(e){var o=e.code,r=e.data;if(0!==o)return{key:t,data:[]};var i=n.config,a=i.compare,c=i.currency,u=a[t].convertList(r,t,c,n.languageMap.compare);return n.config.compare[t].listData=u,{key:t,data:u}});return this.restCompare[t]=r,r}},{key:"getConfig",value:function(t){var e=this.symbolInfo.symbol,n=this.config.compare;if(t===e||!n)return this.config;var o=n.index,r=e.match(/^\w+-(\w+)/);if(r&&r[0]===t&&o)return o.charge=r[1],o;for(var i=Object.keys(n),a=0,c=i.length;a<c;a++)for(var u=n[i[a]],s=u.listData,l=0,f=s.length;l<f;l++){var h=s[l],p=h.full_name,y=h.charge;if(p===t)return u.charge=y,u}return this.config}},{key:"destroy",value:function(){if(this.socket.isConnected()){var t={op:"unsubscribe",args:Object.keys(this.restCallback)};this.socket.sendChannel(JSON.stringify(t))}this.pingHandle&&this.pingHandle(),this.PushHandle&&this.PushHandle(),this.connectedHandle&&this.connectedHandle(),this.errorHandle&&this.errorHandle(),delete this.socket,delete this.pingHandle,delete this.PushHandle,delete this.symbolInfo,delete this.restCallback,delete this.wsCallback,delete this.subscribeChannel,delete this.config,delete this.currentResolution,delete this.connected,delete this.disconnected,delete this.languageMap,delete this.convertNames}}]),t}(),ym={debug:!1,fullscreen:!1,symbol:"BTC/USDT",interval:"1",container_id:"chartContainer",timezone:"Asia/Hong_Kong",library_path:"/tradingview/",locale:"zh",client_id:"tradingview.com",user_id:"public_user_id",height:500,width:900,theme:"dark",hideHeaderWidget:!0,autosize:!0,supports_search:!1,supports_marks:!1,loading_screen:{backgroundColor:"#999",foregroundColor:"#f00"},study_count_limit:10,overrides:{volumePaneSize:"medium","mainSeriesProperties.lineStyle.color":"#FF0000"},studies_overrides:{"Overlay.style":2},allow_symbol_change:!0,drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},time_frames:[],disabled_features:["compare_symbol","display_market_status","go_to_date","header_chart_type","header_compare","header_interval_dialog_button","header_resolutions","header_screenshot","header_symbol_search","header_undo_redo","show_interval_dialog_on_key_press","snapshot_trading_drawings","symbol_info","use_localstorage_for_settings","volume_force_overlay","symbol_search_hot_key"],enabled_features:["header_indicators","hide_last_na_study_output","adaptive_logo","dont_show_boolean_study_arguments","same_data_requery","side_toolbar_in_fullscreen_mode","disable_resolution_rebuild"],studies_access:{type:"black",tools:[{name:"Ratio",grayed:!1},{name:"Spread",grayed:!1},{name:"Correlation Coefficient",grayed:!1}]}},bm=["EMA Cross","MACD","MA with EMA Cross","Ichimoku Cloud","Triple EMA","Price Channel","Moving Average Weighted","Momentum","Awesome Oscillator","Envelope","Double EMA","Donchian Channels","Balance of Power","Williams Fractal","Williams Alligator","Bollinger Bands","Smoothed Moving Average","VWAP","VWMA","Moving Average Exponential","Accumulative Swing Index","Least Squares Moving Average","Average True Range","Moving Average","Moving Average Channel","MA Cross","Ease of Movement","Linear Regression Curve","Hull Moving Average","SuperTrend","Mcginley Dynamic","Chande Kroll Stop","Arnaud Legoux Moving Average","Detrended Price Oscillator"],dm=n(2);function gm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mm=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),gm(this,"ready",function(t){t&&e.callbackList.push(t),e.readyState&&(e.callbackList.forEach(function(t){t()}),e.callbackList=[])}),gm(this,"init",function(){var t=e.widgetConfig,n=t.locale,o=t.theme,r=t.interval,i=t.container_id,a=e.themeInstance.Background;p("#".concat(i)).css({backgroundColor:a}),e.widgetConfig.loading_screen={backgroundColor:a},e.widgetConfig.custom_css_url=e.getCustomCSSFile(o),e.widgetConfig.locale=im(n),e.widgetConfig.interval=am(r),e.widgetConfig.overrides=e.getOverrides(),e.widget=new dm.widget(e.widgetConfig),e.widget.onChartReady(function(){e.readyState=!0,e.ready(),e.widgetConfig.onChartReady&&e.widgetConfig.onChartReady(),e.settingsOverrides(),e.chartOverrides(),e.widget.subscribe("study",e.onAddStudy),e.widget.subscribe("add_compare",e.onAddCompare),e.widget.subscribe("onAutoSaveNeeded",e.onAutoSaveNeeded),e.createCompare()})}),gm(this,"onAddStudy",function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;if("Overlay"===t||"Compare"===t){e.priceScaleMode=e.priceScale.getMode();var n=e.widget.activeChart().getAllStudies()||[],o=e.themeInstance["Indicator".concat(n.length%6)];e.widget.applyStudiesOverrides({"compare.plot.color":o,"Overlay.lineStyle.color":o})}}),gm(this,"onAddCompare",function(){e.priceScale.setMode(e.priceScaleMode)}),gm(this,"onAutoSaveNeeded",function(){e.widget.save(function(t){t&&t.charts&&0!==t.charts.length&&localStorage.setItem("omline-tv-settings",JSON.stringify(t.charts[0]))})}),gm(this,"createCompare",function(){var t=e.widgetConfig,n=t.compare,o=void 0===n?{}:n,r=t.symbol,i=e.widget.activeChart(),a=i.getPanes().find(function(t){return t.hasMainSeries()});if(a&&(e.priceScale=a.getMainSourcePriceScale(),e.priceScaleMode=e.priceScale.getMode(),o.index)){var c=S.indexSymbol(r),u=i.createStudy("Compare",!1,!1,["close",c]);if(!u.then)return void e.onAddCompare();u.then(e.onAddCompare)}}),gm(this,"settingsOverrides",function(){var t=localStorage.getItem("omline-tv-settings");if(t){var n=JSON.parse(t),o=n.panes,r=void 0===o?[]:o;if(0!==r.length){for(var i=r[0].sources,a=void 0===i?[]:i,c=a.length-1;c>=0;c--){var u=a[c].type;"study_Compare"!==u&&"study_Overlay"!==u||a.splice(c,1)}if(0!==a.length){var s=a[0].state,l=e.widgetConfig,f=l.interval,h=l.symbol;s.symbol=h,s.interval=am(f),e.widget.activeChart()._chartWidget.loadContent(n)}}}}),gm(this,"chartOverrides",function(){var t=Math.log(e.datafeed.symbolInfo.pricescale)/Math.log(10),n={};bm.forEach(function(e){n["".concat(e,".precision")]=t}),e.widget.applyStudiesOverrides(n);var o=e.widget.activeChart();o._chartWidget.model().mainSeries().updateSymbolInfo(e.datafeed.symbolInfo),"line"===e.widgetConfig.interval&&o.setChartType(2)}),gm(this,"setPeriod",function(t){var n=e.widget.activeChart(),o=n.chartType(),r=e.lastType,i=void 0===r?1:r;e.lastType=2===o?i:o,"line"===t?(n.setChartType(2),t="1"):n.setChartType(e.lastType);var a=am(t);n.setResolution(a,function(){})}),gm(this,"getCustomCSSFile",function(t){var e="assets/omfe/omui/omline/".concat("0.3.2","/css/").concat(t,".css");return"//static.bafang.com/cdn/".concat(e)}),gm(this,"switchIndics",function(){e.widget.activeChart()._chartWidget.showIndicators()}),gm(this,"screenshot",function(t){e.widget.subscribe("onScreenshotReady",function n(){e.widget.unsubscribe("onScreenshotReady",n),t&&t()}),e.widget.takeScreenshot()}),gm(this,"switchSettings",function(){var t=e.widget.activeChart()._chartWidget;(t.showChartProperties||t.showGeneralChartProperties).call(t)}),gm(this,"setTheme",function(t){e.widget.changeTheme(t);var n=e.getOverrides();e.applyOverrides(n),e.addCustomCSSFile(e.getCustomCSSFile(t))}),gm(this,"setLanguage",function(t){e.widget.setLanguage(im(t))}),gm(this,"setSymbol",function(t,n){e.widget.setSymbol(t,am(n),function(){})}),gm(this,"updateLastData",function(){}),gm(this,"showCompareOrAdd",function(){e.widget.activeChart()._chartWidget.showCompareOrAdd()}),gm(this,"addCustomCSSFile",function(t){e.widget.addCustomCSSFile(t)}),gm(this,"applyOverrides",function(t){e.widget.applyOverrides(t)}),gm(this,"getOverrides",function(){var t=e.themeInstance,n=t.Positive,o=t.Negative;return{"paneProperties.background":t.Background,"mainSeriesProperties.candleStyle.upColor":n,"mainSeriesProperties.candleStyle.downColor":o,"mainSeriesProperties.candleStyle.borderUpColor":n,"mainSeriesProperties.candleStyle.borderDownColor":o}}),gm(this,"destroy",function(){e.readyState=!1,e.widget._ready&&(e.widget.unsubscribe("study",e.onAddStudy),e.widget.unsubscribe("add_compare",e.onAddCompare),e.widget.unsubscribe("onAutoSaveNeeded",e.onAutoSaveNeeded),e.widget.remove(),e.datafeed.destroy())}),this.widgetConfig=Object.assign(ym,n),this.widgetConfig.datafeed=new pm(o,this.widgetConfig),this.datafeed=this.widgetConfig.datafeed,this.widgetConfig.hideHeaderWidget&&this.widgetConfig.disabled_features.push("header_widget"),this.callbackList=[],this.readyState=!1,this.priceScale={getMode:function(){},setMode:function(){}},this.priceScaleMode=0,this.themeInstance=q(this.widgetConfig.theme,this.widgetConfig)};function vm(t){return(vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wm(t,e){return!e||"object"!==vm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Om(t){return(Om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sm(t,e){return(Sm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wm(this,Om(e).call(this))).el=p(t.el),n.tState=t.tState,n.tSettings=t.tSettings,n.render(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sm(t,e)}(e,s),function(t,e,n){e&&_m(t.prototype,e),n&&_m(t,n)}(e,[{key:"render",value:function(){}},{key:"hide",value:function(){this.el.addClass("hide")}},{key:"show",value:function(){this.el.removeClass("hide")}},{key:"delete",value:function(){this.el[0].remove()}}]),e}(),km={barHeight:"36",periods:["line","1m","3m","5m","15m","30m","1h","2h","4h","6h","12h","1d","2d","3d","5d","1w","1M","3M","6M","1y"],periodCollects:["line","1m","3m","15m","1h","6h","1d","3d","1w","1M","1y"],period:"15m",mainIndics:["MA","EMA","BOLL","SAR","None"],mainIndic:["MA"],mainStyleCollects:["CandleStick"],mainStyle:"CandleStick",klineType:"Original",theme:"dark",showFullscreen:!0,showToggle:!1,language:"en_us",showIndics:!0,showLineTool:!1,showScreenshot:!0,logoIcon:{type:"txt",content:""}};n(11);function jm(t){return(jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cm(t,e){return!e||"object"!==jm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tm(t){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Im(t,e){return(Im=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Em=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Cm(this,Tm(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Im(t,e)}(e,Pm),function(t,e,n){e&&xm(t.prototype,e),n&&xm(t,n)}(e,[{key:"render",value:function(){var t=this.tState.logoIcon;t.content&&(this.el.removeClass("hide"),"img"===t.type?this.el.html('<img src="'.concat(t.content,'"/>')):this.el.html("<span>".concat(t.content,"</span>")))}}]),e}();n(12);function Am(t){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Dm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Rm(t,e){return!e||"object"!==Am(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nm(t){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lm(t,e){return(Lm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rm(this,Nm(e).call(this,t))).list=t.list||[],n.showList=t.showList||[],n.selected=t.selected,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lm(t,e)}(e,Pm),function(t,e,n){e&&Dm(t.prototype,e),n&&Dm(t,n)}(e,[{key:"bindEvent",value:function(){var t=this,e=this.el.parent(),n=p(".dropdown",this.el),o=p(".arrow",this.el),r=p(".arrow span",this.el);this.el.on("click",function(e){var i=p(e.target).closest("div");if(i&&i.hasClass("collect-icon"))return t.collectChange(i.parent().attr("key")),t.emit("collect-change",Mm(t.showList)),void e.stopPropagation();(i=p(e.target).closest(".dropdown.edit li[ev=period], .dropdown div[ev=period]"))?t.emit("period-edit",i):(i=p(e.target).closest("li"))&&i.attr("key")&&!i.hasClass("stop-propagation")&&(i.hasClass("checkbox")||(r.css({"transition-duration":"0.5s",transform:"rotate(0deg)"}),o.removeClass("hover"),n.addClass("hide")),t.selectChange(i.attr("key")),t.emit("select-change",i.attr("key")))});var i=function(){n.removeClass("hide");var i=e[0].getBoundingClientRect(),a=i.width,c=i.height,u=i.bottom,s=t.el[0],l=s.offsetLeft,f=s.offsetWidth,h=n[0].offsetWidth,p=f+l-o[0].offsetWidth-36;p<0&&(p=10),p+h>a&&(p=a-h-10),o.addClass("hover"),r.css({"transition-duration":"0.5s",transform:"rotate(180deg)"}),n.css({top:"".concat(c-1,"px"),left:"".concat(p,"px"),maxHeight:"".concat(window.innerHeight-u-5,"px")}),t.emit("show")},a=function(){r.css({"transition-duration":"0.5s",transform:"rotate(0deg)"}),o.removeClass("hover"),n.addClass("hide")};if(this.el.on("mouseleave",a),k.isMobile)return o.on("touchstart",function(){n.hasClass("hide")?i():a()}),this.el.on("touchstart",function(t){t.stopPropagation()}),void window.addEventListener("touchstart",a);o.on("mouseenter",function(){n.hasClass("hide")&&i()})}},{key:"selectChange",value:function(t){var e=this.showList,n=this.selected,o=p('.collect li[key="'.concat(n,'"]'),this.el),r=y('li[key="'.concat(n,'"]'),this.el),i=p('.collect li[key="'.concat(t,'"]'),this.el),a=y('li[key="'.concat(t,'"]'),this.el);-1==e.indexOf(n)&&o.addClass("hide"),r.removeClass("selected"),a.addClass("selected"),i.removeClass("hide"),this.selected=t}},{key:"collectChange",value:function(t){var e=this.showList,n=this.selected,o=p('.collect li[key="'.concat(t,'"]'),this.el),r=p('.dropdown li[key="'.concat(t,'"] .collect-icon'),this.el),i=p("i",r),a=e.indexOf(t);if(a>-1)return n!=t&&o.addClass("hide"),r.removeClass("collected"),i.removeClass("iconStar"),i.addClass("iconStar-o"),void e.splice(a,1);o.removeClass("hide"),r.addClass("collected"),i.addClass("iconStar"),i.removeClass("iconStar-o"),e.push(t)}},{key:"render",value:function(){this.el.html('<div class="collect"></div><div class="dropdown hide"></div><div class="border-line"></div>')}}]),e}();n(13);function Vm(t){return(Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bm(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Hm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ym(t,e){return!e||"object"!==Vm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xm(t,e,n){return(Xm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Um(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Um(t){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wm(t,e){return(Wm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zm=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=t.tState.periods,r=t.tSettings,i=r.periodCollects,a=r.period;return t.list=o,t.showList=Bm(i),t.selected=a,(n=Ym(this,Um(e).call(this,t))).bindEvent(),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wm(t,e)}(e,Fm),function(t,e,n){e&&Hm(t.prototype,e),n&&Hm(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;Xm(Um(e.prototype),"bindEvent",this).call(this),this.on("period-edit",function(e){var n=e.attr("type"),o=e.attr("key");switch(n){case"edit":t.setEditState();break;case"complete":t.setCompleteState();break;case"remove":t.setPeriodState(o,"bottom");break;case"add":t.setPeriodState(o,"top")}}),this.on("show",function(){p(".dropdown",t.el).addClass("complete").removeClass("edit"),t.setPeriodList()})}},{key:"setLanguage",value:function(){var t=this,e=this.tState.periods,n=Js(this.tState.language);e.forEach(function(e){var o=e.replace(/\D/g,""),r=e.replace(/\d/g,"");y('span[key="'.concat(e,'"]'),t.el).html("".concat("line"==r?"":o).concat(n.period[r]))}),y(".dropdown div[lang]",this.el).each(function(t){var e=p(t),o=e.attr("lang");e.html(n.period[o])})}},{key:"setEditState",value:function(){p(".dropdown",this.el).addClass("edit").removeClass("complete")}},{key:"setCompleteState",value:function(){p(".dropdown",this.el).addClass("complete").removeClass("edit");var t=[];y(".top li",this.el).each(function(e){var n=p(e);n.hasClass("hide")||t.push(n.attr("key"))}),this.showList=t,this.emit("collect-change",t.concat())}},{key:"setPeriodState",value:function(t,e){y('.dropdown li[key="'.concat(t,'"]'),this.el).addClass("hide"),p(".dropdown .".concat(e,' li[key="').concat(t,'"]'),this.el).removeClass("hide")}},{key:"setPeriodList",value:function(){var t=this;y(".dropdown li[key]",this.el).removeClass("hide"),this.list.forEach(function(e){var n=t.showList.includes(e),o=p('.top li[key="'.concat(e,'"]'),t.el),r=p('.bottom li[key="'.concat(e,'"]'),t.el);n?r.addClass("hide"):o.addClass("hide")})}},{key:"setTopBottom",value:function(){var t=p(".dropdown .top",this.el),e=p(".dropdown .bottom",this.el),n=y("li.hide",t),o=y("li.hide",e);t.removeClass("hide"),e.removeClass("hide"),n&&n.length==this.list.length&&t.addClass("hide"),o&&o.length==this.list.length&&e.addClass("hide")}},{key:"render",value:function(){Xm(Um(e.prototype),"render",this).call(this);var t=this.tState.periods,n=this.tSettings,o=n.period,r=n.periodCollects,i=p(".collect",this.el),a=p(".dropdown",this.el),c=[],u=[],s=[];t.forEach(function(t){var e=o==t?"selected":"",n=r.includes(t)?"":"hide",i='key="'.concat(t,'"');c.push('<li class="'.concat(e," ").concat(n,'" ').concat(i,"><span ").concat(i," /></li>")),u.push('<li class="'.concat(e," ").concat(n,'" ').concat(i,' ev="period" type="remove"><span ').concat(i,"></span><div>-</div></li>")),s.push('<li class="'.concat(e," ").concat(n?"":"hide",'" ').concat(i,' ev="period" type="add"><span ').concat(i,"></span><div>+</div></li>"))}),c.push('<li class="arrow"><span><i class="iconfont iconkline-down"></i></span></li>'),i.html("<ul>".concat(c.join(""),"</ul>"));var l='<div class="top"><div class="period-header"><div lang="my"></div><div lang="edit" ev="period" type="edit"></div><div lang="complete" ev="period" type="complete"></div></div><ul>'.concat(u.join(""),"</ul></div>"),f='<div class="bottom"><div class="period-header"><div lang="more"></div></div><ul>'.concat(s.join(""),"</ul></div>");a.addClass("complete"),a.html("".concat(l).concat(f))}}]),e}();function Gm(t){return(Gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jm(t,e){return!e||"object"!==Gm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Km(t){return(Km=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $m(t,e){return($m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jm(this,Km(e).call(this,t))).el.on("click",function(t){var e=p(t.target).closest("li");if(e){var o=e.hasClass("selected");o||"TradingView"==n.tSettings.klineType?e.removeClass("selected"):e.addClass("selected"),n.emit("switch",!o)}}),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$m(t,e)}(e,Pm),function(t,e,n){e&&qm(t.prototype,e),n&&qm(t,n)}(e,[{key:"setLanguage",value:function(){var t=Js(this.tState.language);p("li",this.el).attr("name",t.str_indicator)}},{key:"renderOriginal",value:function(){var t=p("li",this.el);this.tSettings.showIndics?t.addClass("selected"):t.removeClass("selected")}},{key:"renderTradingView",value:function(){p("li",this.el).removeClass("selected")}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconzhibiaozhuanqu"></i></li>'),"Original"==this.tSettings.klineType?this.renderOriginal():this.renderTradingView()}}]),e}();n(14);function Zm(t){return(Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tv(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ev(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nv(t,e){return!e||"object"!==Zm(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ov(t,e,n){return(ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rv(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function rv(t){return(rv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iv(t,e){return(iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var av=[],cv=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=t.tState.mainIndics,r=t.tSettings.mainIndic;return t.list=tv(o),t.showList=r.length>0?tv(r):["None"],av=tv(r),(n=nv(this,rv(e).call(this,t))).bindEvent(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iv(t,e)}(e,Fm),function(t,e,n){e&&ev(t.prototype,e),n&&ev(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;ov(rv(e.prototype),"bindEvent",this).call(this),this.on("select-change",function(e){if(y("li",t.el).removeClass("selected"),y(".collect li",t.el).addClass("hide"),y(".dropdown li i",t.el).removeClass("iconicn-d-check-outline-lg").addClass("iconcheckbox-selecte"),"None"==e)av=[];else{var n=av.indexOf(e);n>-1?av.splice(n,1):av.push(e),av.length>2&&(av=av.slice(1,3)),av.forEach(function(e){y('li[key="'.concat(e,'"]'),t.el).addClass("selected"),p('.collect li[key="'.concat(e,'"]'),t.el).removeClass("hide"),p('.dropdown li[key="'.concat(e,'"] i'),t.el).addClass("iconicn-d-check-outline-lg").removeClass("iconcheckbox-selecte")})}0==av.length&&(y('li[key="None"]',t.el).addClass("selected"),p('.collect li[key="None"]',t.el).removeClass("hide"),p('.dropdown li[key="None"] i',t.el).addClass("iconicn-d-check-outline-lg").removeClass("iconcheckbox-selecte")),t.emit("main-indicators",tv(av))})}},{key:"render",value:function(){ov(rv(e.prototype),"render",this).call(this);var t=this.tState.mainIndics,n=this.tSettings.mainIndic,o=tv(t),r=n.length>0?tv(n):["None"],i=p(".collect",this.el),a=p(".dropdown",this.el),c=[],u=[];o.forEach(function(t){var e=r.indexOf(t)>-1,n='key="'.concat(t,'"'),o='class="'.concat(e?"selected":"hide",' stop-propagation"'),i='class="'.concat(e?"selected":"",' checkbox"'),a='class="'.concat(e?"iconfont iconicn-d-check-outline-lg":"iconfont iconcheckbox-selecte",'"');c.push("<li ".concat(n," ").concat(o,"><span ").concat(n,">").concat(t,"</span></li>")),u.push("<li ".concat(n," ").concat(i,"><span ").concat(n,">").concat(t,'</span><div class="checkbox"><i ').concat(a,"></i></div></li>"))}),c.push('<li class="arrow"><span><i class="iconfont iconkline-down"></i></span></li>'),i.html("<ul>".concat(c.join(""),"</ul>")),a.html("<ul>".concat(u.join(""),"</ul>"))}}]),e}();n(15);function uv(t){return(uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sv(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function lv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fv(t,e){return!e||"object"!==uv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hv(t,e,n){return(hv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pv(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function pv(t){return(pv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yv(t,e){return(yv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bv=["CandleStick","CandleStickHLC","OHLC"],dv={CandleStick:"iconcandlestick",CandleStickHLC:"iconcandlestickhlc",OHLC:"iconohlc"},gv=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=t.tSettings,r=o.mainStyleCollects,i=o.mainStyle;return t.list=bv,t.showList=sv(r),t.selected=i,(n=fv(this,pv(e).call(this,t))).bindEvent(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yv(t,e)}(e,Fm),function(t,e,n){e&&lv(t.prototype,e),n&&lv(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;hv(pv(e.prototype),"bindEvent",this).call(this),this.on("collect-change",function(){t.emit("style-collect",sv(t.showList))})}},{key:"render",value:function(){hv(pv(e.prototype),"render",this).call(this);var t=this.tSettings,n=t.mainStyleCollects,o=t.mainStyle,r=sv(n),i=o,a=p(".collect",this.el),c=p(".dropdown",this.el),u=[],s=[];bv.forEach(function(t){var e='name="'.concat(t,'"'),n='key="'.concat(t,'"'),o=r.indexOf(t)>-1,a='class="'.concat(i==t?"selected":o||"hide",'"'),c='class="'.concat(i==t?"selected":"",'"'),l='class="'.concat(o?"collected":"",' collect-icon"'),f='class="'.concat(o?"iconfont iconStar":"iconfont iconStar-o",'"');u.push("<li ".concat(e," ").concat(n," ").concat(a,'><i class="iconfont ').concat(dv[t],'"></i></li>')),s.push("<li ".concat(n," ").concat(c,'><i class="iconfont ').concat(dv[t],'"></i><span ').concat(n,">").concat(t,"</span><div ").concat(l,"><i ").concat(f,"></i></div></li>"))}),u.push('<li class="arrow"><span><i class="iconfont iconkline-down"></i></span></li>'),a.html("<ul>".concat(u.join(""),"</ul>")),c.html("<ul>".concat(s.join(""),"</ul>"))}}]),e}();function mv(t){return(mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _v(t,e){return!e||"object"!==mv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ov(t,e){return(Ov=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Sv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_v(this,wv(e).call(this,t))).el.on("click",function(t){var e=p(t.target).closest("li");if(e){var o=e.hasClass("selected");o?e.removeClass("selected"):e.addClass("selected"),n.emit("switch",!o)}}),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ov(t,e)}(e,Pm),function(t,e,n){e&&vv(t.prototype,e),n&&vv(t,n)}(e,[{key:"setLanguage",value:function(){var t=Js(this.tState.language);p("li",this.el).attr("name",t.str_tools)}},{key:"render",value:function(){if(k.isMobile)this.delete();else{var t='class="'.concat(this.tSettings.showLineTool?"selected":"",'"');this.el.html("<li ".concat(t,'><i class="iconfont iconmeasure-tool"></i></li>'))}}}]),e}();function Pv(t){return(Pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jv(t,e){return!e||"object"!==Pv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xv(t){return(xv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cv(t,e){return(Cv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jv(this,xv(e).call(this,t))).el.on("click",function(){n.emit("click")}),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cv(t,e)}(e,Pm),function(t,e,n){e&&kv(t.prototype,e),n&&kv(t,n)}(e,[{key:"setLanguage",value:function(){var t=Js(this.tState.language);p("li",this.el).attr("name",t.str_screenshot)}},{key:"render",value:function(){this.tState.showScreenshot||this.el.addClass("hide"),this.el.html('<li><i class="iconfont iconIcon-Photo"></i></li>')}}]),e}();function Iv(t){return(Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ev(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Av(t,e){return!e||"object"!==Iv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mv(t){return(Mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dv(t,e){return(Dv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Av(this,Mv(e).call(this,t))).el.on("click",function(){n.emit("click",!0)}),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dv(t,e)}(e,Pm),function(t,e,n){e&&Ev(t.prototype,e),n&&Ev(t,n)}(e,[{key:"setLanguage",value:function(){var t=Js(this.tState.language);p("li",this.el).attr("name",t.str_setting)}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconmenu-administration"></i></li>')}}]),e}();function Nv(t){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Fv(t,e){return!e||"object"!==Nv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vv(t){return(Vv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bv(t,e){return(Bv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Fv(this,Vv(e).call(this,t))).isFull=!1,n.el.on("click",function(){n.isFull=!n.isFull,k.isMobile&&!k.isUC&&(n.isFull?n.requestFullscreen():n.cancelFullScreen());var t=p("i",n.el);t.removeClass("iconexitfullscreen1"),t.removeClass("iconfullscreen2"),n.isFull?t.addClass("iconexitfullscreen1"):t.addClass("iconfullscreen2"),n.emit("click",n.isFull),n.setLanguage(),p(".popover",n.el.parent()).addClass("hide")}),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bv(t,e)}(e,Pm),function(t,e,n){e&&Lv(t.prototype,e),n&&Lv(t,n)}(e,[{key:"setLanguage",value:function(){var t=Js(this.tState.language),e=this.isFull?t.str_fullscreen_close:t.str_fullscreen;p("li",this.el).attr("name",e)}},{key:"requestFullscreen",value:function(){var t=document.documentElement,e=t.requestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;e&&e.call(t)}},{key:"cancelFullScreen",value:function(){var t=document,e=t.cancelFullScreen||t.webkitCancelFullScreen||t.mozCancelFullScreen||t.exitFullScreen;e&&e.call(t)}},{key:"render",value:function(){var t=this.tState.showFullscreen,e='class="'.concat(t?"":"hide",'"');this.el.html("<li ".concat(e,'><i class="iconfont iconfullscreen2"></i></li>'))}}]),e}();n(16);function Yv(t){return(Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uv(t,e){return!e||"object"!==Yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wv(t){return(Wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zv(t,e){return(zv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Uv(this,Wv(e).call(this,t))).bindEvent(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zv(t,e)}(e,Pm),function(t,e,n){e&&Xv(t.prototype,e),n&&Xv(t,n)}(e,[{key:"bindEvent",value:function(){var t=this;this.el.on("click",function(e){var n=p(e.target),o=n.attr("key");o&&o!=t.tSettings.klineType&&(y("span",t.el).removeClass("selected"),n.addClass("selected"),t.emit("toggle",o))})}},{key:"render",value:function(){this.tState.showToggle&&!k.isMobile||this.hide();var t=this.tSettings.klineType,e='key="Original" class="'.concat("Original"==t?"selected":"",'"'),n="<span ".concat(e,">Original</span>"),o='key="TradingView" class="'.concat("TradingView"==t?"selected":"",'"'),r="<span ".concat(o,">TradingView</span>");this.el.html("".concat(n).concat(r))}}]),e}();n(17);function qv(t){return(qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jv(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kv(t,e){return!e||"object"!==qv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $v(t){return($v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qv(t,e){return(Qv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zv=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Kv(this,$v(e).call(this,t))).bindEvent(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qv(t,e)}(e,Pm),function(t,e,n){e&&Jv(t.prototype,e),n&&Jv(t,n)}(e,[{key:"bindEvent",value:function(){if(!k.isMobile){var t=this.el.parent(),e=p(".popover",t);t.on("mousemove",function(n){var o=p(n.target).closest("li");if(e.addClass("hide"),o){var r=o.attr("name");if(r){e.removeClass("hide"),e.addClass("bottom"),e.removeClass("top"),p(".title",e).html(r);var i=t[0].getBoundingClientRect(),a=i.top,c=i.left,u=e[0].getBoundingClientRect().width,s=o[0].getBoundingClientRect(),l=s.left-c-u/2+s.width/2,f=s.bottom-a;e.css({left:"".concat(l,"px"),top:"".concat(f,"px")})}}}).on("mouseleave",function(){e.addClass("hide")})}}},{key:"render",value:function(){k.isMobile?this.delete():this.el.html('<div class="title"></div><div class="triangle"></div><div class="split"></div>')}}]),e}();function t_(t){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e_(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n_(t,e){return!e||"object"!==t_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o_(t){return(o_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r_(t,e){return(r_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n_(this,o_(e).call(this,t))).el.on("click",function(){n.emit("click",!0)}),E(function(){n.setLanguage()}),n.setLanguage(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r_(t,e)}(e,Pm),function(t,e,n){e&&e_(t.prototype,e),n&&e_(t,n)}(e,[{key:"setLanguage",value:function(){var t=Js(this.tState.language);p("li",this.el).attr("name",t.str_compare)}},{key:"render",value:function(){this.el.html('<li><i class="iconfont iconcompare-tool"></i></li>')}}]),e}();function a_(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c_(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tConfig=e.tConfig,this.kId=e.kId;var n=this.load()||this.getDefault();return D(n),this.data=n,n.save=this.save.bind(this),t.instanceMap[e.kId]=n,n}return function(t,e,n){e&&c_(t.prototype,e),n&&c_(t,n)}(t,[{key:"getDefault",value:function(){var t=this.tConfig;return{periodCollects:a_(t.periodCollects),period:t.period,mainIndic:a_(t.mainIndic),mainStyleCollects:a_(t.mainStyleCollects),mainStyle:t.mainStyle,klineType:t.klineType,theme:t.theme,showIndics:t.showIndics,showLineTool:t.showLineTool}}},{key:"load",value:function(){try{var t=w("toolbar-settings-".concat(this.kId));if(!t)return;var e=JSON.parse(t),n=e.mainIndic;if(!n)return e.mainIndic=[],e;var o=n.indexOf("Index");return!this.tConfig.indexIndicator&&o>-1&&n.splice(o,1),e}catch(t){}}},{key:"save",value:function(){try{O("toolbar-settings-".concat(this.kId),JSON.stringify(this.data))}catch(t){}}}],[{key:"getInstance",value:function(e){return t.instanceMap[e]}}]),t}();!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(u_,"instanceMap",{});var s_=n(3),l_=n.n(s_);n(18),n(19);function f_(t){return(f_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h_(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y_(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function b_(t,e){return!e||"object"!==f_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d_(t){return(d_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g_(t,e){return(g_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m_=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=D(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){p_(t,e,n[e])})}return t}({},JSON.parse(JSON.stringify(km)),t)),r=o.mainIndics;o.indexIndicator&&!r.includes("Index")&&r.splice(r.length-1,0,"Index"),k.isMobile&&(o.showToggle=!1,o.showScreenshot=!1);var i=new u_({tConfig:o,kId:t.element.replace(/[#.]/g,"")});i.theme=o.theme||i.theme;var a=p(o.anchor||t.element);return p(l_.a).append(a),(n=b_(this,d_(e).call(this,{tState:o,tSettings:i,el:p(".k-toolbar",a)}))).anchor=a,n.config=o,n.settings=i,n.init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g_(t,e)}(e,Pm),function(t,e,n){e&&y_(t.prototype,e),n&&y_(t,n)}(e,[{key:"init",value:function(){var t=this,e=this.config,n=this.tSettings;this.setTheme(n.theme),this.el.css({height:"".concat(e.barHeight,"px")}),new Zv({el:p(".popover",this.el),tState:e,tSettings:n}),new Em({el:p(".icon",this.el),tState:e,tSettings:n}),this.periodSelect=new zm({el:p(".periods",this.el),tState:e,tSettings:n}),this.periodSelect.on("select-change",function(e){t.saveSettings("period",e),t.emit("period-select",e),t.resize()}),this.periodSelect.on("collect-change",function(e){t.saveSettings("periodCollects",e),t.resize()}),this.mainIndicators=new cv({el:p(".main-indicators",this.el),tState:e,tSettings:n}),this.mainIndicators.on("main-indicators",function(e){t.saveSettings("mainIndic",h_(e)),t.emit("main-indicators",e),t.resize()}),this.mainStyle=new gv({el:p(".main-style",this.el),tState:e,tSettings:n}),this.mainStyle.on("select-change",function(e){t.saveSettings("mainStyle",e),t.emit("style-select",e),t.resize()}),this.mainStyle.on("style-collect",function(e){t.saveSettings("mainStyleCollects",e),t.resize()}),this.technicalIndicators=new Qm({el:p(".technical-indicator",this.el),tState:e,tSettings:n}),this.technicalIndicators.on("switch",function(e){"Original"==t.settings.klineType&&t.saveSettings("showIndics",e),t.emit("technical-indicators",e)}),this.lineTool=new Sv({el:p(".line-tool",this.el),tState:e,tSettings:n}),this.lineTool.on("switch",function(e){t.saveSettings("showLineTool",e),t.emit("line-tool",e)}),this.screenshot=new Tv({el:p(".screenshot",this.el),tState:e,tSettings:n}),this.screenshot.on("click",function(){t.emit("screenshot")}),this.compare=new i_({el:p(".compare",this.el),tState:e,tSettings:n}),this.compare.on("click",function(e){t.emit("compare",e)}),this.setting=new Rv({el:p(".setting",this.el),tState:e,tSettings:n}),this.setting.on("click",function(e){t.emit("setting",e)}),this.fullscreen=new Hv({el:p(".fullscreen",this.el),tState:e,tSettings:n}),this.fullscreen.on("click",function(e){t.emit("fullscreen",e)}),this.toggle=new Gv({el:p(".toggle",this.el),tState:e,tSettings:n}),this.toggle.on("toggle",function(e){"Original"==e?t.technicalIndicators.renderOriginal():t.technicalIndicators.renderTradingView(),t.saveSettings("klineType",e),t.emit("kline-toggle",e)}),this.resize()}},{key:"setLanguage",value:function(t){this.config.language=t}},{key:"getLanguage",value:function(){return this.config.language}},{key:"setTheme",value:function(t){this.saveSettings("theme",t),this.el.attr("class","k-toolbar ".concat(t))}},{key:"getTheme",value:function(){return this.settings.theme}},{key:"saveSettings",value:function(t,e){this.settings[t]=e,this.settings.save()}},{key:"getKlineType",value:function(){return k.isMobile?"Original":this.settings.klineType||this.config.klineType||"Original"}},{key:"getPeriod",value:function(){return this.settings.period}},{key:"resize",value:function(){var t=this,e=this.el,n=p(".setting",e),o=e[0].offsetWidth;y(".collect li",e).addClass("hide"),y(".collect li.selected, .collect li.arrow",e).removeClass("hide"),y(".dropdown .collected, .dropdown .top li span",e).each(function(r){var i=p(r).parent().attr("key"),a=p('.collect li[key="'.concat(i,'"]'),e);if(a.hasClass("hide")&&!p(r).parent().hasClass("hide")){a.removeClass("hide");var c=t.config.showToggle?212:68;o-n[0].offsetLeft<c&&a.addClass("hide")}})}}]),e}(),v_=Object.keys(km);function __(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w_=function(t,e,n,o){return t.map(function(t){var r=t.coin,i=t.instrumentId,a=t.charge,c=t.type,u="USD"===a&&"index"===e?n:a,s=o["".concat(e,"_desc")]||o["".concat(e,"_desc_").concat(c)]||"";return{symbol:r,description:"".concat(u).concat(s),full_name:i,charge:a}})},O_=function(t,e,n){var o="USD"===e?n:1,r=__(t,6),i=r[0],a=r[1],c=r[2],u=r[3],s=r[4],l=r[5];return[new Date(i).getTime(),Number(a)*o,Number(c)*o,Number(u)*o,Number(s)*o,Number(l)]},S_={compare:{index:{product:"index",channel:"candle",indicator:!0,klineUrl:"/api/index/v3/instruments/<symbol>/candles",listUrl:"/api/index/v3/instruments/list",listData:[],convertName:function(t,e){return".".concat(S.replaceCurrency(t,e))},convertList:w_,dataAdapter:O_},futures:{product:"futures",channel:"candle",klineUrl:"/v3/futures/pc/market/<symbol>/candles",listUrl:"/v3/futures/pc/public/contractInfo",listData:[],convertList:w_,dataAdapter:O_},swap:{product:"swap",channel:"candle",klineUrl:"/v2/perpetual/pc/public/instruments/<symbol>/candles",listUrl:"/v2/perpetual/pc/public/contract/info",listData:[],convertList:w_,dataAdapter:O_}}},P_=n(4),k_=n.n(P_);n(20);function j_(t){return(j_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){C_(t,e,n[e])})}return t}function C_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T_(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function I_(t,e){return!e||"object"!==j_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E_(t){return(E_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A_(t,e){return(A_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var M_=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Object.keys(t).forEach(function(e){void 0===t[e]&&delete t[e]}),n=I_(this,E_(e).call(this)),t.language=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t.toLowerCase(),qs[t]?t:"en_us"}(t.language),t.channel=t.channel||"candle";var o=t.compare,r=void 0===o?{}:o;Object.keys(r).forEach(function(t){!0===r[t]&&(r[t]=S_.compare[t])}),n.config=t;var i=p(t.element);n.anchor=i,i.html(k_.a),n.containerAnchor=p(".kline-wrap",i),n.omlineAnchor=p("#omline-wrap",i),n.tvklineAnchor=p("#tv-kline-wrap",i),n.toolbarAnchor=p(".k-toolbar-wrap",i),n.loaddingAnchor=p(".kline-loadding",i);var a={};v_.forEach(function(e){void 0!==t[e]&&void 0!==km[e]&&(a[e]=t[e])});var c=new m_(x_({anchor:n.toolbarAnchor[0]},a,{element:t.element,showToggle:void 0===t.showToggle||t.showToggle,indexIndicator:r.index&&r.index.indicator}));return n.toolbar=c,n.toolbarRect=n.toolbarAnchor[0].getBoundingClientRect(),n.resize(t.width,t.height),n.isOriginal()?(n.omlineAnchor.css({display:"flex"}),n.tvklineAnchor.css({display:"none"}),n.createOMline()):(n.omlineAnchor.css({display:"none"}),n.tvklineAnchor.css({display:"flex"}),n.createTV()),c.on("period-select",function(t){n.emit("period-select",t),n.setPeriod(t)}),c.on("technical-indicators",function(t){n.kline.switchIndics(t)}),c.on("main-indicators",function(t){n.kline.setMainIndicator(t)}),c.on("style-select",function(t){n.kline.setMainStyle(t)}),c.on("line-tool",function(t){n.kline.switchTools(t)}),c.on("screenshot",function(){n.isOriginal()||n.showLoadding(),n.kline.screenshot(function(){n.hideLoadding()})}),c.on("compare",function(){n.kline.showCompareOrAdd()}),c.on("setting",function(t){n.kline.switchSettings(t)}),c.on("fullscreen",function(t){n.switchFullscreen(t)}),c.on("kline-toggle",function(t){n.isOriginal(t)?(n.tvKline&&n.tvKline.destroy(),n.tvKline=null,n.omlineAnchor.css({display:"flex"}),n.tvklineAnchor.css({display:"none"}),n.omline?n.kline=n.omline:n.createOMline()):(n.omline&&n.omline.destroy(),n.omline=null,n.omlineAnchor.css({display:"none"}),n.tvklineAnchor.css({display:"flex"}),n.createTV())}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A_(t,e)}(e,s),function(t,e,n){e&&T_(t.prototype,e),n&&T_(t,n)}(e,[{key:"isOriginal",value:function(t){return"original"===(t=(t||this.toolbar.getKlineType()).toLowerCase())}},{key:"createOMline",value:function(){var t=this;this.showLoadding(),this.omlineAnchor.html("");var e=this.toolbar;e.mainIndicators.show(),e.mainStyle.show(),e.lineTool.show(),e.compare.hide(),e.resize(),this.omline=new om(x_({},R,this.config,{period:e.getPeriod(),theme:e.getTheme(),onChartReady:function(){t.onChartReady()},anchor:this.omlineAnchor[0]})),this.kline=this.omline}},{key:"createTV",value:function(){var t=this;this.showLoadding();var e=this.toolbar;e.mainIndicators.hide(),e.mainStyle.hide(),e.lineTool.hide(),this.config.compare?e.compare.show():e.compare.hide(),e.resize(),this.tvKline=new mm(x_({container_id:"tv-kline-wrap"},this.config,{onChartReady:function(){t.onChartReady()},interval:this.getPeriod(),locale:this.config.language,theme:e.getTheme()}),{}),this.tvKline.init(),this.kline=this.tvKline}},{key:"onChartReady",value:function(){this.hideLoadding()}},{key:"ready",value:function(){var t=this;return new Promise(function(e,n){t.kline&&t.kline.ready(e,n)})}},{key:"showLoadding",value:function(){var t=q(this.toolbar.getTheme()).Background;this.loaddingAnchor.css({display:"block",backgroundColor:t})}},{key:"hideLoadding",value:function(){this.loaddingAnchor.css({display:"none"})}},{key:"setPeriod",value:function(t){this.kline.setPeriod(t)}},{key:"getPeriod",value:function(){return this.toolbar.getPeriod()}},{key:"setTheme",value:function(t){p(".kline-wrap",this.el).attr("class","kline-wrap ".concat(t)),this.toolbar.setTheme(t),this.kline.setTheme(t)}},{key:"setLanguage",value:function(t){this.config.language=t,this.toolbar.setLanguage(t),this.kline.setLanguage(t)}},{key:"setCurrency",value:function(t){this.config.currency=t}},{key:"setSymbol",value:function(t,e){this.updateConfig(e),this.config.symbol=t,this.isOriginal()?this.kline.setSymbol(t,e):(this.kline.destroy(),this.createTV(t))}},{key:"setData",value:function(t){this.kline.setData&&this.kline.setData(t)}},{key:"updateData",value:function(t){this.kline.updateData&&this.kline.updateData(t)}},{key:"setDepth",value:function(t){this.setData({depths:t})}},{key:"updateLastData",value:function(t){this.kline.updateLastData(t)}},{key:"updateConfig",value:function(t){var e=this;t&&(Object.keys(t).forEach(function(n){e.config[n]=t[n]}),this.isOriginal()&&this.kline.updateConfig(t))}},{key:"switchToggle",value:function(t){var e=this.toolbar,n=e.toggle,o=e.fullscreen;if(t)return n.show(),o.el.removeClass("full-right"),void this.toolbar.resize();n.hide(),this.isOriginal()||n.emit("toggle","Original")}},{key:"switchFullscreen",value:function(t){this.fullscreen=t,t?(this.containerAnchor.css({position:"fixed",zIndex:"10000"}),this.layout(window.innerWidth,window.innerHeight)):this.resize()}},{key:"resize",value:function(t,e){if(this.fullscreen)this.layout(window.innerWidth,window.innerHeight);else{var n=this.config,o=this.anchor[0].getBoundingClientRect();n.width=t||o.width||n.width,n.height=e||o.height||n.height,this.containerAnchor.css({position:"relative",zIndex:"auto"}),this.layout(n.width,n.height)}}},{key:"layout",value:function(t,e){this.containerAnchor.css({width:"".concat(t,"px"),height:"".concat(e,"px")});var n=e-this.toolbarRect.height;this.kline&&this.kline.resize&&this.kline.resize(t,n),this.toolbar.resize()}}]),e}();n.d(e,"CombKline",function(){return M_})}]).CombKline});